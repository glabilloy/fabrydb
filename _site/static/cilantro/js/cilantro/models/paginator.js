var __slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};define(["../core","underscore","backbone"],function(t,e,i){var n,s,o,r,a;return o={comparator:"page_num",refresh:function(){var t=this;return this.pending?void 0:(this.pending=!0,this.fetch({reset:!0}).done(function(){return delete t.pending,t.setCurrentPage(t.models[0].id)}))},parse:function(t,e){return e.reset||this.reset(null,{silent:!0}),this.perPage=t.per_page,this.trigger("change:pagesize",this,this.perPage),this.numPages=t.num_pages,this.trigger("change:pagecount",this,this.numPages),this.objectCount=t.object_count,this.trigger("change:objectcount",this,this.objectCount),this.currentPageNum=null,this.setCurrentPage(t.page_num),[t]},hasPage:function(t){return t>=1&&t<=this.numPages},hasNextPage:function(t){return null==t&&(t=this.currentPageNum),t<this.numPages},hasPreviousPage:function(t){return null==t&&(t=this.currentPageNum),t>1},setCurrentPage:function(t){if(t!==this.currentPageNum){if(!this.hasPage(t))throw new Error("Cannot set the current page out of bounds");return this.previousPageNum=this.currentPageNum,this.currentPageNum=t,this.trigger.apply(this,["change:currentpage",this].concat(__slice.call(this.getCurrentPageStats())))}},getPage:function(t,e){var i;return null==e&&(e={}),this.hasPage(t)?((i=this.get(t))||e.load===!1||(i=new this.model({page_num:t}),i.pending=!0,this.add(i),i.fetch().done(function(){return delete i.pending})),i&&e.active!==!1&&this.setCurrentPage(t),i):void 0},getCurrentPage:function(t){return this.getPage(this.currentPageNum,t)},getFirstPage:function(t){return this.getPage(1,t)},getLastPage:function(t){return this.getPage(this.numPages,t)},getNextPage:function(t,e){return null==t&&(t=this.currentPageNum),this.getPage(t+1,e)},getPreviousPage:function(t,e){return null==t&&(t=this.currentPageNum),this.getPage(t-1,e)},pageIsLoading:function(t){var e;return null==t&&(t=this.currentPageNum),(e=this.getPage(t,{active:!1,load:!1}))?!!e.pending:void 0},getPageCount:function(){return this.numPages},getCurrentPageStats:function(){return[this.currentPageNum,{previous:this.previousPageNum,first:1===this.currentPageNum,last:this.currentPageNum===this.numPages}]}},n=function(i){function n(){return r=n.__super__.constructor.apply(this,arguments)}return __extends(n,i),n.prototype.idAttribute="page_num",n.prototype.url=function(){var i;return i=e.result(this.collection,"url"),t.utils.alterUrlParams(i,{page:this.id,per_page:this.collection.perPage})},n}(i.Model),s=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.model=n,e}(i.Collection),e.extend(s.prototype,o),{PaginatorMixin:o,Page:n,Paginator:s}});
//@ sourceMappingURL=paginator.js.map