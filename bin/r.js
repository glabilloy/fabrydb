var requirejs,require,define;(function(console,args,readFileFunc){var fileName,env,fs,vm,path,exec,rhinoContext,dir,nodeRequire,nodeDefine,exists,reqMain,loadedOptimizedLib,existsForNode,version="2.1.1",jsSuffixRegExp=/\.js$/,commandOption="",useLibLoaded={},rhinoArgs=args,readFile=typeof readFileFunc!=="undefined"?readFileFunc:null;function showHelp(){console.log("See https://github.com/jrburke/r.js for usage.")}if(typeof Packages!=="undefined"){env="rhino";fileName=args[0];if(fileName&&fileName.indexOf("-")===0){commandOption=fileName.substring(1);fileName=args[1]}rhinoContext=Packages.org.mozilla.javascript.ContextFactory.getGlobal().enterContext();exec=function(string,name){return rhinoContext.evaluateString(this,string,name,0,null)};exists=function(fileName){return new java.io.File(fileName).exists()};if(typeof console==="undefined"){console={log:function(){print.apply(undefined,arguments)}}}}else if(typeof process!=="undefined"){env="node";fs=require("fs");vm=require("vm");path=require("path");existsForNode=fs.existsSync||path.existsSync;nodeRequire=require;nodeDefine=define;reqMain=require.main;require=undefined;define=undefined;readFile=function(path){return fs.readFileSync(path,"utf8")};exec=function(string,name){return vm.runInThisContext(this.requirejsVars.require.makeNodeWrapper(string),name?fs.realpathSync(name):"")};exists=function(fileName){return existsForNode(fileName)};fileName=process.argv[2];if(fileName&&fileName.indexOf("-")===0){commandOption=fileName.substring(1);fileName=process.argv[3]}}(function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=!!(typeof window!=="undefined"&&navigator&&document),isWebWorker=!isBrowser&&typeof importScripts!=="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=false;function isFunction(it){return ostring.call(it)==="[object Function]"}function isArray(it){return ostring.call(it)==="[object Array]"}function each(ary,func){if(ary){var i;for(i=0;i<ary.length;i+=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1;i-=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function eachProp(obj,func){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){if(func(obj[prop],prop)){break}}}}function mixin(target,source,force,deepStringMixin){if(source){eachProp(source,function(value,prop){if(force||!hasProp(target,prop)){if(deepStringMixin&&typeof value!=="string"){if(!target[prop]){target[prop]={}}mixin(target[prop],value,force,deepStringMixin)}else{target[prop]=value}}})}return target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(value){if(!value){return value}var g=global;each(value.split("."),function(part){g=g[part]});return g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);e.requireType=id;e.requireModules=requireModules;if(err){e.originalError=err}return e}if(typeof define!=="undefined"){return}if(typeof requirejs!=="undefined"){if(isFunction(requirejs)){return}cfg=requirejs;requirejs=undefined}if(typeof require!=="undefined"&&!isFunction(require)){cfg=require;require=undefined}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},map:{},config:{}},registry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName,applyMap){var pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"];if(name&&name.charAt(0)==="."){if(baseName){if(config.pkgs[baseName]){normalizedBaseParts=baseParts=[baseName]}else{normalizedBaseParts=baseParts.slice(0,baseParts.length-1)}name=normalizedBaseParts.concat(name.split("/"));trimDots(name);pkgConfig=config.pkgs[pkgName=name[0]];name=name.join("/");if(pkgConfig&&name===pkgName+"/"+pkgConfig.main){name=pkgName}}else if(name.indexOf("./")===0){name=name.substring(2)}}if(applyMap&&(baseParts||starMap)&&map){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join("/")];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break}}}}if(foundMap){break}if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/")}}return name}function removeScript(name){if(isBrowser){each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName){scriptNode.parentNode.removeChild(scriptNode);return true}})}}function hasPathFallback(id){var pathConfig=config.paths[id];if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1){removeScript(id);pathConfig.shift();context.require.undef(id);context.require([id]);return true}}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}return[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=true,normalizedName="";if(!name){isDefine=false;name="_@r"+(requireCounter+=1)}nameParts=splitPrefix(name);prefix=nameParts[0];name=nameParts[1];if(prefix){prefix=normalize(prefix,parentName,applyMap);pluginModule=defined[prefix]}if(name){if(prefix){if(pluginModule&&pluginModule.normalize){normalizedName=pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)})}else{normalizedName=normalize(name,parentName,applyMap)}}else{normalizedName=normalize(name,parentName,applyMap);nameParts=splitPrefix(normalizedName);prefix=nameParts[0];normalizedName=nameParts[1];isNormalized=true;url=context.nameToUrl(normalizedName)}}suffix=prefix&&!pluginModule&&!isNormalized?"_unnormalized"+(unnormalizedCounter+=1):"";return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=registry[id];if(!mod){mod=registry[id]=new context.Module(depMap)}return mod}function on(depMap,name,fn){var id=depMap.id,mod=registry[id];if(hasProp(defined,id)&&(!mod||mod.defineEmitComplete)){if(name==="defined"){fn(defined[id])}}else{getModule(depMap).on(name,fn)}}function onError(err,errback){var ids=err.requireModules,notified=false;if(errback){errback(err)}else{each(ids,function(id){var mod=registry[id];if(mod){mod.error=err;if(mod.events.error){notified=true;mod.emit("error",err)}}});if(!notified){req.onError(err)}}}function takeGlobalQueue(){if(globalDefQueue.length){apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue));globalDefQueue=[]}}handlers={require:function(mod){if(mod.require){return mod.require}else{return mod.require=context.makeRequire(mod.map)}},exports:function(mod){mod.usingExports=true;if(mod.map.isDefine){if(mod.exports){return mod.exports}else{return mod.exports=defined[mod.map.id]={}}}},module:function(mod){if(mod.module){return mod.module}else{return mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return config.config&&config.config[mod.map.id]||{}},exports:defined[mod.map.id]}}}};function cleanRegistry(id){delete registry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;if(mod.error){mod.emit("error",mod.error)}else{traced[id]=true;each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=registry[depId];if(dep&&!mod.depMatched[i]&&!processed[depId]){if(traced[depId]){mod.defineDep(i,defined[depId]);mod.check()}else{breakCycle(dep,traced,processed)}}});processed[id]=true}}function checkLoaded(){var map,modId,err,usingPathFallback,waitInterval=config.waitSeconds*1e3,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=false,needCycleCheck=true;if(inCheckLoaded){return}inCheckLoaded=true;eachProp(registry,function(mod){map=mod.map;modId=map.id;if(!mod.enabled){return}if(!map.isDefine){reqCalls.push(mod)}if(!mod.error){if(!mod.inited&&expired){if(hasPathFallback(modId)){usingPathFallback=true;stillLoading=true}else{noLoads.push(modId);removeScript(modId)}}else if(!mod.inited&&mod.fetched&&map.isDefine){stillLoading=true;if(!map.prefix){return needCycleCheck=false}}}});if(expired&&noLoads.length){err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads);err.contextName=context.contextName;return onError(err)}if(needCycleCheck){each(reqCalls,function(mod){breakCycle(mod,{},{})})}if((!expired||usingPathFallback)&&stillLoading){if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50)}}inCheckLoaded=false}Module=function(map){this.events=undefEvents[map.id]||{};this.map=map;this.shim=config.shim[map.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Module.prototype={init:function(depMaps,factory,errback,options){options=options||{};if(this.inited){return}this.factory=factory;if(errback){this.on("error",errback)}else if(this.events.error){errback=bind(this,function(err){this.emit("error",err)})}this.depMaps=depMaps&&depMaps.slice(0);this.errback=errback;this.inited=true;this.ignore=options.ignore;if(options.enabled||this.enabled){this.enable()}else{this.check()}},defineDep:function(i,depExports){if(!this.depMatched[i]){this.depMatched[i]=true;this.depCount-=1;this.depExports[i]=depExports}},fetch:function(){if(this.fetched){return}this.fetched=true;context.startTime=(new Date).getTime();var map=this.map;if(this.shim){context.makeRequire(this.map,{enableBuildCallback:true})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}else{return map.prefix?this.callPlugin():this.load()}},load:function(){var url=this.map.url;if(!urlFetched[url]){urlFetched[url]=true;context.load(this.map.id,url)}},check:function(){if(!this.enabled||this.enabling){return}var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(!this.inited){this.fetch()}else if(this.error){this.emit("error",this.error)}else if(!this.defining){this.defining=true;if(this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error){try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}}else{exports=context.execCb(id,factory,depExports,exports)}if(this.map.isDefine){cjsModule=this.module;if(cjsModule&&cjsModule.exports!==undefined&&cjsModule.exports!==this.exports){exports=cjsModule.exports}else if(exports===undefined&&this.usingExports){exports=this.exports}}if(err){err.requireMap=this.map;err.requireModules=[this.map.id];err.requireType="define";return onError(this.error=err)}}else{exports=factory}this.exports=exports;if(this.map.isDefine&&!this.ignore){defined[id]=exports;if(req.onResourceLoad){req.onResourceLoad(context,this.map,this.depMaps)}}delete registry[id];this.defined=true}this.defining=false;if(this.defined&&!this.defineEmitted){this.defineEmitted=true;this.emit("defined",this.exports);this.defineEmitComplete=true}}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap);on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:true,skipMap:true});if(this.map.unnormalized){if(plugin.normalize){name=plugin.normalize(name,function(name){return normalize(name,parentName,true)})||""}normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap);on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:true,ignore:true})}));normalizedMod=registry[normalizedMap.id];if(normalizedMod){this.depMaps.push(normalizedMap);if(this.events.error){normalizedMod.on("error",bind(this,function(err){this.emit("error",err)}))}normalizedMod.enable()}return}load=bind(this,function(value){this.init([],function(){return value},null,{enabled:true})});load.error=bind(this,function(err){this.inited=true;this.error=err;err.requireModules=[id];eachProp(registry,function(mod){if(mod.map.id.indexOf(id+"_unnormalized")===0){cleanRegistry(mod.map.id)}});onError(err)});load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;if(textAlt){text=textAlt}if(hasInteractive){useInteractive=false}getModule(moduleMap);try{req.exec(text)}catch(e){throw new Error("fromText eval for "+moduleName+" failed: "+e)}if(hasInteractive){useInteractive=true}this.depMaps.push(moduleMap);context.completeLoad(moduleName);localRequire([moduleName],load)});plugin.load(map.name,localRequire,load,config)}));context.enable(pluginMap,this);this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){this.enabled=true;this.enabling=true;each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if(typeof depMap==="string"){depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,false,!this.skipMap);this.depMaps[i]=depMap;handler=handlers[depMap.id];if(handler){this.depExports[i]=handler(this);return}this.depCount+=1;on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports);this.check()}));if(this.errback){on(depMap,"error",this.errback)}}id=depMap.id;mod=registry[id];if(!handlers[id]&&mod&&!mod.enabled){context.enable(depMap,this)}}));eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=registry[pluginMap.id];if(mod&&!mod.enabled){context.enable(pluginMap,this)}}));this.enabling=false;this.check()},on:function(name,cb){var cbs=this.events[name];if(!cbs){cbs=this.events[name]=[]}cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)});if(name==="error"){delete this.events[name]}}};function callGetModule(args){getModule(makeModuleMap(args[0],null,true)).init(args[1],args[2])}function removeListener(node,func,name,ieName){if(node.detachEvent&&!isOpera){if(ieName){node.detachEvent(ieName,func)}}else{node.removeEventListener(name,func,false)}}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;removeListener(node,context.onScriptLoad,"load","onreadystatechange");removeListener(node,context.onScriptError,"error");return{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))}else{callGetModule(args)}}}context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,configure:function(cfg){if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=="/"){cfg.baseUrl+="/"}}var pkgs=config.pkgs,shim=config.shim,objs={paths:true,config:true,map:true};eachProp(cfg,function(value,prop){if(objs[prop]){if(prop==="map"){mixin(config[prop],value,true,true)}else{mixin(config[prop],value,true)}}else{config[prop]=value}});if(cfg.shim){eachProp(cfg.shim,function(value,id){if(isArray(value)){value={deps:value}}if(value.exports&&!value.exportsFn){value.exportsFn=context.makeShimExports(value)}shim[id]=value});config.shim=shim}if(cfg.packages){each(cfg.packages,function(pkgObj){var location;pkgObj=typeof pkgObj==="string"?{name:pkgObj}:pkgObj;location=pkgObj.location;pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}});config.pkgs=pkgs}eachProp(registry,function(mod,id){if(!mod.inited&&!mod.map.unnormalized){mod.map=makeModuleMap(id)}});if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback)}},makeShimExports:function(value){function fn(){var ret;if(value.init){ret=value.init.apply(global,arguments)}return ret||getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){options=options||{};function localRequire(deps,callback,errback){var id,map,requireMod;if(options.enableBuildCallback&&callback&&isFunction(callback)){callback.__requireJsBuild=true}if(typeof deps==="string"){if(isFunction(callback)){return onError(makeError("requireargs","Invalid require call"),errback)}if(relMap&&handlers[deps]){return handlers[deps](registry[relMap.id])}if(req.get){return req.get(context,deps,relMap)}map=makeModuleMap(deps,relMap,false,true);id=map.id;if(!hasProp(defined,id)){return onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))}return defined[id]}intakeDefines();context.nextTick(function(){intakeDefines();requireMod=getModule(makeModuleMap(null,relMap));requireMod.skipMap=options.skipMap;requireMod.init(deps,callback,errback,{enabled:true});checkLoaded()});return localRequire}mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var index=moduleNamePlusExt.lastIndexOf("."),ext=null;if(index!==-1){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,true),ext)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,false,true).id)},specified:function(id){id=makeModuleMap(id,relMap,false,true).id;return hasProp(defined,id)||hasProp(registry,id)}});if(!relMap){localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,true),mod=registry[id];delete defined[id];delete urlFetched[map.url];delete undefEvents[id];if(mod){if(mod.events.defined){undefEvents[id]=mod.events}cleanRegistry(id)}}}return localRequire},enable:function(depMap,parent){var mod=registry[depMap.id];if(mod){getModule(depMap).enable()}},completeLoad:function(moduleName){var found,args,mod,shim=config.shim[moduleName]||{},shExports=shim.exports;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;if(found){break}found=true}else if(args[0]===moduleName){found=true}callGetModule(args)}mod=registry[moduleName];if(!found&&!defined[moduleName]&&mod&&!mod.inited){if(config.enforceDefine&&(!shExports||!getGlobal(shExports))){if(hasPathFallback(moduleName)){return}else{return onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]))}}else{callGetModule([moduleName,shim.deps||[],shim.exportsFn])}}checkLoaded()},nameToUrl:function(moduleName,ext){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath;if(req.jsExtRegExp.test(moduleName)){url=moduleName+(ext||"")}else{paths=config.paths;pkgs=config.pkgs;syms=moduleName.split("/");for(i=syms.length;i>0;i-=1){parentModule=syms.slice(0,i).join("/");pkg=pkgs[parentModule];parentPath=paths[parentModule];if(parentPath){if(isArray(parentPath)){parentPath=parentPath[0]}syms.splice(0,i,parentPath);break}else if(pkg){if(moduleName===pkg.name){pkgPath=pkg.location+"/"+pkg.main}else{pkgPath=pkg.location}syms.splice(0,i,pkgPath);break}}url=syms.join("/");url+=ext||(/\?/.test(url)?"":".js");url=(url.charAt(0)==="/"||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if(evt.type==="load"||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){return onError(makeError("scripterror","Script error",evt,[data.id]))}}};context.require=context.makeRequire();return context}req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;if(!isArray(deps)&&typeof deps!=="string"){config=deps;if(isArray(callback)){deps=callback;callback=errback;errback=optional}else{deps=[]}}if(config&&config.context){contextName=config.context}context=contexts[contextName];if(!context){context=contexts[contextName]=req.s.newContext(contextName)}if(config){context.configure(config)}return context.require(deps,callback,errback)};req.config=function(config){return req(config)};req.nextTick=typeof setTimeout!=="undefined"?function(fn){setTimeout(fn,4)}:function(fn){fn()};if(!require){require=req}req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};req({});each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}});if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];if(baseElement){head=s.head=baseElement.parentNode}}req.onError=function(err){throw err};req.load=function(context,moduleName,url){var config=context&&context.config||{},node;if(isBrowser){node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=config.scriptType||"text/javascript";node.charset="utf-8";node.async=true;node.setAttribute("data-requirecontext",context.contextName);node.setAttribute("data-requiremodule",moduleName);if(node.attachEvent&&!(node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0)&&!isOpera){useInteractive=true;node.attachEvent("onreadystatechange",context.onScriptLoad)}else{node.addEventListener("load",context.onScriptLoad,false);node.addEventListener("error",context.onScriptError,false)}node.src=url;currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement)}else{head.appendChild(node)}currentlyAddingScript=null;return node}else if(isWebWorker){importScripts(url);context.completeLoad(moduleName)}};function getInteractiveScript(){if(interactiveScript&&interactiveScript.readyState==="interactive"){return interactiveScript}eachReverse(scripts(),function(script){if(script.readyState==="interactive"){return interactiveScript=script}});return interactiveScript}if(isBrowser){eachReverse(scripts(),function(script){if(!head){head=script.parentNode}dataMain=script.getAttribute("data-main");if(dataMain){if(!cfg.baseUrl){src=dataMain.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath;dataMain=mainScript}dataMain=dataMain.replace(jsSuffixRegExp,"");cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain];return true}})}define=function(name,deps,callback){var node,context;if(typeof name!=="string"){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=[]}if(!deps.length&&isFunction(callback)){if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(callback.length===1?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute("data-requiremodule")}context=contexts[node.getAttribute("data-requirecontext")]}}(context?context.defQueue:globalDefQueue).push([name,deps,callback])};define.amd={jQuery:true};req.exec=function(text){return eval(text)};req(cfg)})(this);if(env==="rhino"){(function(){"use strict";require.load=function(context,moduleName,url){load(url);context.completeLoad(moduleName)}})()}else if(env==="node"){this.requirejsVars={require:require,requirejs:require,define:define,nodeRequire:nodeRequire};require.nodeRequire=nodeRequire;(function(){"use strict";var nodeReq=requirejsVars.nodeRequire,req=requirejsVars.require,def=requirejsVars.define,fs=nodeReq("fs"),path=nodeReq("path"),vm=nodeReq("vm"),exists=fs.existsSync||path.existsSync;function syncTick(fn){fn()}req.get=function(context,moduleName,relModuleMap){if(moduleName==="require"||moduleName==="exports"||moduleName==="module"){req.onError(new Error("Explicit require of "+moduleName+" is not allowed."))}var ret,oldTick,moduleMap=context.makeModuleMap(moduleName,relModuleMap);moduleName=moduleMap.id;if(context.defined.hasOwnProperty(moduleName)){ret=context.defined[moduleName]}else{if(ret===undefined){oldTick=context.nextTick;context.nextTick=syncTick;try{if(moduleMap.prefix){context.require([moduleMap.originalName]);moduleMap=context.makeModuleMap(moduleMap.originalName,relModuleMap);ret=context.defined[moduleMap.id]}else{req.load(context,moduleName,moduleMap.url);context.enable(moduleMap,relModuleMap);ret=context.defined[moduleName]}}finally{context.nextTick=oldTick}}}return ret};req.nextTick=function(fn){process.nextTick(fn)};req.makeNodeWrapper=function(contents){return"(function (require, requirejs, define) { "+contents+"\n}(requirejsVars.require, requirejsVars.requirejs, requirejsVars.define));"};req.load=function(context,moduleName,url){var contents,err;if(exists(url)){contents=fs.readFileSync(url,"utf8");contents=req.makeNodeWrapper(contents);try{vm.runInThisContext(contents,fs.realpathSync(url))}catch(e){err=new Error("Evaluating "+url+' as module "'+moduleName+'" failed with error: '+e);err.originalError=e;err.moduleName=moduleName;err.fileName=url;return req.onError(err)}}else{def(moduleName,function(){var originalName=context.registry[moduleName]&&context.registry[moduleName].map.originalName;try{return(context.config.nodeRequire||req.nodeRequire)(originalName)}catch(e){err=new Error("Calling node's require(\""+originalName+'") failed with error: '+e);err.originalError=e;err.moduleName=originalName;return req.onError(err)}})}context.completeLoad(moduleName)};req.exec=function(text){text=req.makeNodeWrapper(text);return eval(text)}})()}if(commandOption!=="o"&&(!fileName||!jsSuffixRegExp.test(fileName))){fileName="main.js"}function loadLib(){(function(){var pathRegExp=/(\/|^)env\/|\{env\}/,env="unknown";if(typeof Packages!=="undefined"){env="rhino"}else if(typeof process!=="undefined"){env="node"}else if(typeof window!=="undefined"&&navigator&&document){env="browser"}define("env",{load:function(name,req,load,config){if(config.env){env=config.env}name=name.replace(pathRegExp,function(match,prefix){if(match.indexOf("{")===-1){return prefix+env+"/"}else{return env}});req([name],function(mod){load(mod)})}})})();if(env==="node"){define("node/assert",["assert"],function(assert){return assert})}if(env==="rhino"){define("rhino/assert",function(){return{}})}if(env==="node"){define("node/args",function(){var args=process.argv.slice(2);if(args[0]&&args[0].indexOf("-"===0)){args=args.slice(1)}return args})}if(env==="rhino"){var jsLibRhinoArgs=typeof rhinoArgs!=="undefined"&&rhinoArgs||[].concat(Array.prototype.slice.call(arguments,0));define("rhino/args",function(){var args=jsLibRhinoArgs;if(args[0]&&args[0].indexOf("-"===0)){args=args.slice(1)}return args})}if(env==="node"){define("node/load",["fs"],function(fs){function load(fileName){var contents=fs.readFileSync(fileName,"utf8");process.compile(contents,fileName)}return load})}if(env==="rhino"){define("rhino/load",function(){return load})}if(env==="node"){define("node/file",["fs","path"],function(fs,path){var isWindows=process.platform==="win32",windowsDriveRegExp=/^[a-zA-Z]\:\/$/,file;function frontSlash(path){return path.replace(/\\/g,"/")}function exists(path){if(isWindows&&path.charAt(path.length-1)==="/"&&path.charAt(path.length-2)!==":"){path=path.substring(0,path.length-1)}try{fs.statSync(path);return true}catch(e){return false}}function mkDir(dir){if(!exists(dir)&&(!isWindows||!windowsDriveRegExp.test(dir))){fs.mkdirSync(dir,511)}}function mkFullDir(dir){var parts=dir.split("/"),currDir="",first=true;parts.forEach(function(part){currDir+=part+"/";first=false;if(part){mkDir(currDir)}})}file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return"/"},exists:function(fileName){return exists(fileName)},parent:function(fileName){var parts=fileName.split("/");parts.pop();return parts.join("/")},absPath:function(fileName){return frontSlash(path.normalize(frontSlash(fs.realpathSync(fileName))))},normalize:function(fileName){return frontSlash(path.normalize(fileName))},isFile:function(path){return fs.statSync(path).isFile()},isDirectory:function(path){return fs.statSync(path).isDirectory()},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths){var files=[],topDir,regExpInclude,regExpExclude,dirFileArray,i,stat,filePath,ok,dirFiles,fileName;topDir=startDir;regExpInclude=regExpFilters.include||regExpFilters;regExpExclude=regExpFilters.exclude||null;if(file.exists(topDir)){dirFileArray=fs.readdirSync(topDir);for(i=0;i<dirFileArray.length;i++){fileName=dirFileArray[i];filePath=path.join(topDir,fileName);stat=fs.statSync(filePath);if(stat.isFile()){if(makeUnixPaths){if(filePath.indexOf("/")===-1){filePath=frontSlash(filePath)}}ok=true;if(regExpInclude){ok=filePath.match(regExpInclude)}if(ok&&regExpExclude){ok=!filePath.match(regExpExclude)}if(ok&&(!file.exclusionRegExp||!file.exclusionRegExp.test(fileName))){files.push(filePath)}}else if(stat.isDirectory()&&(!file.exclusionRegExp||!file.exclusionRegExp.test(fileName))){dirFiles=this.getFilteredFileList(filePath,regExpFilters,makeUnixPaths);files.push.apply(files,dirFiles)}}}return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;srcDir=frontSlash(path.normalize(srcDir));destDir=frontSlash(path.normalize(destDir));var fileNames=file.getFilteredFileList(srcDir,regExpFilter,true),copiedFiles=[],i,srcFileName,destFileName;for(i=0;i<fileNames.length;i++){srcFileName=fileNames[i];destFileName=srcFileName.replace(srcDir,destDir);if(file.copyFile(srcFileName,destFileName,onlyCopyNew)){copiedFiles.push(destFileName)}}return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var parentDir;if(onlyCopyNew){if(file.exists(destFileName)&&fs.statSync(destFileName).mtime.getTime()>=fs.statSync(srcFileName).mtime.getTime()){return false}}parentDir=path.dirname(destFileName);if(!file.exists(parentDir)){mkFullDir(parentDir)}fs.writeFileSync(destFileName,fs.readFileSync(srcFileName,"binary"),"binary");return true},renameFile:function(from,to){return fs.renameSync(from,to)},readFile:function(path,encoding){if(encoding==="utf-8"){encoding="utf8"}if(!encoding){encoding="utf8"}var text=fs.readFileSync(path,encoding);if(text.indexOf("﻿")===0){text=text.substring(1,text.length)}return text},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf8")},saveFile:function(fileName,fileContents,encoding){var parentDir;
if(encoding==="utf-8"){encoding="utf8"}if(!encoding){encoding="utf8"}parentDir=path.dirname(fileName);if(!file.exists(parentDir)){mkFullDir(parentDir)}fs.writeFileSync(fileName,fileContents,encoding)},deleteFile:function(fileName){var files,i,stat;if(file.exists(fileName)){stat=fs.statSync(fileName);if(stat.isDirectory()){files=fs.readdirSync(fileName);for(i=0;i<files.length;i++){this.deleteFile(path.join(fileName,files[i]))}fs.rmdirSync(fileName)}else{fs.unlinkSync(fileName)}}},deleteEmptyDirs:function(startDir){var dirFileArray,i,fileName,filePath,stat;if(file.exists(startDir)){dirFileArray=fs.readdirSync(startDir);for(i=0;i<dirFileArray.length;i++){fileName=dirFileArray[i];filePath=path.join(startDir,fileName);stat=fs.statSync(filePath);if(stat.isDirectory()){file.deleteEmptyDirs(filePath)}}if(fs.readdirSync(startDir).length===0){file.deleteFile(startDir)}}}};return file})}if(env==="rhino"){define("rhino/file",function(){var file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return file.lineSeparator},lineSeparator:java.lang.System.getProperty("line.separator"),exists:function(fileName){return new java.io.File(fileName).exists()},parent:function(fileName){return file.absPath(new java.io.File(fileName).getParentFile())},normalize:function(fileName){return file.absPath(fileName)},isFile:function(path){return new java.io.File(path).isFile()},isDirectory:function(path){return new java.io.File(path).isDirectory()},absPath:function(fileObj){if(typeof fileObj==="string"){fileObj=new java.io.File(fileObj)}return(fileObj.getCanonicalPath()+"").replace(file.backSlashRegExp,"/")},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths,startDirIsJavaObject){var files=[],topDir,regExpInclude,regExpExclude,dirFileArray,i,fileObj,filePath,ok,dirFiles;topDir=startDir;if(!startDirIsJavaObject){topDir=new java.io.File(startDir)}regExpInclude=regExpFilters.include||regExpFilters;regExpExclude=regExpFilters.exclude||null;if(topDir.exists()){dirFileArray=topDir.listFiles();for(i=0;i<dirFileArray.length;i++){fileObj=dirFileArray[i];if(fileObj.isFile()){filePath=fileObj.getPath();if(makeUnixPaths){filePath=String(filePath);if(filePath.indexOf("/")===-1){filePath=filePath.replace(/\\/g,"/")}}ok=true;if(regExpInclude){ok=filePath.match(regExpInclude)}if(ok&&regExpExclude){ok=!filePath.match(regExpExclude)}if(ok&&(!file.exclusionRegExp||!file.exclusionRegExp.test(fileObj.getName()))){files.push(filePath)}}else if(fileObj.isDirectory()&&(!file.exclusionRegExp||!file.exclusionRegExp.test(fileObj.getName()))){dirFiles=this.getFilteredFileList(fileObj,regExpFilters,makeUnixPaths,true);files.push.apply(files,dirFiles)}}}return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;var fileNames=file.getFilteredFileList(srcDir,regExpFilter,true),copiedFiles=[],i,srcFileName,destFileName;for(i=0;i<fileNames.length;i++){srcFileName=fileNames[i];destFileName=srcFileName.replace(srcDir,destDir);if(file.copyFile(srcFileName,destFileName,onlyCopyNew)){copiedFiles.push(destFileName)}}return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var destFile=new java.io.File(destFileName),srcFile,parentDir,srcChannel,destChannel;if(onlyCopyNew){srcFile=new java.io.File(srcFileName);if(destFile.exists()&&destFile.lastModified()>=srcFile.lastModified()){return false}}parentDir=destFile.getParentFile();if(!parentDir.exists()){if(!parentDir.mkdirs()){throw"Could not create directory: "+parentDir.getCanonicalPath()}}srcChannel=new java.io.FileInputStream(srcFileName).getChannel();destChannel=new java.io.FileOutputStream(destFileName).getChannel();destChannel.transferFrom(srcChannel,0,srcChannel.size());srcChannel.close();destChannel.close();return true},renameFile:function(from,to){return new java.io.File(from).renameTo(new java.io.File(to))},readFile:function(path,encoding){encoding=encoding||"utf-8";var fileObj=new java.io.File(path),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(fileObj),encoding)),stringBuffer,line;try{stringBuffer=new java.lang.StringBuffer;line=input.readLine();if(line&&line.length()&&line.charAt(0)===65279){line=line.substring(1)}while(line!==null){stringBuffer.append(line);stringBuffer.append(file.lineSeparator);line=input.readLine()}return String(stringBuffer.toString())}finally{input.close()}},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf-8")},saveFile:function(fileName,fileContents,encoding){var outFile=new java.io.File(fileName),outWriter,parentDir,os;parentDir=outFile.getAbsoluteFile().getParentFile();if(!parentDir.exists()){if(!parentDir.mkdirs()){throw"Could not create directory: "+parentDir.getAbsolutePath()}}if(encoding){outWriter=new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile),encoding)}else{outWriter=new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile))}os=new java.io.BufferedWriter(outWriter);try{os.write(fileContents)}finally{os.close()}},deleteFile:function(fileName){var fileObj=new java.io.File(fileName),files,i;if(fileObj.exists()){if(fileObj.isDirectory()){files=fileObj.listFiles();for(i=0;i<files.length;i++){this.deleteFile(files[i])}}fileObj["delete"]()}},deleteEmptyDirs:function(startDir,startDirIsJavaObject){var topDir=startDir,dirFileArray,i,fileObj;if(!startDirIsJavaObject){topDir=new java.io.File(startDir)}if(topDir.exists()){dirFileArray=topDir.listFiles();for(i=0;i<dirFileArray.length;i++){fileObj=dirFileArray[i];if(fileObj.isDirectory()){file.deleteEmptyDirs(fileObj,true)}}if(topDir.listFiles().length===0){file.deleteFile(String(topDir.getPath()))}}}};return file})}if(env==="node"){define("node/quit",function(){"use strict";return function(code){return process.exit(code)}})}if(env==="rhino"){define("rhino/quit",function(){"use strict";return function(code){return quit(code)}})}define("lang",function(){"use strict";var lang={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(it){return lang.ostring.call(it)==="[object Array]"},isFunction:function(it){return lang.ostring.call(it)==="[object Function]"},isRegExp:function(it){return it&&it instanceof RegExp},_mixin:function(dest,source,override){var name;for(name in source){if(source.hasOwnProperty(name)&&(override||!dest.hasOwnProperty(name))){dest[name]=source[name]}}return dest},mixin:function(dest){var parameters=Array.prototype.slice.call(arguments),override,i,l;if(!dest){dest={}}if(parameters.length>2&&typeof arguments[parameters.length-1]==="boolean"){override=parameters.pop()}for(i=1,l=parameters.length;i<l;i++){lang._mixin(dest,parameters[i],override)}return dest},delegate:function(){function TMP(){}return function(obj,props){TMP.prototype=obj;var tmp=new TMP;TMP.prototype=null;if(props){lang.mixin(tmp,props)}return tmp}}(),each:function each(ary,func){if(ary){var i;for(i=0;i<ary.length;i+=1){if(func(ary[i],i,ary)){break}}}},eachProp:function eachProp(obj,func){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){if(func(obj[prop],prop)){break}}}},bind:function bind(obj,fn){return function(){return fn.apply(obj,arguments)}},jsEscape:function(content){return content.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}};return lang});if(env==="node"){define("node/print",function(){function print(msg){console.log(msg)}return print})}if(env==="rhino"){define("rhino/print",function(){return print})}define("logger",["env!env/print"],function(print){var logger={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(level){this.level=level},trace:function(message){if(this.level<=this.TRACE){this._print(message)}},info:function(message){if(this.level<=this.INFO){this._print(message)}},warn:function(message){if(this.level<=this.WARN){this._print(message)}},error:function(message){if(this.level<=this.ERROR){this._print(message)}},_print:function(message){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+message)},_sysPrint:function(message){print(message)}};return logger});define("esprima",["exports"],function(exports){(function(exports){"use strict";var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,buffer,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};PropertyKind={Data:1,Get:2,Set:4};Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Regex={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function sliceSource(from,to){return source.slice(from,to)}if(typeof"esprima"[0]==="undefined"){sliceSource=function sliceArraySource(from,to){return source.slice(from,to).join("")}}function isDecimalDigit(ch){return"0123456789".indexOf(ch)>=0}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return ch===" "||ch==="	"||ch===""||ch==="\f"||ch===" "||ch.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(ch)>=0}function isLineTerminator(ch){return ch==="\n"||ch==="\r"||ch==="\u2028"||ch==="\u2029"}function isIdentifierStart(ch){return ch==="$"||ch==="_"||ch==="\\"||ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierStart.test(ch)}function isIdentifierPart(ch){return ch==="$"||ch==="_"||ch==="\\"||ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"||ch>="0"&&ch<="9"||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierPart.test(ch)}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return true}return false}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true}return false}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isKeyword(id){var keyword=false;switch(id.length){case 2:keyword=id==="if"||id==="in"||id==="do";break;case 3:keyword=id==="var"||id==="for"||id==="new"||id==="try";break;case 4:keyword=id==="this"||id==="else"||id==="case"||id==="void"||id==="with";break;case 5:keyword=id==="while"||id==="break"||id==="catch"||id==="throw";break;case 6:keyword=id==="return"||id==="typeof"||id==="delete"||id==="switch";break;case 7:keyword=id==="default"||id==="finally";break;case 8:keyword=id==="function"||id==="continue"||id==="debugger";break;case 10:keyword=id==="instanceof";break}if(keyword){return true}switch(id){case"const":return true;case"yield":case"let":return true}if(strict&&isStrictModeReservedWord(id)){return true}return isFutureReservedWord(id)}function nextChar(){return source[index++]}function skipComment(){var ch,blockComment,lineComment;blockComment=false;lineComment=false;while(index<length){ch=source[index];if(lineComment){ch=nextChar();if(isLineTerminator(ch)){lineComment=false;if(ch==="\r"&&source[index]==="\n"){++index}++lineNumber;lineStart=index}}else if(blockComment){if(isLineTerminator(ch)){if(ch==="\r"&&source[index+1]==="\n"){++index}++lineNumber;++index;lineStart=index;if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}else{ch=nextChar();if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(ch==="*"){ch=source[index];if(ch==="/"){++index;blockComment=false}}}}else if(ch==="/"){ch=source[index+1];if(ch==="/"){index+=2;lineComment=true}else if(ch==="*"){index+=2;blockComment=true;if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}else{break}}else if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){++index;if(ch==="\r"&&source[index]==="\n"){++index}++lineNumber;lineStart=index}else{break}}}function scanHexEscape(prefix){var i,len,ch,code=0;len=prefix==="u"?4:2;for(i=0;i<len;++i){if(index<length&&isHexDigit(source[index])){ch=nextChar();code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}else{return""}}return String.fromCharCode(code)}function scanIdentifier(){var ch,start,id,restore;ch=source[index];if(!isIdentifierStart(ch)){return}start=index;if(ch==="\\"){++index;if(source[index]!=="u"){return}++index;restore=index;ch=scanHexEscape("u");if(ch){if(ch==="\\"||!isIdentifierStart(ch)){return}id=ch}else{index=restore;id="u"}}else{id=nextChar()}while(index<length){ch=source[index];if(!isIdentifierPart(ch)){break}if(ch==="\\"){++index;if(source[index]!=="u"){return}++index;restore=index;ch=scanHexEscape("u");if(ch){if(ch==="\\"||!isIdentifierPart(ch)){return}id+=ch}else{index=restore;id+="u"}}else{id+=nextChar()}}if(id.length===1){return{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(isKeyword(id)){return{type:Token.Keyword,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(id==="null"){return{type:Token.NullLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(id==="true"||id==="false"){return{type:Token.BooleanLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}return{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanPunctuator(){var start=index,ch1=source[index],ch2,ch3,ch4;if(ch1===";"||ch1==="{"||ch1==="}"){++index;return{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch1===","||ch1==="("||ch1===")"){++index;return{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}ch2=source[index+1];if(ch1==="."&&!isDecimalDigit(ch2)){return{type:Token.Punctuator,value:nextChar(),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}ch3=source[index+2];ch4=source[index+3];if(ch1===">"&&ch2===">"&&ch3===">"){if(ch4==="="){index+=4;return{type:Token.Punctuator,value:">>>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}if(ch1==="="&&ch2==="="&&ch3==="="){index+=3;return{type:Token.Punctuator,value:"===",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch1==="!"&&ch2==="="&&ch3==="="){index+=3;return{type:Token.Punctuator,value:"!==",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch1===">"&&ch2===">"&&ch3===">"){index+=3;return{type:Token.Punctuator,value:">>>",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch1==="<"&&ch2==="<"&&ch3==="="){index+=3;return{type:Token.Punctuator,value:"<<=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch1===">"&&ch2===">"&&ch3==="="){index+=3;return{type:Token.Punctuator,value:">>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(ch2==="="){if("<>=!+-*%&|^/".indexOf(ch1)>=0){index+=2;return{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}if(ch1===ch2&&"+-<>&|".indexOf(ch1)>=0){if("+-<>&|".indexOf(ch2)>=0){index+=2;return{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}if("[]<>+-*%&|^!~?:=/".indexOf(ch1)>=0){return{type:Token.Punctuator,value:nextChar(),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch)||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=nextChar();ch=source[index];if(number==="0"){if(ch==="x"||ch==="X"){number+=nextChar();while(index<length){ch=source[index];if(!isHexDigit(ch)){break}number+=nextChar()}if(number.length<=2){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(index<length){ch=source[index];if(isIdentifierStart(ch)){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}return{type:Token.NumericLiteral,value:parseInt(number,16),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}else if(isOctalDigit(ch)){number+=nextChar();while(index<length){ch=source[index];if(!isOctalDigit(ch)){break}number+=nextChar()}if(index<length){ch=source[index];if(isIdentifierStart(ch)||isDecimalDigit(ch)){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}return{type:Token.NumericLiteral,value:parseInt(number,8),octal:true,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(isDecimalDigit(ch)){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}while(index<length){ch=source[index];if(!isDecimalDigit(ch)){break}number+=nextChar()}}if(ch==="."){number+=nextChar();while(index<length){ch=source[index];if(!isDecimalDigit(ch)){break}number+=nextChar()}}if(ch==="e"||ch==="E"){number+=nextChar();ch=source[index];if(ch==="+"||ch==="-"){number+=nextChar()}ch=source[index];if(isDecimalDigit(ch)){number+=nextChar();while(index<length){ch=source[index];if(!isDecimalDigit(ch)){break}number+=nextChar()}}else{ch="character "+ch;if(index>=length){ch="<end>"}throwError({},Messages.UnexpectedToken,"ILLEGAL")}}if(index<length){ch=source[index];if(isIdentifierStart(ch)){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}return{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanStringLiteral(){var str="",quote,start,ch,code,unescaped,restore,octal=false;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=nextChar();if(ch===quote){quote="";break}else if(ch==="\\"){ch=nextChar();if(!isLineTerminator(ch)){switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"u":case"x":restore=index;unescaped=scanHexEscape(ch);if(unescaped){str+=unescaped}else{index=restore;str+=ch}break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;default:if(isOctalDigit(ch)){code="01234567".indexOf(ch);if(code!==0){octal=true}if(index<length&&isOctalDigit(source[index])){octal=true;code=code*8+"01234567".indexOf(nextChar());if("0123".indexOf(ch)>=0&&index<length&&isOctalDigit(source[index])){code=code*8+"01234567".indexOf(nextChar())}}str+=String.fromCharCode(code)}else{str+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}}}else if(isLineTerminator(ch)){break}else{str+=ch}}if(quote!==""){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.StringLiteral,value:str,octal:octal,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanRegExp(){var str="",ch,start,pattern,flags,value,classMarker=false,restore;buffer=null;skipComment();start=index;ch=source[index];assert(ch==="/","Regular expression literal must start with a slash");str=nextChar();while(index<length){ch=nextChar();str+=ch;if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="\\"){ch=nextChar();if(isLineTerminator(ch)){throwError({},Messages.UnterminatedRegExp)}str+=ch}else if(ch==="/"){break}else if(ch==="["){classMarker=true}else if(isLineTerminator(ch)){throwError({},Messages.UnterminatedRegExp)}}}if(str.length===1){throwError({},Messages.UnterminatedRegExp)}pattern=str.substr(1,str.length-2);flags="";while(index<length){ch=source[index];if(!isIdentifierPart(ch)){break}++index;if(ch==="\\"&&index<length){ch=source[index];if(ch==="u"){++index;restore=index;ch=scanHexEscape("u");if(ch){flags+=ch;str+="\\u";for(;restore<index;++restore){str+=source[restore]}}else{index=restore;flags+="u";str+="\\u"}}else{str+="\\"}}else{flags+=ch;str+=ch}}try{value=new RegExp(pattern,flags)}catch(e){throwError({},Messages.InvalidRegExp)}return{literal:str,value:value,range:[start,index]}}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advance(){var ch,token;skipComment();if(index>=length){return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,range:[index,index]}}token=scanPunctuator();if(typeof token!=="undefined"){return token}ch=source[index];if(ch==="'"||ch==='"'){return scanStringLiteral()}if(ch==="."||isDecimalDigit(ch)){return scanNumericLiteral()}token=scanIdentifier();if(typeof token!=="undefined"){return token}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function lex(){var token;if(buffer){index=buffer.range[1];lineNumber=buffer.lineNumber;lineStart=buffer.lineStart;token=buffer;buffer=null;return token}buffer=null;return advance()}function lookahead(){var pos,line,start;if(buffer!==null){return buffer}pos=index;line=lineNumber;start=lineStart;buffer=advance();index=pos;lineNumber=line;lineStart=start;return buffer}function peekLineTerminator(){var pos,line,start,found;pos=index;line=lineNumber;start=lineStart;skipComment();found=lineNumber!==line;index=pos;lineNumber=line;lineStart=start;return found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){return args[index]||""});if(typeof token.lineNumber==="number"){error=new Error("Line "+token.lineNumber+": "+msg);error.index=token.range[0];error.lineNumber=token.lineNumber;error.column=token.range[0]-lineStart+1}else{error=new Error("Line "+lineNumber+": "+msg);error.index=index;error.lineNumber=lineNumber;error.column=index-lineStart+1}throw error}function throwErrorTolerant(){var error;try{throwError.apply(null,arguments)}catch(e){if(extra.errors){extra.errors.push(e)}else{throw e}}}function throwUnexpected(token){var s;if(token.type===Token.EOF){throwError(token,Messages.UnexpectedEOS)}if(token.type===Token.NumericLiteral){throwError(token,Messages.UnexpectedNumber)}if(token.type===Token.StringLiteral){throwError(token,Messages.UnexpectedString)}if(token.type===Token.Identifier){throwError(token,Messages.UnexpectedIdentifier)}if(token.type===Token.Keyword){if(isFutureReservedWord(token.value)){throwError(token,Messages.UnexpectedReserved)}else if(strict&&isStrictModeReservedWord(token.value)){throwError(token,Messages.StrictReservedWord)}throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpected(token)}}function expectKeyword(keyword){var token=lex();if(token.type!==Token.Keyword||token.value!==keyword){throwUnexpected(token)}}function match(value){var token=lookahead();return token.type===Token.Punctuator&&token.value===value}function matchKeyword(keyword){var token=lookahead();return token.type===Token.Keyword&&token.value===keyword}function matchAssign(){var token=lookahead(),op=token.value;if(token.type!==Token.Punctuator){return false}return op==="="||op==="*="||op==="/="||op==="%="||op==="+="||op==="-="||op==="<<="||op===">>="||op===">>>="||op==="&="||op==="^="||op==="|="}function consumeSemicolon(){var token,line;if(source[index]===";"){lex();return}line=lineNumber;skipComment();if(lineNumber!==line){return}if(match(";")){lex();return}token=lookahead();if(token.type!==Token.EOF&&!match("}")){throwUnexpected(token)}return}function isLeftHandSide(expr){return expr.type===Syntax.Identifier||expr.type===Syntax.MemberExpression}function parseArrayInitialiser(){var elements=[],undef;expect("[");while(!match("]")){if(match(",")){lex();elements.push(undef)}else{elements.push(parseAssignmentExpression());if(!match("]")){expect(",")}}}expect("]");return{type:Syntax.ArrayExpression,elements:elements}}function parsePropertyFunction(param,first){var previousStrict,body;previousStrict=strict;body=parseFunctionSourceElements();if(first&&strict&&isRestrictedWord(param[0].name)){throwError(first,Messages.StrictParamName)}strict=previousStrict;return{type:Syntax.FunctionExpression,id:null,params:param,body:body}}function parseObjectPropertyKey(){var token=lex();if(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){if(strict&&token.octal){throwError(token,Messages.StrictOctalLiteral)}return createLiteral(token)}return{type:Syntax.Identifier,name:token.value}}function parseObjectProperty(){var token,key,id,param;token=lookahead();if(token.type===Token.Identifier){id=parseObjectPropertyKey();if(token.value==="get"&&!match(":")){key=parseObjectPropertyKey();expect("(");expect(")");return{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"get"}}else if(token.value==="set"&&!match(":")){key=parseObjectPropertyKey();expect("(");token=lookahead();if(token.type!==Token.Identifier){throwUnexpected(lex())}param=[parseVariableIdentifier()];expect(")");return{type:Syntax.Property,key:key,value:parsePropertyFunction(param,token),kind:"set"}}else{expect(":");return{type:Syntax.Property,key:id,value:parseAssignmentExpression(),kind:"init"}}}else if(token.type===Token.EOF||token.type===Token.Punctuator){throwUnexpected(token)}else{key=parseObjectPropertyKey();expect(":");return{type:Syntax.Property,key:key,value:parseAssignmentExpression(),kind:"init"}}}function parseObjectInitialiser(){var token,properties=[],property,name,kind,map={},toString=String;expect("{");while(!match("}")){property=parseObjectProperty();if(property.key.type===Syntax.Identifier){name=property.key.name}else{name=toString(property.key.value)}kind=property.kind==="init"?PropertyKind.Data:property.kind==="get"?PropertyKind.Get:PropertyKind.Set;if(Object.prototype.hasOwnProperty.call(map,name)){if(map[name]===PropertyKind.Data){if(strict&&kind===PropertyKind.Data){throwErrorTolerant({},Messages.StrictDuplicateProperty)}else if(kind!==PropertyKind.Data){throwError({},Messages.AccessorDataProperty)}}else{if(kind===PropertyKind.Data){throwError({},Messages.AccessorDataProperty)}else if(map[name]&kind){throwError({},Messages.AccessorGetSet)}}map[name]|=kind}else{map[name]=kind}properties.push(property);if(!match("}")){expect(",")}}expect("}");return{type:Syntax.ObjectExpression,properties:properties}}function parsePrimaryExpression(){var expr,token=lookahead(),type=token.type;if(type===Token.Identifier){return{type:Syntax.Identifier,name:lex().value}}if(type===Token.StringLiteral||type===Token.NumericLiteral){if(strict&&token.octal){throwErrorTolerant(token,Messages.StrictOctalLiteral)}return createLiteral(lex())}if(type===Token.Keyword){if(matchKeyword("this")){lex();return{type:Syntax.ThisExpression}}if(matchKeyword("function")){return parseFunctionExpression()
}}if(type===Token.BooleanLiteral){lex();token.value=token.value==="true";return createLiteral(token)}if(type===Token.NullLiteral){lex();token.value=null;return createLiteral(token)}if(match("[")){return parseArrayInitialiser()}if(match("{")){return parseObjectInitialiser()}if(match("(")){lex();state.lastParenthesized=expr=parseExpression();expect(")");return expr}if(match("/")||match("/=")){return createLiteral(scanRegExp())}return throwUnexpected(lex())}function parseArguments(){var args=[];expect("(");if(!match(")")){while(index<length){args.push(parseAssignmentExpression());if(match(")")){break}expect(",")}}expect(")");return args}function parseNonComputedProperty(){var token=lex();if(!isIdentifierName(token)){throwUnexpected(token)}return{type:Syntax.Identifier,name:token.value}}function parseNonComputedMember(object){return{type:Syntax.MemberExpression,computed:false,object:object,property:parseNonComputedProperty()}}function parseComputedMember(object){var property,expr;expect("[");property=parseExpression();expr={type:Syntax.MemberExpression,computed:true,object:object,property:property};expect("]");return expr}function parseCallMember(object){return{type:Syntax.CallExpression,callee:object,arguments:parseArguments()}}function parseNewExpression(){var expr;expectKeyword("new");expr={type:Syntax.NewExpression,callee:parseLeftHandSideExpression(),arguments:[]};if(match("(")){expr["arguments"]=parseArguments()}return expr}function parseLeftHandSideExpressionAllowCall(){var useNew,expr;useNew=matchKeyword("new");expr=useNew?parseNewExpression():parsePrimaryExpression();while(index<length){if(match(".")){lex();expr=parseNonComputedMember(expr)}else if(match("[")){expr=parseComputedMember(expr)}else if(match("(")){expr=parseCallMember(expr)}else{break}}return expr}function parseLeftHandSideExpression(){var useNew,expr;useNew=matchKeyword("new");expr=useNew?parseNewExpression():parsePrimaryExpression();while(index<length){if(match(".")){lex();expr=parseNonComputedMember(expr)}else if(match("[")){expr=parseComputedMember(expr)}else{break}}return expr}function parsePostfixExpression(){var expr=parseLeftHandSideExpressionAllowCall();if((match("++")||match("--"))&&!peekLineTerminator()){if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){throwError({},Messages.StrictLHSPostfix)}if(!isLeftHandSide(expr)){throwError({},Messages.InvalidLHSInAssignment)}expr={type:Syntax.UpdateExpression,operator:lex().value,argument:expr,prefix:false}}return expr}function parseUnaryExpression(){var token,expr;if(match("++")||match("--")){token=lex();expr=parseUnaryExpression();if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){throwError({},Messages.StrictLHSPrefix)}if(!isLeftHandSide(expr)){throwError({},Messages.InvalidLHSInAssignment)}expr={type:Syntax.UpdateExpression,operator:token.value,argument:expr,prefix:true};return expr}if(match("+")||match("-")||match("~")||match("!")){expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression()};return expr}if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression()};if(strict&&expr.operator==="delete"&&expr.argument.type===Syntax.Identifier){throwErrorTolerant({},Messages.StrictDelete)}return expr}return parsePostfixExpression()}function parseMultiplicativeExpression(){var expr=parseUnaryExpression();while(match("*")||match("/")||match("%")){expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseUnaryExpression()}}return expr}function parseAdditiveExpression(){var expr=parseMultiplicativeExpression();while(match("+")||match("-")){expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseMultiplicativeExpression()}}return expr}function parseShiftExpression(){var expr=parseAdditiveExpression();while(match("<<")||match(">>")||match(">>>")){expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseAdditiveExpression()}}return expr}function parseRelationalExpression(){var expr,previousAllowIn;previousAllowIn=state.allowIn;state.allowIn=true;expr=parseShiftExpression();while(match("<")||match(">")||match("<=")||match(">=")||previousAllowIn&&matchKeyword("in")||matchKeyword("instanceof")){expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseShiftExpression()}}state.allowIn=previousAllowIn;return expr}function parseEqualityExpression(){var expr=parseRelationalExpression();while(match("==")||match("!=")||match("===")||match("!==")){expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseRelationalExpression()}}return expr}function parseBitwiseANDExpression(){var expr=parseEqualityExpression();while(match("&")){lex();expr={type:Syntax.BinaryExpression,operator:"&",left:expr,right:parseEqualityExpression()}}return expr}function parseBitwiseXORExpression(){var expr=parseBitwiseANDExpression();while(match("^")){lex();expr={type:Syntax.BinaryExpression,operator:"^",left:expr,right:parseBitwiseANDExpression()}}return expr}function parseBitwiseORExpression(){var expr=parseBitwiseXORExpression();while(match("|")){lex();expr={type:Syntax.BinaryExpression,operator:"|",left:expr,right:parseBitwiseXORExpression()}}return expr}function parseLogicalANDExpression(){var expr=parseBitwiseORExpression();while(match("&&")){lex();expr={type:Syntax.LogicalExpression,operator:"&&",left:expr,right:parseBitwiseORExpression()}}return expr}function parseLogicalORExpression(){var expr=parseLogicalANDExpression();while(match("||")){lex();expr={type:Syntax.LogicalExpression,operator:"||",left:expr,right:parseLogicalANDExpression()}}return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent;expr=parseLogicalORExpression();if(match("?")){lex();previousAllowIn=state.allowIn;state.allowIn=true;consequent=parseAssignmentExpression();state.allowIn=previousAllowIn;expect(":");expr={type:Syntax.ConditionalExpression,test:expr,consequent:consequent,alternate:parseAssignmentExpression()}}return expr}function parseAssignmentExpression(){var expr;expr=parseConditionalExpression();if(matchAssign()){if(!isLeftHandSide(expr)){throwError({},Messages.InvalidLHSInAssignment)}if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){throwError({},Messages.StrictLHSAssignment)}expr={type:Syntax.AssignmentExpression,operator:lex().value,left:expr,right:parseAssignmentExpression()}}return expr}function parseExpression(){var expr=parseAssignmentExpression();if(match(",")){expr={type:Syntax.SequenceExpression,expressions:[expr]};while(index<length){if(!match(",")){break}lex();expr.expressions.push(parseAssignmentExpression())}}return expr}function parseStatementList(){var list=[],statement;while(index<length){if(match("}")){break}statement=parseSourceElement();if(typeof statement==="undefined"){break}list.push(statement)}return list}function parseBlock(){var block;expect("{");block=parseStatementList();expect("}");return{type:Syntax.BlockStatement,body:block}}function parseVariableIdentifier(){var token=lex();if(token.type!==Token.Identifier){throwUnexpected(token)}return{type:Syntax.Identifier,name:token.value}}function parseVariableDeclaration(kind){var id=parseVariableIdentifier(),init=null;if(strict&&isRestrictedWord(id.name)){throwErrorTolerant({},Messages.StrictVarName)}if(kind==="const"){expect("=");init=parseAssignmentExpression()}else if(match("=")){lex();init=parseAssignmentExpression()}return{type:Syntax.VariableDeclarator,id:id,init:init}}function parseVariableDeclarationList(kind){var list=[];while(index<length){list.push(parseVariableDeclaration(kind));if(!match(",")){break}lex()}return list}function parseVariableStatement(){var declarations;expectKeyword("var");declarations=parseVariableDeclarationList();consumeSemicolon();return{type:Syntax.VariableDeclaration,declarations:declarations,kind:"var"}}function parseConstLetDeclaration(kind){var declarations;expectKeyword(kind);declarations=parseVariableDeclarationList(kind);consumeSemicolon();return{type:Syntax.VariableDeclaration,declarations:declarations,kind:kind}}function parseEmptyStatement(){expect(";");return{type:Syntax.EmptyStatement}}function parseExpressionStatement(){var expr=parseExpression();consumeSemicolon();return{type:Syntax.ExpressionStatement,expression:expr}}function parseIfStatement(){var test,consequent,alternate;expectKeyword("if");expect("(");test=parseExpression();expect(")");consequent=parseStatement();if(matchKeyword("else")){lex();alternate=parseStatement()}else{alternate=null}return{type:Syntax.IfStatement,test:test,consequent:consequent,alternate:alternate}}function parseDoWhileStatement(){var body,test,oldInIteration;expectKeyword("do");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");if(match(";")){lex()}return{type:Syntax.DoWhileStatement,body:body,test:test}}function parseWhileStatement(){var test,body,oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;return{type:Syntax.WhileStatement,test:test,body:body}}function parseForVariableDeclaration(){var token=lex();return{type:Syntax.VariableDeclaration,declarations:parseVariableDeclarationList(),kind:token.value}}function parseForStatement(){var init,test,update,left,right,body,oldInIteration;init=test=update=null;expectKeyword("for");expect("(");if(match(";")){lex()}else{if(matchKeyword("var")||matchKeyword("let")){state.allowIn=false;init=parseForVariableDeclaration();state.allowIn=true;if(init.declarations.length===1&&matchKeyword("in")){lex();left=init;right=parseExpression();init=null}}else{state.allowIn=false;init=parseExpression();state.allowIn=true;if(matchKeyword("in")){if(!isLeftHandSide(init)){throwError({},Messages.InvalidLHSInForIn)}lex();left=init;right=parseExpression();init=null}}if(typeof left==="undefined"){expect(";")}}if(typeof left==="undefined"){if(!match(";")){test=parseExpression()}expect(";");if(!match(")")){update=parseExpression()}}expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;if(typeof left==="undefined"){return{type:Syntax.ForStatement,init:init,test:test,update:update,body:body}}return{type:Syntax.ForInStatement,left:left,right:right,body:body,each:false}}function parseContinueStatement(){var token,label=null;expectKeyword("continue");if(source[index]===";"){lex();if(!state.inIteration){throwError({},Messages.IllegalContinue)}return{type:Syntax.ContinueStatement,label:null}}if(peekLineTerminator()){if(!state.inIteration){throwError({},Messages.IllegalContinue)}return{type:Syntax.ContinueStatement,label:null}}token=lookahead();if(token.type===Token.Identifier){label=parseVariableIdentifier();if(!Object.prototype.hasOwnProperty.call(state.labelSet,label.name)){throwError({},Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!state.inIteration){throwError({},Messages.IllegalContinue)}return{type:Syntax.ContinueStatement,label:label}}function parseBreakStatement(){var token,label=null;expectKeyword("break");if(source[index]===";"){lex();if(!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return{type:Syntax.BreakStatement,label:null}}if(peekLineTerminator()){if(!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return{type:Syntax.BreakStatement,label:null}}token=lookahead();if(token.type===Token.Identifier){label=parseVariableIdentifier();if(!Object.prototype.hasOwnProperty.call(state.labelSet,label.name)){throwError({},Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return{type:Syntax.BreakStatement,label:label}}function parseReturnStatement(){var token,argument=null;expectKeyword("return");if(!state.inFunctionBody){throwErrorTolerant({},Messages.IllegalReturn)}if(source[index]===" "){if(isIdentifierStart(source[index+1])){argument=parseExpression();consumeSemicolon();return{type:Syntax.ReturnStatement,argument:argument}}}if(peekLineTerminator()){return{type:Syntax.ReturnStatement,argument:null}}if(!match(";")){token=lookahead();if(!match("}")&&token.type!==Token.EOF){argument=parseExpression()}}consumeSemicolon();return{type:Syntax.ReturnStatement,argument:argument}}function parseWithStatement(){var object,body;if(strict){throwErrorTolerant({},Messages.StrictModeWith)}expectKeyword("with");expect("(");object=parseExpression();expect(")");body=parseStatement();return{type:Syntax.WithStatement,object:object,body:body}}function parseSwitchCase(){var test,consequent=[],statement;if(matchKeyword("default")){lex();test=null}else{expectKeyword("case");test=parseExpression()}expect(":");while(index<length){if(match("}")||matchKeyword("default")||matchKeyword("case")){break}statement=parseStatement();if(typeof statement==="undefined"){break}consequent.push(statement)}return{type:Syntax.SwitchCase,test:test,consequent:consequent}}function parseSwitchStatement(){var discriminant,cases,oldInSwitch;expectKeyword("switch");expect("(");discriminant=parseExpression();expect(")");expect("{");if(match("}")){lex();return{type:Syntax.SwitchStatement,discriminant:discriminant}}cases=[];oldInSwitch=state.inSwitch;state.inSwitch=true;while(index<length){if(match("}")){break}cases.push(parseSwitchCase())}state.inSwitch=oldInSwitch;expect("}");return{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}}function parseThrowStatement(){var argument;expectKeyword("throw");if(peekLineTerminator()){throwError({},Messages.NewlineAfterThrow)}argument=parseExpression();consumeSemicolon();return{type:Syntax.ThrowStatement,argument:argument}}function parseCatchClause(){var param;expectKeyword("catch");expect("(");if(!match(")")){param=parseExpression();if(strict&&param.type===Syntax.Identifier&&isRestrictedWord(param.name)){throwErrorTolerant({},Messages.StrictCatchVariable)}}expect(")");return{type:Syntax.CatchClause,param:param,guard:null,body:parseBlock()}}function parseTryStatement(){var block,handlers=[],finalizer=null;expectKeyword("try");block=parseBlock();if(matchKeyword("catch")){handlers.push(parseCatchClause())}if(matchKeyword("finally")){lex();finalizer=parseBlock()}if(handlers.length===0&&!finalizer){throwError({},Messages.NoCatchOrFinally)}return{type:Syntax.TryStatement,block:block,handlers:handlers,finalizer:finalizer}}function parseDebuggerStatement(){expectKeyword("debugger");consumeSemicolon();return{type:Syntax.DebuggerStatement}}function parseStatement(){var token=lookahead(),expr,labeledBody;if(token.type===Token.EOF){throwUnexpected(token)}if(token.type===Token.Punctuator){switch(token.value){case";":return parseEmptyStatement();case"{":return parseBlock();case"(":return parseExpressionStatement();default:break}}if(token.type===Token.Keyword){switch(token.value){case"break":return parseBreakStatement();case"continue":return parseContinueStatement();case"debugger":return parseDebuggerStatement();case"do":return parseDoWhileStatement();case"for":return parseForStatement();case"function":return parseFunctionDeclaration();case"if":return parseIfStatement();case"return":return parseReturnStatement();case"switch":return parseSwitchStatement();case"throw":return parseThrowStatement();case"try":return parseTryStatement();case"var":return parseVariableStatement();case"while":return parseWhileStatement();case"with":return parseWithStatement();default:break}}expr=parseExpression();if(expr.type===Syntax.Identifier&&match(":")){lex();if(Object.prototype.hasOwnProperty.call(state.labelSet,expr.name)){throwError({},Messages.Redeclaration,"Label",expr.name)}state.labelSet[expr.name]=true;labeledBody=parseStatement();delete state.labelSet[expr.name];return{type:Syntax.LabeledStatement,label:expr,body:labeledBody}}consumeSemicolon();return{type:Syntax.ExpressionStatement,expression:expr}}function parseFunctionSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody;expect("{");while(index<length){token=lookahead();if(token.type!==Token.StringLiteral){break}sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=sliceSource(token.range[0]+1,token.range[1]-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwError(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}oldLabelSet=state.labelSet;oldInIteration=state.inIteration;oldInSwitch=state.inSwitch;oldInFunctionBody=state.inFunctionBody;state.labelSet={};state.inIteration=false;state.inSwitch=false;state.inFunctionBody=true;while(index<length){if(match("}")){break}sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}expect("}");state.labelSet=oldLabelSet;state.inIteration=oldInIteration;state.inSwitch=oldInSwitch;state.inFunctionBody=oldInFunctionBody;return{type:Syntax.BlockStatement,body:sourceElements}}function parseFunctionDeclaration(){var id,param,params=[],body,token,firstRestricted,message,previousStrict,paramSet;expectKeyword("function");token=lookahead();id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwError(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}expect("(");if(!match(")")){paramSet={};while(index<length){token=lookahead();param=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwError(token,Messages.StrictParamName)}if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){throwError(token,Messages.StrictParamDupe)}}else if(!firstRestricted){if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictParamName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){firstRestricted=token;message=Messages.StrictParamDupe}}params.push(param);paramSet[param.name]=true;if(match(")")){break}expect(",")}}expect(")");previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwError(firstRestricted,message)}strict=previousStrict;return{type:Syntax.FunctionDeclaration,id:id,params:params,body:body}}function parseFunctionExpression(){var token,id=null,firstRestricted,message,param,params=[],body,previousStrict,paramSet;expectKeyword("function");if(!match("(")){token=lookahead();id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwError(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}}expect("(");if(!match(")")){paramSet={};while(index<length){token=lookahead();param=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwError(token,Messages.StrictParamName)}if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){throwError(token,Messages.StrictParamDupe)}}else if(!firstRestricted){if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictParamName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(paramSet,token.value)){firstRestricted=token;message=Messages.StrictParamDupe}}params.push(param);paramSet[param.name]=true;if(match(")")){break}expect(",")}}expect(")");previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwError(firstRestricted,message)}strict=previousStrict;return{type:Syntax.FunctionExpression,id:id,params:params,body:body}}function parseSourceElement(){var token=lookahead();if(token.type===Token.Keyword){switch(token.value){case"const":case"let":return parseConstLetDeclaration(token.value);case"function":return parseFunctionDeclaration();default:return parseStatement()}}if(token.type!==Token.EOF){return parseStatement()}}function parseSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted;while(index<length){token=lookahead();if(token.type!==Token.StringLiteral){break}sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=sliceSource(token.range[0]+1,token.range[1]-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwError(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}while(index<length){sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}return sourceElements}function parseProgram(){var program;strict=false;program={type:Syntax.Program,body:parseSourceElements()};return program}function addComment(start,end,type,value){assert(typeof start==="number","Comment must have valid position");if(extra.comments.length>0){if(extra.comments[extra.comments.length-1].range[1]>start){return}}extra.comments.push({range:[start,end],type:type,value:value})}function scanComment(){var comment,ch,start,blockComment,lineComment;comment="";blockComment=false;lineComment=false;while(index<length){ch=source[index];if(lineComment){ch=nextChar();if(index>=length){lineComment=false;comment+=ch;addComment(start,index,"Line",comment)}else if(isLineTerminator(ch)){lineComment=false;addComment(start,index,"Line",comment);if(ch==="\r"&&source[index]==="\n"){++index}++lineNumber;lineStart=index;comment=""}else{comment+=ch}}else if(blockComment){if(isLineTerminator(ch)){if(ch==="\r"&&source[index+1]==="\n"){++index;comment+="\r\n"}else{comment+=ch}++lineNumber;++index;lineStart=index;if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}else{ch=nextChar();if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}comment+=ch;if(ch==="*"){ch=source[index];if(ch==="/"){comment=comment.substr(0,comment.length-1);blockComment=false;++index;addComment(start,index,"Block",comment);comment=""}}}}else if(ch==="/"){ch=source[index+1];if(ch==="/"){start=index;index+=2;lineComment=true}else if(ch==="*"){start=index;index+=2;blockComment=true;if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}else{break}}else if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){++index;if(ch==="\r"&&source[index]==="\n"){++index}++lineNumber;lineStart=index}else{break}}}function collectToken(){var token=extra.advance(),range,value;if(token.type!==Token.EOF){range=[token.range[0],token.range[1]];value=sliceSource(token.range[0],token.range[1]);extra.tokens.push({type:TokenName[token.type],value:value,range:range})}return token}function collectRegex(){var pos,regex,token;skipComment();pos=index;regex=extra.scanRegExp();if(extra.tokens.length>0){token=extra.tokens[extra.tokens.length-1];if(token.range[0]===pos&&token.type==="Punctuator"){if(token.value==="/"||token.value==="/="){extra.tokens.pop()}}}extra.tokens.push({type:"RegularExpression",value:regex.literal,range:[pos,index]});return regex}function createLiteral(token){return{type:Syntax.Literal,value:token.value}}function createRawLiteral(token){return{type:Syntax.Literal,value:token.value,raw:sliceSource(token.range[0],token.range[1])}}function wrapTrackingFunction(range,loc){return function(parseFunction){function isBinary(node){return node.type===Syntax.LogicalExpression||node.type===Syntax.BinaryExpression}function visit(node){if(isBinary(node.left)){visit(node.left)}if(isBinary(node.right)){visit(node.right)}if(range&&typeof node.range==="undefined"){node.range=[node.left.range[0],node.right.range[1]]}if(loc&&typeof node.loc==="undefined"){node.loc={start:node.left.loc.start,end:node.right.loc.end}}}return function(){var node,rangeInfo,locInfo;skipComment();rangeInfo=[index,0];locInfo={start:{line:lineNumber,column:index-lineStart}};node=parseFunction.apply(null,arguments);if(typeof node!=="undefined"){if(range){rangeInfo[1]=index;node.range=rangeInfo}if(loc){locInfo.end={line:lineNumber,column:index-lineStart};node.loc=locInfo}if(isBinary(node)){visit(node)}if(node.type===Syntax.MemberExpression){if(typeof node.object.range!=="undefined"){node.range[0]=node.object.range[0]}if(typeof node.object.loc!=="undefined"){node.loc.start=node.object.loc.start}}if(node.type===Syntax.CallExpression){if(typeof node.callee.range!=="undefined"){node.range[0]=node.callee.range[0]}if(typeof node.callee.loc!=="undefined"){node.loc.start=node.callee.loc.start}}return node}}}}function patch(){var wrapTracking;if(extra.comments){extra.skipComment=skipComment;skipComment=scanComment}if(extra.raw){extra.createLiteral=createLiteral;createLiteral=createRawLiteral}if(extra.range||extra.loc){wrapTracking=wrapTrackingFunction(extra.range,extra.loc);extra.parseAdditiveExpression=parseAdditiveExpression;extra.parseAssignmentExpression=parseAssignmentExpression;extra.parseBitwiseANDExpression=parseBitwiseANDExpression;extra.parseBitwiseORExpression=parseBitwiseORExpression;extra.parseBitwiseXORExpression=parseBitwiseXORExpression;extra.parseBlock=parseBlock;extra.parseFunctionSourceElements=parseFunctionSourceElements;extra.parseCallMember=parseCallMember;extra.parseCatchClause=parseCatchClause;extra.parseComputedMember=parseComputedMember;extra.parseConditionalExpression=parseConditionalExpression;extra.parseConstLetDeclaration=parseConstLetDeclaration;extra.parseEqualityExpression=parseEqualityExpression;extra.parseExpression=parseExpression;extra.parseForVariableDeclaration=parseForVariableDeclaration;extra.parseFunctionDeclaration=parseFunctionDeclaration;extra.parseFunctionExpression=parseFunctionExpression;extra.parseLogicalANDExpression=parseLogicalANDExpression;extra.parseLogicalORExpression=parseLogicalORExpression;extra.parseMultiplicativeExpression=parseMultiplicativeExpression;extra.parseNewExpression=parseNewExpression;extra.parseNonComputedMember=parseNonComputedMember;extra.parseNonComputedProperty=parseNonComputedProperty;extra.parseObjectProperty=parseObjectProperty;extra.parseObjectPropertyKey=parseObjectPropertyKey;extra.parsePostfixExpression=parsePostfixExpression;extra.parsePrimaryExpression=parsePrimaryExpression;extra.parseProgram=parseProgram;extra.parsePropertyFunction=parsePropertyFunction;extra.parseRelationalExpression=parseRelationalExpression;extra.parseStatement=parseStatement;extra.parseShiftExpression=parseShiftExpression;extra.parseSwitchCase=parseSwitchCase;extra.parseUnaryExpression=parseUnaryExpression;extra.parseVariableDeclaration=parseVariableDeclaration;extra.parseVariableIdentifier=parseVariableIdentifier;parseAdditiveExpression=wrapTracking(extra.parseAdditiveExpression);parseAssignmentExpression=wrapTracking(extra.parseAssignmentExpression);parseBitwiseANDExpression=wrapTracking(extra.parseBitwiseANDExpression);parseBitwiseORExpression=wrapTracking(extra.parseBitwiseORExpression);parseBitwiseXORExpression=wrapTracking(extra.parseBitwiseXORExpression);parseBlock=wrapTracking(extra.parseBlock);parseFunctionSourceElements=wrapTracking(extra.parseFunctionSourceElements);parseCallMember=wrapTracking(extra.parseCallMember);parseCatchClause=wrapTracking(extra.parseCatchClause);parseComputedMember=wrapTracking(extra.parseComputedMember);parseConditionalExpression=wrapTracking(extra.parseConditionalExpression);parseConstLetDeclaration=wrapTracking(extra.parseConstLetDeclaration);parseEqualityExpression=wrapTracking(extra.parseEqualityExpression);parseExpression=wrapTracking(extra.parseExpression);parseForVariableDeclaration=wrapTracking(extra.parseForVariableDeclaration);parseFunctionDeclaration=wrapTracking(extra.parseFunctionDeclaration);parseFunctionExpression=wrapTracking(extra.parseFunctionExpression);parseLogicalANDExpression=wrapTracking(extra.parseLogicalANDExpression);parseLogicalORExpression=wrapTracking(extra.parseLogicalORExpression);parseMultiplicativeExpression=wrapTracking(extra.parseMultiplicativeExpression);parseNewExpression=wrapTracking(extra.parseNewExpression);parseNonComputedMember=wrapTracking(extra.parseNonComputedMember);parseNonComputedProperty=wrapTracking(extra.parseNonComputedProperty);parseObjectProperty=wrapTracking(extra.parseObjectProperty);parseObjectPropertyKey=wrapTracking(extra.parseObjectPropertyKey);parsePostfixExpression=wrapTracking(extra.parsePostfixExpression);parsePrimaryExpression=wrapTracking(extra.parsePrimaryExpression);parseProgram=wrapTracking(extra.parseProgram);parsePropertyFunction=wrapTracking(extra.parsePropertyFunction);parseRelationalExpression=wrapTracking(extra.parseRelationalExpression);parseStatement=wrapTracking(extra.parseStatement);parseShiftExpression=wrapTracking(extra.parseShiftExpression);parseSwitchCase=wrapTracking(extra.parseSwitchCase);parseUnaryExpression=wrapTracking(extra.parseUnaryExpression);parseVariableDeclaration=wrapTracking(extra.parseVariableDeclaration);parseVariableIdentifier=wrapTracking(extra.parseVariableIdentifier)}if(typeof extra.tokens!=="undefined"){extra.advance=advance;extra.scanRegExp=scanRegExp;advance=collectToken;scanRegExp=collectRegex}}function unpatch(){if(typeof extra.skipComment==="function"){skipComment=extra.skipComment}if(extra.raw){createLiteral=extra.createLiteral}if(extra.range||extra.loc){parseAdditiveExpression=extra.parseAdditiveExpression;parseAssignmentExpression=extra.parseAssignmentExpression;parseBitwiseANDExpression=extra.parseBitwiseANDExpression;parseBitwiseORExpression=extra.parseBitwiseORExpression;parseBitwiseXORExpression=extra.parseBitwiseXORExpression;parseBlock=extra.parseBlock;parseFunctionSourceElements=extra.parseFunctionSourceElements;parseCallMember=extra.parseCallMember;parseCatchClause=extra.parseCatchClause;parseComputedMember=extra.parseComputedMember;parseConditionalExpression=extra.parseConditionalExpression;parseConstLetDeclaration=extra.parseConstLetDeclaration;parseEqualityExpression=extra.parseEqualityExpression;parseExpression=extra.parseExpression;parseForVariableDeclaration=extra.parseForVariableDeclaration;parseFunctionDeclaration=extra.parseFunctionDeclaration;parseFunctionExpression=extra.parseFunctionExpression;parseLogicalANDExpression=extra.parseLogicalANDExpression;parseLogicalORExpression=extra.parseLogicalORExpression;parseMultiplicativeExpression=extra.parseMultiplicativeExpression;parseNewExpression=extra.parseNewExpression;parseNonComputedMember=extra.parseNonComputedMember;parseNonComputedProperty=extra.parseNonComputedProperty;parseObjectProperty=extra.parseObjectProperty;parseObjectPropertyKey=extra.parseObjectPropertyKey;parsePrimaryExpression=extra.parsePrimaryExpression;parsePostfixExpression=extra.parsePostfixExpression;parseProgram=extra.parseProgram;parsePropertyFunction=extra.parsePropertyFunction;parseRelationalExpression=extra.parseRelationalExpression;parseStatement=extra.parseStatement;parseShiftExpression=extra.parseShiftExpression;parseSwitchCase=extra.parseSwitchCase;parseUnaryExpression=extra.parseUnaryExpression;parseVariableDeclaration=extra.parseVariableDeclaration;parseVariableIdentifier=extra.parseVariableIdentifier}if(typeof extra.scanRegExp==="function"){advance=extra.advance;scanRegExp=extra.scanRegExp}}function stringToArray(str){var length=str.length,result=[],i;for(i=0;i<length;++i){result[i]=str.charAt(i)}return result}function parse(code,options){var program,toString;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;
lineStart=0;length=source.length;buffer=null;state={allowIn:true,labelSet:{},lastParenthesized:null,inFunctionBody:false,inIteration:false,inSwitch:false};extra={};if(typeof options!=="undefined"){extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;extra.raw=typeof options.raw==="boolean"&&options.raw;if(typeof options.tokens==="boolean"&&options.tokens){extra.tokens=[]}if(typeof options.comment==="boolean"&&options.comment){extra.comments=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}}if(length>0){if(typeof source[0]==="undefined"){if(code instanceof String){source=code.valueOf()}if(typeof source[0]==="undefined"){source=stringToArray(code)}}}patch();try{program=parseProgram();if(typeof extra.comments!=="undefined"){program.comments=extra.comments}if(typeof extra.tokens!=="undefined"){program.tokens=extra.tokens}if(typeof extra.errors!=="undefined"){program.errors=extra.errors}}catch(e){throw e}finally{unpatch();extra={}}return program}exports.version="1.0.0-dev";exports.parse=parse;exports.Syntax=function(){var name,types={};if(typeof Object.create==="function"){types=Object.create(null)}for(name in Syntax){if(Syntax.hasOwnProperty(name)){types[name]=Syntax[name]}}if(typeof Object.freeze==="function"){Object.freeze(types)}return types}()})(typeof exports==="undefined"?esprima={}:exports)});define("uglifyjs/consolidator",["require","exports","module","./parse-js","./process"],function(require,exports,module){exports["ast_consolidate"]=function(oAbstractSyntaxTree){"use strict";var _,TSourceElementsData=function(){this.nCategory=ESourceElementCategories.N_OTHER;this.aCount=[];this.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES]={};this.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS]={};this.aCount[EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS]={};this.aIdentifiers=[];this.aPrimitiveValues=[]},TPrimitiveValue=function(){this.nSaving=0;this.sName=""},TSolution=function(){this.oPrimitiveValues={};this.nSavings=0},oProcessor=require("./process"),oWeights={N_PROPERTY_ACCESSOR:1,N_VARIABLE_DECLARATION:2,N_VARIABLE_STATEMENT_AFFIXATION:4,N_CLOSURE:17},EPrimaryExpressionCategories={N_IDENTIFIER_NAMES:0,N_STRING_LITERALS:1,N_NULL_AND_BOOLEAN_LITERALS:2},EValuePrefixes={S_STRING:"#S",S_SYMBOLIC:"#O"},ESourceElementCategories={N_WITH:0,N_EVAL:1,N_EXCLUDABLE:2,N_OTHER:3},A_OTHER_SUBSTITUTABLE_LITERALS=["null","false","true"];(function fExamineSyntacticCodeUnit(oSyntacticCodeUnit){var _,bIsGlobal="toplevel"===oSyntacticCodeUnit[0],bIsWhollyExaminable=!bIsGlobal,oSourceElements,oSourceElementData,oScope,oWalker,oWalkers={oSurveySourceElement:{defun:function(sIdentifier,aFormalParameterList,oFunctionBody){fClassifyAsExcludable();fAddIdentifier(sIdentifier);aFormalParameterList.forEach(fAddIdentifier)},dot:function(oExpression,sIdentifierName){fCountPrimaryExpression(EPrimaryExpressionCategories.N_IDENTIFIER_NAMES,EValuePrefixes.S_STRING+sIdentifierName);return["dot",oWalker.walk(oExpression),sIdentifierName]},"function":function(sIdentifier,aFormalParameterList,oFunctionBody){if("string"===typeof sIdentifier){fAddIdentifier(sIdentifier)}aFormalParameterList.forEach(fAddIdentifier)},name:function(sIdentifier){if(-1!==A_OTHER_SUBSTITUTABLE_LITERALS.indexOf(sIdentifier)){fCountPrimaryExpression(EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS,EValuePrefixes.S_SYMBOLIC+sIdentifier)}else{if("eval"===sIdentifier){oSourceElementData.nCategory=ESourceElementCategories.N_EVAL}fAddIdentifier(sIdentifier)}},"return":function(oExpression){fClassifyAsExcludable()},string:function(sStringValue){if(sStringValue.length>0){fCountPrimaryExpression(EPrimaryExpressionCategories.N_STRING_LITERALS,EValuePrefixes.S_STRING+sStringValue)}},"try":function(oTry,aCatch,oFinally){if(Array.isArray(aCatch)){fAddIdentifier(aCatch[0])}},"var":function(aVariableDeclarationList){fClassifyAsExcludable();aVariableDeclarationList.forEach(fAddVariable)},"with":function(oExpression,oStatement){oSourceElementData.nCategory=ESourceElementCategories.N_WITH;return[]}},oExamineFunctions:{defun:function(){fExamineSyntacticCodeUnit(this);return[]},"function":function(){fExamineSyntacticCodeUnit(this);return[]}}},aSourceElementsData=[],nAfterDirectivePrologue=0,nPosition,nTo,cContext=function(oWalker,oSourceElement){var fLambda=function(){return oWalker.walk(oSourceElement)};return fLambda},fClassifyAsExcludable=function(){if(oSourceElementData.nCategory===ESourceElementCategories.N_OTHER){oSourceElementData.nCategory=ESourceElementCategories.N_EXCLUDABLE}},fAddIdentifier=function(sIdentifier){if(-1===oSourceElementData.aIdentifiers.indexOf(sIdentifier)){oSourceElementData.aIdentifiers.push(sIdentifier)}},fAddVariable=function(aVariableDeclaration){fAddIdentifier(aVariableDeclaration[0])},fCountPrimaryExpression=function(nCategory,sName){if(!oSourceElementData.aCount[nCategory].hasOwnProperty(sName)){oSourceElementData.aCount[nCategory][sName]=0;if(-1===oSourceElementData.aPrimitiveValues.indexOf(sName)){oSourceElementData.aPrimitiveValues.push(sName)}}oSourceElementData.aCount[nCategory][sName]+=1},fExamineSourceElements=function(nFrom,nTo,bEnclose){var _,nIndex=oScope.cname,nPosition,oWalkersTransformers={dot:function(oExpression,sIdentifierName){var sPrefixed=EValuePrefixes.S_STRING+sIdentifierName;return oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?["sub",oWalker.walk(oExpression),["name",oSolutionBest.oPrimitiveValues[sPrefixed].sName]]:["dot",oWalker.walk(oExpression),sIdentifierName]},name:function(sIdentifier){var sPrefixed=EValuePrefixes.S_SYMBOLIC+sIdentifier;return["name",oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?oSolutionBest.oPrimitiveValues[sPrefixed].sName:sIdentifier]},string:function(sStringValue){var sPrefixed=EValuePrefixes.S_STRING+sStringValue;return oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?["name",oSolutionBest.oPrimitiveValues[sPrefixed].sName]:["string",sStringValue]}},oSolutionBest=new TSolution,oSolutionCandidate=new TSolution,oSourceElementsData=new TSourceElementsData,aVariableDeclarations=[],cAugmentList=function(aList){var fLambda=function(sPrefixed){if(-1===aList.indexOf(sPrefixed)){aList.push(sPrefixed)}};return fLambda},cAddOccurrences=function(nPosition,nCategory){var fLambda=function(sPrefixed){if(!oSourceElementsData.aCount[nCategory].hasOwnProperty(sPrefixed)){oSourceElementsData.aCount[nCategory][sPrefixed]=0}oSourceElementsData.aCount[nCategory][sPrefixed]+=aSourceElementsData[nPosition].aCount[nCategory][sPrefixed]};return fLambda},cAddOccurrencesInCategory=function(nPosition){var fLambda=function(nCategory){Object.keys(aSourceElementsData[nPosition].aCount[nCategory]).forEach(cAddOccurrences(nPosition,nCategory))};return fLambda},fAddOccurrences=function(nPosition){Object.keys(aSourceElementsData[nPosition].aCount).forEach(cAddOccurrencesInCategory(nPosition))},cAugmentVariableDeclarations=function(sPrefixed){if(oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0){aVariableDeclarations.push([oSolutionBest.oPrimitiveValues[sPrefixed].sName,[0===sPrefixed.indexOf(EValuePrefixes.S_SYMBOLIC)?"name":"string",sPrefixed.substring(EValuePrefixes.S_SYMBOLIC.length)]])}},cSortPrimitiveValues=function(sPrefixed0,sPrefixed1){var nDifference=oSolutionCandidate.oPrimitiveValues[sPrefixed0].nSaving-oSolutionCandidate.oPrimitiveValues[sPrefixed1].nSaving;return nDifference>0?-1:nDifference<0?1:0},fEvaluatePrimitiveValue=function(sPrefixed){var _,nIndex,sName=sPrefixed.substring(EValuePrefixes.S_SYMBOLIC.length),nLengthOriginal=sName.length,nLengthSubstitution,nLengthString=oProcessor.make_string(sName).length;oSolutionCandidate.oPrimitiveValues[sPrefixed]=new TPrimitiveValue;do{nIndex=oScope.cname;oSolutionCandidate.oPrimitiveValues[sPrefixed].sName=oScope.next_mangled()}while(-1!==oSourceElementsData.aIdentifiers.indexOf(oSolutionCandidate.oPrimitiveValues[sPrefixed].sName));nLengthSubstitution=oSolutionCandidate.oPrimitiveValues[sPrefixed].sName.length;if(0===sPrefixed.indexOf(EValuePrefixes.S_SYMBOLIC)){oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving-=nLengthSubstitution+nLengthOriginal+oWeights.N_VARIABLE_DECLARATION;oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS][sPrefixed]*(nLengthOriginal-nLengthSubstitution)}else{oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving-=nLengthSubstitution+nLengthString+oWeights.N_VARIABLE_DECLARATION;if(oSourceElementsData.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES].hasOwnProperty(sPrefixed)){oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES][sPrefixed]*(nLengthOriginal-nLengthSubstitution-oWeights.N_PROPERTY_ACCESSOR)}if(oSourceElementsData.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS].hasOwnProperty(sPrefixed)){oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS][sPrefixed]*(nLengthString-nLengthSubstitution)}}if(oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving>0){oSolutionCandidate.nSavings+=oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving}else{oScope.cname=nIndex}},cAddVariableDeclaration=function(aVariableDeclaration){oSourceElements[nFrom][1].unshift(aVariableDeclaration)};if(nFrom>nTo){return}if(nFrom===nTo&&"stat"===oSourceElements[nFrom][0]&&"call"===oSourceElements[nFrom][1][0]&&"function"===oSourceElements[nFrom][1][1][0]){fExamineSyntacticCodeUnit(oSourceElements[nFrom][1][1]);return}for(nPosition=nFrom;nPosition<=nTo;nPosition+=1){aSourceElementsData[nPosition].aPrimitiveValues.forEach(cAugmentList(oSourceElementsData.aPrimitiveValues))}if(0===oSourceElementsData.aPrimitiveValues.length){return}for(nPosition=nFrom;nPosition<=nTo;nPosition+=1){fAddOccurrences(nPosition);aSourceElementsData[nPosition].aIdentifiers.forEach(cAugmentList(oSourceElementsData.aIdentifiers))}do{oSolutionBest=oSolutionCandidate;if(Object.keys(oSolutionCandidate.oPrimitiveValues).length>0){oSourceElementsData.aPrimitiveValues.sort(cSortPrimitiveValues)}oSolutionCandidate=new TSolution;oSourceElementsData.aPrimitiveValues.forEach(fEvaluatePrimitiveValue);oScope.cname=nIndex}while(oSolutionCandidate.nSavings>oSolutionBest.nSavings);if("var"!==oSourceElements[nFrom][0]){oSolutionBest.nSavings-=oWeights.N_VARIABLE_STATEMENT_AFFIXATION}if(bEnclose){oSolutionBest.nSavings-=oWeights.N_CLOSURE}if(oSolutionBest.nSavings>0){Object.keys(oSolutionBest.oPrimitiveValues).forEach(cAugmentVariableDeclarations);for(nPosition=nFrom;nPosition<=nTo;nPosition+=1){oWalker=oProcessor.ast_walker();oSourceElements[nPosition]=oWalker.with_walkers(oWalkersTransformers,cContext(oWalker,oSourceElements[nPosition]))}if("var"===oSourceElements[nFrom][0]){aVariableDeclarations.reverse().forEach(cAddVariableDeclaration)}else{Array.prototype.splice.call(oSourceElements,nFrom,0,["var",aVariableDeclarations]);nTo+=1}if(bEnclose){Array.prototype.splice.call(oSourceElements,nFrom,0,["stat",["call",["function",null,[],[]],[]]]);for(nPosition=nTo+1;nPosition>nFrom;nPosition-=1){Array.prototype.unshift.call(oSourceElements[nFrom][1][1][3],oSourceElements[nPosition])}Array.prototype.splice.call(oSourceElements,nFrom+1,nTo-nFrom+1)}}if(bEnclose){oScope.cname=nIndex}};oSourceElements=oSyntacticCodeUnit[bIsGlobal?1:3];if(0===oSourceElements.length){return}oScope=bIsGlobal?oSyntacticCodeUnit.scope:oSourceElements.scope;while(nAfterDirectivePrologue<oSourceElements.length&&"directive"===oSourceElements[nAfterDirectivePrologue][0]){nAfterDirectivePrologue+=1;aSourceElementsData.push(null)}if(oSourceElements.length===nAfterDirectivePrologue){return}for(nPosition=nAfterDirectivePrologue;nPosition<oSourceElements.length;nPosition+=1){oSourceElementData=new TSourceElementsData;oWalker=oProcessor.ast_walker();oWalker.with_walkers(oWalkers.oSurveySourceElement,cContext(oWalker,oSourceElements[nPosition]));bIsWhollyExaminable=bIsWhollyExaminable&&ESourceElementCategories.N_WITH!==oSourceElementData.nCategory&&ESourceElementCategories.N_EVAL!==oSourceElementData.nCategory;aSourceElementsData.push(oSourceElementData)}if(bIsWhollyExaminable){fExamineSourceElements(nAfterDirectivePrologue,oSourceElements.length-1,false)}else{for(nPosition=oSourceElements.length-1;nPosition>=nAfterDirectivePrologue;nPosition-=1){oSourceElementData=aSourceElementsData[nPosition];if(ESourceElementCategories.N_OTHER===oSourceElementData.nCategory){if("undefined"===typeof nTo){nTo=nPosition}if(nPosition===nAfterDirectivePrologue){fExamineSourceElements(nPosition,nTo,true)}}else{if("undefined"!==typeof nTo){fExamineSourceElements(nPosition+1,nTo,true);nTo=void 0}oWalker=oProcessor.ast_walker();oWalker.with_walkers(oWalkers.oExamineFunctions,cContext(oWalker,oSourceElements[nPosition]))}}}})(oAbstractSyntaxTree=oProcessor.ast_add_scope(oAbstractSyntaxTree));return oAbstractSyntaxTree}});define("uglifyjs/parse-js",["exports"],function(exports){var KEYWORDS=array_to_hash(["break","case","catch","const","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with"]);var RESERVED_WORDS=array_to_hash(["abstract","boolean","byte","char","class","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]);var KEYWORDS_BEFORE_EXPRESSION=array_to_hash(["return","new","delete","throw","else","case"]);var KEYWORDS_ATOM=array_to_hash(["false","null","true","undefined"]);var OPERATOR_CHARS=array_to_hash(characters("+-*&%=<>!?|~^"));var RE_HEX_NUMBER=/^0x[0-9a-f]+$/i;var RE_OCT_NUMBER=/^0[0-7]+$/;var RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i;var OPERATORS=array_to_hash(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]);var WHITESPACE_CHARS=array_to_hash(characters("  \n\r	\f​᠎             　"));var PUNC_BEFORE_EXPRESSION=array_to_hash(characters("[{(,.;:"));var PUNC_CHARS=array_to_hash(characters("[]{}(),;:"));var REGEXP_MODIFIERS=array_to_hash(characters("gmsiy"));var UNICODE={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F0\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),combining_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]"),digit:new RegExp("[\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]")};function is_letter(ch){return UNICODE.letter.test(ch)}function is_digit(ch){ch=ch.charCodeAt(0);return ch>=48&&ch<=57}function is_unicode_digit(ch){return UNICODE.digit.test(ch)}function is_alphanumeric_char(ch){return is_digit(ch)||is_letter(ch)}function is_unicode_combining_mark(ch){return UNICODE.combining_mark.test(ch)}function is_unicode_connector_punctuation(ch){return UNICODE.connector_punctuation.test(ch)}function is_identifier_start(ch){return ch=="$"||ch=="_"||is_letter(ch)}function is_identifier_char(ch){return is_identifier_start(ch)||is_unicode_combining_mark(ch)||is_unicode_digit(ch)||is_unicode_connector_punctuation(ch)||ch=="‌"||ch=="‍"}function parse_js_number(num){if(RE_HEX_NUMBER.test(num)){return parseInt(num.substr(2),16)}else if(RE_OCT_NUMBER.test(num)){return parseInt(num.substr(1),8)}else if(RE_DEC_NUMBER.test(num)){return parseFloat(num)}}function JS_Parse_Error(message,line,col,pos){this.message=message;this.line=line+1;this.col=col+1;this.pos=pos+1;this.stack=(new Error).stack}JS_Parse_Error.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};function js_error(message,line,col,pos){throw new JS_Parse_Error(message,line,col,pos)}function is_token(token,type,val){return token.type==type&&(val==null||token.value==val)}var EX_EOF={};function tokenizer($TEXT){var S={text:$TEXT.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:false,regex_allowed:false,comments_before:[]};function peek(){return S.text.charAt(S.pos)}function next(signal_eof,in_string){var ch=S.text.charAt(S.pos++);if(signal_eof&&!ch)throw EX_EOF;if(ch=="\n"){S.newline_before=S.newline_before||!in_string;++S.line;S.col=0}else{++S.col}return ch}function eof(){return!S.peek()}function find(what,signal_eof){var pos=S.text.indexOf(what,S.pos);if(signal_eof&&pos==-1)throw EX_EOF;return pos}function start_token(){S.tokline=S.line;S.tokcol=S.col;S.tokpos=S.pos}function token(type,value,is_comment){S.regex_allowed=type=="operator"&&!HOP(UNARY_POSTFIX,value)||type=="keyword"&&HOP(KEYWORDS_BEFORE_EXPRESSION,value)||type=="punc"&&HOP(PUNC_BEFORE_EXPRESSION,value);var ret={type:type,value:value,line:S.tokline,col:S.tokcol,pos:S.tokpos,endpos:S.pos,nlb:S.newline_before};if(!is_comment){ret.comments_before=S.comments_before;S.comments_before=[];for(var i=0,len=ret.comments_before.length;i<len;i++){ret.nlb=ret.nlb||ret.comments_before[i].nlb}}S.newline_before=false;return ret}function skip_whitespace(){while(HOP(WHITESPACE_CHARS,peek()))next()}function read_while(pred){var ret="",ch=peek(),i=0;while(ch&&pred(ch,i++)){ret+=next();ch=peek()}return ret}function parse_error(err){js_error(err,S.tokline,S.tokcol,S.tokpos)}function read_num(prefix){var has_e=false,after_e=false,has_x=false,has_dot=prefix==".";var num=read_while(function(ch,i){if(ch=="x"||ch=="X"){if(has_x)return false;return has_x=true}if(!has_x&&(ch=="E"||ch=="e")){if(has_e)return false;return has_e=after_e=true}if(ch=="-"){if(after_e||i==0&&!prefix)return true;return false}if(ch=="+")return after_e;after_e=false;if(ch=="."){if(!has_dot&&!has_x&&!has_e)return has_dot=true;return false}return is_alphanumeric_char(ch)});if(prefix)num=prefix+num;var valid=parse_js_number(num);if(!isNaN(valid)){return token("num",valid)}else{parse_error("Invalid syntax: "+num)}}function read_escaped_char(in_string){var ch=next(true,in_string);switch(ch){case"n":return"\n";case"r":return"\r";case"t":return"	";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(hex_bytes(2));case"u":return String.fromCharCode(hex_bytes(4));case"\n":return"";default:return ch}}function hex_bytes(n){var num=0;for(;n>0;--n){var digit=parseInt(next(true),16);if(isNaN(digit))parse_error("Invalid hex-character pattern in string");num=num<<4|digit}return num}function read_string(){return with_eof_error("Unterminated string constant",function(){var quote=next(),ret="";for(;;){var ch=next(true);if(ch=="\\"){var octal_len=0,first=null;ch=read_while(function(ch){if(ch>="0"&&ch<="7"){if(!first){first=ch;return++octal_len}else if(first<="3"&&octal_len<=2)return++octal_len;else if(first>="4"&&octal_len<=1)return++octal_len}return false});if(octal_len>0)ch=String.fromCharCode(parseInt(ch,8));else ch=read_escaped_char(true)}else if(ch==quote)break;ret+=ch}return token("string",ret)})}function read_line_comment(){next();var i=find("\n"),ret;if(i==-1){ret=S.text.substr(S.pos);S.pos=S.text.length}else{ret=S.text.substring(S.pos,i);S.pos=i}return token("comment1",ret,true)}function read_multiline_comment(){next();return with_eof_error("Unterminated multiline comment",function(){var i=find("*/",true),text=S.text.substring(S.pos,i);S.pos=i+2;S.line+=text.split("\n").length-1;S.newline_before=S.newline_before||text.indexOf("\n")>=0;if(/^@cc_on/i.test(text)){warn("WARNING: at line "+S.line);warn('*** Found "conditional comment": '+text);warn("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")}return token("comment2",text,true)})}function read_name(){var backslash=false,name="",ch,escaped=false,hex;while((ch=peek())!=null){if(!backslash){if(ch=="\\")escaped=backslash=true,next();else if(is_identifier_char(ch))name+=next();else break}else{if(ch!="u")parse_error("Expecting UnicodeEscapeSequence -- uXXXX");ch=read_escaped_char();if(!is_identifier_char(ch))parse_error("Unicode char: "+ch.charCodeAt(0)+" is not valid in identifier");name+=ch;backslash=false}}if(HOP(KEYWORDS,name)&&escaped){hex=name.charCodeAt(0).toString(16).toUpperCase();name="\\u"+"0000".substr(hex.length)+hex+name.slice(1)}return name}function read_regexp(regexp){return with_eof_error("Unterminated regular expression",function(){var prev_backslash=false,ch,in_class=false;while(ch=next(true))if(prev_backslash){regexp+="\\"+ch;prev_backslash=false}else if(ch=="["){in_class=true;regexp+=ch}else if(ch=="]"&&in_class){in_class=false;regexp+=ch}else if(ch=="/"&&!in_class){break}else if(ch=="\\"){prev_backslash=true}else{regexp+=ch}var mods=read_name();return token("regexp",[regexp,mods])})}function read_operator(prefix){function grow(op){if(!peek())return op;var bigger=op+peek();if(HOP(OPERATORS,bigger)){next();return grow(bigger)}else{return op}}return token("operator",grow(prefix||next()))}function handle_slash(){next();var regex_allowed=S.regex_allowed;switch(peek()){case"/":S.comments_before.push(read_line_comment());S.regex_allowed=regex_allowed;return next_token();case"*":S.comments_before.push(read_multiline_comment());S.regex_allowed=regex_allowed;return next_token()}return S.regex_allowed?read_regexp(""):read_operator("/")}function handle_dot(){next();return is_digit(peek())?read_num("."):token("punc",".")}function read_word(){var word=read_name();return!HOP(KEYWORDS,word)?token("name",word):HOP(OPERATORS,word)?token("operator",word):HOP(KEYWORDS_ATOM,word)?token("atom",word):token("keyword",word)}function with_eof_error(eof_error,cont){try{return cont()}catch(ex){if(ex===EX_EOF)parse_error(eof_error);else throw ex}}function next_token(force_regexp){if(force_regexp!=null)return read_regexp(force_regexp);skip_whitespace();start_token();var ch=peek();if(!ch)return token("eof");if(is_digit(ch))return read_num();if(ch=='"'||ch=="'")return read_string();if(HOP(PUNC_CHARS,ch))return token("punc",next());if(ch==".")return handle_dot();if(ch=="/")return handle_slash();if(HOP(OPERATOR_CHARS,ch))return read_operator();if(ch=="\\"||is_identifier_start(ch))return read_word();parse_error("Unexpected character '"+ch+"'")}next_token.context=function(nc){if(nc)S=nc;return S};return next_token}var UNARY_PREFIX=array_to_hash(["typeof","void","delete","--","++","!","~","-","+"]);var UNARY_POSTFIX=array_to_hash(["--","++"]);var ASSIGNMENT=function(a,ret,i){while(i<a.length){ret[a[i]]=a[i].substr(0,a[i].length-1);i++}return ret}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":true},0);var PRECEDENCE=function(a,ret){for(var i=0,n=1;i<a.length;++i,++n){var b=a[i];for(var j=0;j<b.length;++j){ret[b[j]]=n}}return ret}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{});var STATEMENTS_WITH_LABELS=array_to_hash(["for","do","while","switch"]);var ATOMIC_START_TOKEN=array_to_hash(["atom","num","string","regexp","name"]);function NodeWithToken(str,start,end){this.name=str;this.start=start;this.end=end}NodeWithToken.prototype.toString=function(){return this.name};function parse($TEXT,exigent_mode,embed_tokens){var S={input:typeof $TEXT=="string"?tokenizer($TEXT,true):$TEXT,token:null,prev:null,peeked:null,in_function:0,in_directives:true,in_loop:0,labels:[]};S.token=next();function is(type,value){return is_token(S.token,type,value)}function peek(){return S.peeked||(S.peeked=S.input())}function next(){S.prev=S.token;if(S.peeked){S.token=S.peeked;S.peeked=null}else{S.token=S.input()}S.in_directives=S.in_directives&&(S.token.type=="string"||is("punc",";"));return S.token}function prev(){return S.prev}function croak(msg,line,col,pos){var ctx=S.input.context();js_error(msg,line!=null?line:ctx.tokline,col!=null?col:ctx.tokcol,pos!=null?pos:ctx.tokpos)}function token_error(token,msg){croak(msg,token.line,token.col)}function unexpected(token){if(token==null)token=S.token;
token_error(token,"Unexpected token: "+token.type+" ("+token.value+")")}function expect_token(type,val){if(is(type,val)){return next()}token_error(S.token,"Unexpected token "+S.token.type+", expected "+type)}function expect(punc){return expect_token("punc",punc)}function can_insert_semicolon(){return!exigent_mode&&(S.token.nlb||is("eof")||is("punc","}"))}function semicolon(){if(is("punc",";"))next();else if(!can_insert_semicolon())unexpected()}function as(){return slice(arguments)}function parenthesised(){expect("(");var ex=expression();expect(")");return ex}function add_tokens(str,start,end){return str instanceof NodeWithToken?str:new NodeWithToken(str,start,end)}function maybe_embed_tokens(parser){if(embed_tokens)return function(){var start=S.token;var ast=parser.apply(this,arguments);ast[0]=add_tokens(ast[0],start,prev());return ast};else return parser}var statement=maybe_embed_tokens(function(){if(is("operator","/")||is("operator","/=")){S.peeked=null;S.token=S.input(S.token.value.substr(1))}switch(S.token.type){case"string":var dir=S.in_directives,stat=simple_statement();if(dir&&stat[1][0]=="string"&&!is("punc",","))return as("directive",stat[1][1]);return stat;case"num":case"regexp":case"operator":case"atom":return simple_statement();case"name":return is_token(peek(),"punc",":")?labeled_statement(prog1(S.token.value,next,next)):simple_statement();case"punc":switch(S.token.value){case"{":return as("block",block_());case"[":case"(":return simple_statement();case";":next();return as("block");default:unexpected()}case"keyword":switch(prog1(S.token.value,next)){case"break":return break_cont("break");case"continue":return break_cont("continue");case"debugger":semicolon();return as("debugger");case"do":return function(body){expect_token("keyword","while");return as("do",prog1(parenthesised,semicolon),body)}(in_loop(statement));case"for":return for_();case"function":return function_(true);case"if":return if_();case"return":if(S.in_function==0)croak("'return' outside of function");return as("return",is("punc",";")?(next(),null):can_insert_semicolon()?null:prog1(expression,semicolon));case"switch":return as("switch",parenthesised(),switch_block_());case"throw":if(S.token.nlb)croak("Illegal newline after 'throw'");return as("throw",prog1(expression,semicolon));case"try":return try_();case"var":return prog1(var_,semicolon);case"const":return prog1(const_,semicolon);case"while":return as("while",parenthesised(),in_loop(statement));case"with":return as("with",parenthesised(),statement());default:unexpected()}}});function labeled_statement(label){S.labels.push(label);var start=S.token,stat=statement();if(exigent_mode&&!HOP(STATEMENTS_WITH_LABELS,stat[0]))unexpected(start);S.labels.pop();return as("label",label,stat)}function simple_statement(){return as("stat",prog1(expression,semicolon))}function break_cont(type){var name;if(!can_insert_semicolon()){name=is("name")?S.token.value:null}if(name!=null){next();if(!member(name,S.labels))croak("Label "+name+" without matching loop or statement")}else if(S.in_loop==0)croak(type+" not inside a loop or switch");semicolon();return as(type,name)}function for_(){expect("(");var init=null;if(!is("punc",";")){init=is("keyword","var")?(next(),var_(true)):expression(true,true);if(is("operator","in")){if(init[0]=="var"&&init[1].length>1)croak("Only one variable declaration allowed in for..in loop");return for_in(init)}}return regular_for(init)}function regular_for(init){expect(";");var test=is("punc",";")?null:expression();expect(";");var step=is("punc",")")?null:expression();expect(")");return as("for",init,test,step,in_loop(statement))}function for_in(init){var lhs=init[0]=="var"?as("name",init[1][0]):init;next();var obj=expression();expect(")");return as("for-in",init,lhs,obj,in_loop(statement))}var function_=function(in_statement){var name=is("name")?prog1(S.token.value,next):null;if(in_statement&&!name)unexpected();expect("(");return as(in_statement?"defun":"function",name,function(first,a){while(!is("punc",")")){if(first)first=false;else expect(",");if(!is("name"))unexpected();a.push(S.token.value);next()}next();return a}(true,[]),function(){++S.in_function;var loop=S.in_loop;S.in_directives=true;S.in_loop=0;var a=block_();--S.in_function;S.in_loop=loop;return a}())};function if_(){var cond=parenthesised(),body=statement(),belse;if(is("keyword","else")){next();belse=statement()}return as("if",cond,body,belse)}function block_(){expect("{");var a=[];while(!is("punc","}")){if(is("eof"))unexpected();a.push(statement())}next();return a}var switch_block_=curry(in_loop,function(){expect("{");var a=[],cur=null;while(!is("punc","}")){if(is("eof"))unexpected();if(is("keyword","case")){next();cur=[];a.push([expression(),cur]);expect(":")}else if(is("keyword","default")){next();expect(":");cur=[];a.push([null,cur])}else{if(!cur)unexpected();cur.push(statement())}}next();return a});function try_(){var body=block_(),bcatch,bfinally;if(is("keyword","catch")){next();expect("(");if(!is("name"))croak("Name expected");var name=S.token.value;next();expect(")");bcatch=[name,block_()]}if(is("keyword","finally")){next();bfinally=block_()}if(!bcatch&&!bfinally)croak("Missing catch/finally blocks");return as("try",body,bcatch,bfinally)}function vardefs(no_in){var a=[];for(;;){if(!is("name"))unexpected();var name=S.token.value;next();if(is("operator","=")){next();a.push([name,expression(false,no_in)])}else{a.push([name])}if(!is("punc",","))break;next()}return a}function var_(no_in){return as("var",vardefs(no_in))}function const_(){return as("const",vardefs())}function new_(){var newexp=expr_atom(false),args;if(is("punc","(")){next();args=expr_list(")")}else{args=[]}return subscripts(as("new",newexp,args),true)}var expr_atom=maybe_embed_tokens(function(allow_calls){if(is("operator","new")){next();return new_()}if(is("punc")){switch(S.token.value){case"(":next();return subscripts(prog1(expression,curry(expect,")")),allow_calls);case"[":next();return subscripts(array_(),allow_calls);case"{":next();return subscripts(object_(),allow_calls)}unexpected()}if(is("keyword","function")){next();return subscripts(function_(false),allow_calls)}if(HOP(ATOMIC_START_TOKEN,S.token.type)){var atom=S.token.type=="regexp"?as("regexp",S.token.value[0],S.token.value[1]):as(S.token.type,S.token.value);return subscripts(prog1(atom,next),allow_calls)}unexpected()});function expr_list(closing,allow_trailing_comma,allow_empty){var first=true,a=[];while(!is("punc",closing)){if(first)first=false;else expect(",");if(allow_trailing_comma&&is("punc",closing))break;if(is("punc",",")&&allow_empty){a.push(["atom","undefined"])}else{a.push(expression(false))}}next();return a}function array_(){return as("array",expr_list("]",!exigent_mode,true))}function object_(){var first=true,a=[];while(!is("punc","}")){if(first)first=false;else expect(",");if(!exigent_mode&&is("punc","}"))break;var type=S.token.type;var name=as_property_name();if(type=="name"&&(name=="get"||name=="set")&&!is("punc",":")){a.push([as_name(),function_(false),name])}else{expect(":");a.push([name,expression(false)])}}next();return as("object",a)}function as_property_name(){switch(S.token.type){case"num":case"string":return prog1(S.token.value,next)}return as_name()}function as_name(){switch(S.token.type){case"name":case"operator":case"keyword":case"atom":return prog1(S.token.value,next);default:unexpected()}}function subscripts(expr,allow_calls){if(is("punc",".")){next();return subscripts(as("dot",expr,as_name()),allow_calls)}if(is("punc","[")){next();return subscripts(as("sub",expr,prog1(expression,curry(expect,"]"))),allow_calls)}if(allow_calls&&is("punc","(")){next();return subscripts(as("call",expr,expr_list(")")),true)}return expr}function maybe_unary(allow_calls){if(is("operator")&&HOP(UNARY_PREFIX,S.token.value)){return make_unary("unary-prefix",prog1(S.token.value,next),maybe_unary(allow_calls))}var val=expr_atom(allow_calls);while(is("operator")&&HOP(UNARY_POSTFIX,S.token.value)&&!S.token.nlb){val=make_unary("unary-postfix",S.token.value,val);next()}return val}function make_unary(tag,op,expr){if((op=="++"||op=="--")&&!is_assignable(expr))croak("Invalid use of "+op+" operator");return as(tag,op,expr)}function expr_op(left,min_prec,no_in){var op=is("operator")?S.token.value:null;if(op&&op=="in"&&no_in)op=null;var prec=op!=null?PRECEDENCE[op]:null;if(prec!=null&&prec>min_prec){next();var right=expr_op(maybe_unary(true),prec,no_in);return expr_op(as("binary",op,left,right),min_prec,no_in)}return left}function expr_ops(no_in){return expr_op(maybe_unary(true),0,no_in)}function maybe_conditional(no_in){var expr=expr_ops(no_in);if(is("operator","?")){next();var yes=expression(false);expect(":");return as("conditional",expr,yes,expression(false,no_in))}return expr}function is_assignable(expr){if(!exigent_mode)return true;switch(expr[0]+""){case"dot":case"sub":case"new":case"call":return true;case"name":return expr[1]!="this"}}function maybe_assign(no_in){var left=maybe_conditional(no_in),val=S.token.value;if(is("operator")&&HOP(ASSIGNMENT,val)){if(is_assignable(left)){next();return as("assign",ASSIGNMENT[val],left,maybe_assign(no_in))}croak("Invalid assignment")}return left}var expression=maybe_embed_tokens(function(commas,no_in){if(arguments.length==0)commas=true;var expr=maybe_assign(no_in);if(commas&&is("punc",",")){next();return as("seq",expr,expression(true,no_in))}return expr});function in_loop(cont){try{++S.in_loop;return cont()}finally{--S.in_loop}}return as("toplevel",function(a){while(!is("eof"))a.push(statement());return a}([]))}function curry(f){var args=slice(arguments,1);return function(){return f.apply(this,args.concat(slice(arguments)))}}function prog1(ret){if(ret instanceof Function)ret=ret();for(var i=1,n=arguments.length;--n>0;++i)arguments[i]();return ret}function array_to_hash(a){var ret={};for(var i=0;i<a.length;++i)ret[a[i]]=true;return ret}function slice(a,start){return Array.prototype.slice.call(a,start||0)}function characters(str){return str.split("")}function member(name,array){for(var i=array.length;--i>=0;)if(array[i]==name)return true;return false}function HOP(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var warn=function(){};exports.tokenizer=tokenizer;exports.parse=parse;exports.slice=slice;exports.curry=curry;exports.member=member;exports.array_to_hash=array_to_hash;exports.PRECEDENCE=PRECEDENCE;exports.KEYWORDS_ATOM=KEYWORDS_ATOM;exports.RESERVED_WORDS=RESERVED_WORDS;exports.KEYWORDS=KEYWORDS;exports.ATOMIC_START_TOKEN=ATOMIC_START_TOKEN;exports.OPERATORS=OPERATORS;exports.is_alphanumeric_char=is_alphanumeric_char;exports.is_identifier_start=is_identifier_start;exports.is_identifier_char=is_identifier_char;exports.set_logger=function(logger){warn=logger}});define("uglifyjs/squeeze-more",["require","exports","module","./parse-js","./squeeze-more"],function(require,exports,module){var jsp=require("./parse-js"),pro=require("./process"),slice=jsp.slice,member=jsp.member,curry=jsp.curry,MAP=pro.MAP,PRECEDENCE=jsp.PRECEDENCE,OPERATORS=jsp.OPERATORS;function ast_squeeze_more(ast){var w=pro.ast_walker(),walk=w.walk,scope;function with_scope(s,cont){var save=scope,ret;scope=s;ret=cont();scope=save;return ret}function _lambda(name,args,body){return[this[0],name,args,with_scope(body.scope,curry(MAP,body,walk))]}return w.with_walkers({toplevel:function(body){return[this[0],with_scope(this.scope,curry(MAP,body,walk))]},"function":_lambda,defun:_lambda,"new":function(ctor,args){if(ctor[0]=="name"){if(ctor[1]=="Array"&&!scope.has("Array")){if(args.length!=1){return["array",args]}else{return walk(["call",["name","Array"],args])}}else if(ctor[1]=="Object"&&!scope.has("Object")){if(!args.length){return["object",[]]}else{return walk(["call",["name","Object"],args])}}else if((ctor[1]=="RegExp"||ctor[1]=="Function"||ctor[1]=="Error")&&!scope.has(ctor[1])){return walk(["call",["name",ctor[1]],args])}}},call:function(expr,args){if(expr[0]=="dot"&&expr[1][0]=="string"&&args.length==1&&(args[0][1]>0&&expr[2]=="substring"||expr[2]=="substr")){return["call",["dot",expr[1],"slice"],args]}if(expr[0]=="dot"&&expr[2]=="toString"&&args.length==0){if(expr[1][0]=="string")return expr[1];return["binary","+",expr[1],["string",""]]}if(expr[0]=="name"){if(expr[1]=="Array"&&args.length!=1&&!scope.has("Array")){return["array",args]}if(expr[1]=="Object"&&!args.length&&!scope.has("Object")){return["object",[]]}if(expr[1]=="String"&&!scope.has("String")){return["binary","+",args[0],["string",""]]}}}},function(){return walk(pro.ast_add_scope(ast))})}exports.ast_squeeze_more=ast_squeeze_more});define("uglifyjs/process",["require","exports","module","./parse-js","./squeeze-more"],function(require,exports,module){var jsp=require("./parse-js"),curry=jsp.curry,slice=jsp.slice,member=jsp.member,is_identifier_char=jsp.is_identifier_char,PRECEDENCE=jsp.PRECEDENCE,OPERATORS=jsp.OPERATORS;function ast_walker(){function _vardefs(defs){return[this[0],MAP(defs,function(def){var a=[def[0]];if(def.length>1)a[1]=walk(def[1]);return a})]}function _block(statements){var out=[this[0]];if(statements!=null)out.push(MAP(statements,walk));return out}var walkers={string:function(str){return[this[0],str]},num:function(num){return[this[0],num]},name:function(name){return[this[0],name]},toplevel:function(statements){return[this[0],MAP(statements,walk)]},block:_block,splice:_block,"var":_vardefs,"const":_vardefs,"try":function(t,c,f){return[this[0],MAP(t,walk),c!=null?[c[0],MAP(c[1],walk)]:null,f!=null?MAP(f,walk):null]},"throw":function(expr){return[this[0],walk(expr)]},"new":function(ctor,args){return[this[0],walk(ctor),MAP(args,walk)]},"switch":function(expr,body){return[this[0],walk(expr),MAP(body,function(branch){return[branch[0]?walk(branch[0]):null,MAP(branch[1],walk)]})]},"break":function(label){return[this[0],label]},"continue":function(label){return[this[0],label]},conditional:function(cond,t,e){return[this[0],walk(cond),walk(t),walk(e)]},assign:function(op,lvalue,rvalue){return[this[0],op,walk(lvalue),walk(rvalue)]},dot:function(expr){return[this[0],walk(expr)].concat(slice(arguments,1))},call:function(expr,args){return[this[0],walk(expr),MAP(args,walk)]},"function":function(name,args,body){return[this[0],name,args.slice(),MAP(body,walk)]},"debugger":function(){return[this[0]]},defun:function(name,args,body){return[this[0],name,args.slice(),MAP(body,walk)]},"if":function(conditional,t,e){return[this[0],walk(conditional),walk(t),walk(e)]},"for":function(init,cond,step,block){return[this[0],walk(init),walk(cond),walk(step),walk(block)]},"for-in":function(vvar,key,hash,block){return[this[0],walk(vvar),walk(key),walk(hash),walk(block)]},"while":function(cond,block){return[this[0],walk(cond),walk(block)]},"do":function(cond,block){return[this[0],walk(cond),walk(block)]},"return":function(expr){return[this[0],walk(expr)]},binary:function(op,left,right){return[this[0],op,walk(left),walk(right)]},"unary-prefix":function(op,expr){return[this[0],op,walk(expr)]},"unary-postfix":function(op,expr){return[this[0],op,walk(expr)]},sub:function(expr,subscript){return[this[0],walk(expr),walk(subscript)]},object:function(props){return[this[0],MAP(props,function(p){return p.length==2?[p[0],walk(p[1])]:[p[0],walk(p[1]),p[2]]})]},regexp:function(rx,mods){return[this[0],rx,mods]},array:function(elements){return[this[0],MAP(elements,walk)]},stat:function(stat){return[this[0],walk(stat)]},seq:function(){return[this[0]].concat(MAP(slice(arguments),walk))},label:function(name,block){return[this[0],name,walk(block)]},"with":function(expr,block){return[this[0],walk(expr),walk(block)]},atom:function(name){return[this[0],name]},directive:function(dir){return[this[0],dir]}};var user={};var stack=[];function walk(ast){if(ast==null)return null;try{stack.push(ast);var type=ast[0];var gen=user[type];if(gen){var ret=gen.apply(ast,ast.slice(1));if(ret!=null)return ret}gen=walkers[type];return gen.apply(ast,ast.slice(1))}finally{stack.pop()}}function dive(ast){if(ast==null)return null;try{stack.push(ast);return walkers[ast[0]].apply(ast,ast.slice(1))}finally{stack.pop()}}function with_walkers(walkers,cont){var save={},i;for(i in walkers)if(HOP(walkers,i)){save[i]=user[i];user[i]=walkers[i]}var ret=cont();for(i in save)if(HOP(save,i)){if(!save[i])delete user[i];else user[i]=save[i]}return ret}return{walk:walk,dive:dive,with_walkers:with_walkers,parent:function(){return stack[stack.length-2]},stack:function(){return stack}}}function Scope(parent){this.names={};this.mangled={};this.rev_mangled={};this.cname=-1;this.refs={};this.uses_with=false;this.uses_eval=false;this.directives=[];this.parent=parent;this.children=[];if(parent){this.level=parent.level+1;parent.children.push(this)}else{this.level=0}}function base54_digits(){if(typeof DIGITS_OVERRIDE_FOR_TESTING!="undefined")return DIGITS_OVERRIDE_FOR_TESTING;else return"etnrisouaflchpdvmgybwESxTNCkLAOM_DPHBjFIqRUzWXV$JKQGYZ0516372984"}var base54=function(){var DIGITS=base54_digits();return function(num){var ret="",base=54;do{ret+=DIGITS.charAt(num%base);num=Math.floor(num/base);base=64}while(num>0);return ret}}();Scope.prototype={has:function(name){for(var s=this;s;s=s.parent)if(HOP(s.names,name))return s},has_mangled:function(mname){for(var s=this;s;s=s.parent)if(HOP(s.rev_mangled,mname))return s},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval,uses_with:this.uses_with}},next_mangled:function(){for(;;){var m=base54(++this.cname),prior;prior=this.has_mangled(m);if(prior&&this.refs[prior.rev_mangled[m]]===prior)continue;prior=this.has(m);if(prior&&prior!==this&&this.refs[m]===prior&&!prior.has_mangled(m))continue;if(HOP(this.refs,m)&&this.refs[m]==null)continue;if(!is_identifier(m))continue;return m}},set_mangle:function(name,m){this.rev_mangled[m]=name;return this.mangled[name]=m},get_mangled:function(name,newMangle){if(this.uses_eval||this.uses_with)return name;var s=this.has(name);if(!s)return name;if(HOP(s.mangled,name))return s.mangled[name];if(!newMangle)return name;return s.set_mangle(name,s.next_mangled())},references:function(name){return name&&!this.parent||this.uses_with||this.uses_eval||this.refs[name]},define:function(name,type){if(name!=null){if(type=="var"||!HOP(this.names,name))this.names[name]=type||"var";return name}},active_directive:function(dir){return member(dir,this.directives)||this.parent&&this.parent.active_directive(dir)}};function ast_add_scope(ast){var current_scope=null;var w=ast_walker(),walk=w.walk;var having_eval=[];function with_new_scope(cont){current_scope=new Scope(current_scope);current_scope.labels=new Scope;var ret=current_scope.body=cont();ret.scope=current_scope;current_scope=current_scope.parent;return ret}function define(name,type){return current_scope.define(name,type)}function reference(name){current_scope.refs[name]=true}function _lambda(name,args,body){var is_defun=this[0]=="defun";return[this[0],is_defun?define(name,"defun"):name,args,with_new_scope(function(){if(!is_defun)define(name,"lambda");MAP(args,function(name){define(name,"arg")});return MAP(body,walk)})]}function _vardefs(type){return function(defs){MAP(defs,function(d){define(d[0],type);if(d[1])reference(d[0])})}}function _breacont(label){if(label)current_scope.labels.refs[label]=true}return with_new_scope(function(){var ret=w.with_walkers({"function":_lambda,defun:_lambda,label:function(name,stat){current_scope.labels.define(name)},"break":_breacont,"continue":_breacont,"with":function(expr,block){for(var s=current_scope;s;s=s.parent)s.uses_with=true},"var":_vardefs("var"),"const":_vardefs("const"),"try":function(t,c,f){if(c!=null)return[this[0],MAP(t,walk),[define(c[0],"catch"),MAP(c[1],walk)],f!=null?MAP(f,walk):null]},name:function(name){if(name=="eval")having_eval.push(current_scope);reference(name)}},function(){return walk(ast)});MAP(having_eval,function(scope){if(!scope.has("eval"))while(scope){scope.uses_eval=true;scope=scope.parent}});function fixrefs(scope,i){for(i=scope.children.length;--i>=0;)fixrefs(scope.children[i]);for(i in scope.refs)if(HOP(scope.refs,i)){for(var origin=scope.has(i),s=scope;s;s=s.parent){s.refs[i]=origin;if(s===origin)break}}}fixrefs(current_scope);return ret})}function ast_mangle(ast,options){var w=ast_walker(),walk=w.walk,scope;options=defaults(options,{mangle:true,toplevel:false,defines:null,except:null,no_functions:false});function get_mangled(name,newMangle){if(!options.mangle)return name;if(!options.toplevel&&!scope.parent)return name;if(options.except&&member(name,options.except))return name;if(options.no_functions&&HOP(scope.names,name)&&(scope.names[name]=="defun"||scope.names[name]=="lambda"))return name;return scope.get_mangled(name,newMangle)}function get_define(name){if(options.defines){if(!scope.has(name)){if(HOP(options.defines,name)){return options.defines[name]}}return null}}function _lambda(name,args,body){if(!options.no_functions&&options.mangle){var is_defun=this[0]=="defun",extra;if(name){if(is_defun)name=get_mangled(name);else if(body.scope.references(name)){extra={};if(!(scope.uses_eval||scope.uses_with))name=extra[name]=scope.next_mangled();else extra[name]=name}else name=null}}body=with_scope(body.scope,function(){args=MAP(args,function(name){return get_mangled(name)});return MAP(body,walk)},extra);return[this[0],name,args,body]}function with_scope(s,cont,extra){var _scope=scope;scope=s;if(extra)for(var i in extra)if(HOP(extra,i)){s.set_mangle(i,extra[i])}for(var i in s.names)if(HOP(s.names,i)){get_mangled(i,true)}var ret=cont();ret.scope=s;scope=_scope;return ret}function _vardefs(defs){return[this[0],MAP(defs,function(d){return[get_mangled(d[0]),walk(d[1])]})]}function _breacont(label){if(label)return[this[0],scope.labels.get_mangled(label)]}return w.with_walkers({"function":_lambda,defun:function(){var ast=_lambda.apply(this,arguments);switch(w.parent()[0]){case"toplevel":case"function":case"defun":return MAP.at_top(ast)}return ast},label:function(label,stat){if(scope.labels.refs[label])return[this[0],scope.labels.get_mangled(label,true),walk(stat)];return walk(stat)},"break":_breacont,"continue":_breacont,"var":_vardefs,"const":_vardefs,name:function(name){return get_define(name)||[this[0],get_mangled(name)]},"try":function(t,c,f){return[this[0],MAP(t,walk),c!=null?[get_mangled(c[0]),MAP(c[1],walk)]:null,f!=null?MAP(f,walk):null]},toplevel:function(body){var self=this;return with_scope(self.scope,function(){return[self[0],MAP(body,walk)]})},directive:function(){return MAP.at_top(this)}},function(){return walk(ast_add_scope(ast))})}var warn=function(){};function best_of(ast1,ast2){return gen_code(ast1).length>gen_code(ast2[0]=="stat"?ast2[1]:ast2).length?ast2:ast1}function last_stat(b){if(b[0]=="block"&&b[1]&&b[1].length>0)return b[1][b[1].length-1];return b}function aborts(t){if(t)switch(last_stat(t)[0]){case"return":case"break":case"continue":case"throw":return true}}function boolean_expr(expr){return expr[0]=="unary-prefix"&&member(expr[1],["!","delete"])||expr[0]=="binary"&&member(expr[1],["in","instanceof","==","!=","===","!==","<","<=",">=",">"])||expr[0]=="binary"&&member(expr[1],["&&","||"])&&boolean_expr(expr[2])&&boolean_expr(expr[3])||expr[0]=="conditional"&&boolean_expr(expr[2])&&boolean_expr(expr[3])||expr[0]=="assign"&&expr[1]===true&&boolean_expr(expr[3])||expr[0]=="seq"&&boolean_expr(expr[expr.length-1])}function empty(b){return!b||b[0]=="block"&&(!b[1]||b[1].length==0)}function is_string(node){return node[0]=="string"||node[0]=="unary-prefix"&&node[1]=="typeof"||node[0]=="binary"&&node[1]=="+"&&(is_string(node[2])||is_string(node[3]))}var when_constant=function(){var $NOT_CONSTANT={};function evaluate(expr){switch(expr[0]){case"string":case"num":return expr[1];case"name":case"atom":switch(expr[1]){case"true":return true;case"false":return false;case"null":return null}break;case"unary-prefix":switch(expr[1]){case"!":return!evaluate(expr[2]);case"typeof":return typeof evaluate(expr[2]);case"~":return~evaluate(expr[2]);case"-":return-evaluate(expr[2]);case"+":return+evaluate(expr[2])}break;case"binary":var left=expr[2],right=expr[3];switch(expr[1]){case"&&":return evaluate(left)&&evaluate(right);case"||":return evaluate(left)||evaluate(right);case"|":return evaluate(left)|evaluate(right);case"&":return evaluate(left)&evaluate(right);case"^":return evaluate(left)^evaluate(right);case"+":return evaluate(left)+evaluate(right);case"*":return evaluate(left)*evaluate(right);case"/":return evaluate(left)/evaluate(right);case"%":return evaluate(left)%evaluate(right);case"-":return evaluate(left)-evaluate(right);case"<<":return evaluate(left)<<evaluate(right);case">>":return evaluate(left)>>evaluate(right);case">>>":return evaluate(left)>>>evaluate(right);case"==":return evaluate(left)==evaluate(right);case"===":return evaluate(left)===evaluate(right);case"!=":return evaluate(left)!=evaluate(right);case"!==":return evaluate(left)!==evaluate(right);case"<":return evaluate(left)<evaluate(right);case"<=":return evaluate(left)<=evaluate(right);case">":return evaluate(left)>evaluate(right);case">=":return evaluate(left)>=evaluate(right);case"in":return evaluate(left)in evaluate(right);case"instanceof":return evaluate(left)instanceof evaluate(right)}}throw $NOT_CONSTANT}return function(expr,yes,no){try{var val=evaluate(expr),ast;switch(typeof val){case"string":ast=["string",val];break;case"number":ast=["num",val];break;case"boolean":ast=["name",String(val)];break;default:if(val===null){ast=["atom","null"];break}throw new Error("Can't handle constant of type: "+typeof val)}return yes.call(expr,ast,val)}catch(ex){if(ex===$NOT_CONSTANT){if(expr[0]=="binary"&&(expr[1]=="==="||expr[1]=="!==")&&(is_string(expr[2])&&is_string(expr[3])||boolean_expr(expr[2])&&boolean_expr(expr[3]))){expr[1]=expr[1].substr(0,2)}else if(no&&expr[0]=="binary"&&(expr[1]=="||"||expr[1]=="&&")){try{var lval=evaluate(expr[2]);expr=expr[1]=="&&"&&(lval?expr[3]:lval)||expr[1]=="||"&&(lval?lval:expr[3])||expr}catch(ex2){}}return no?no.call(expr,expr):null}else throw ex}}}();function warn_unreachable(ast){if(!empty(ast))warn("Dropping unreachable code: "+gen_code(ast,true))}function prepare_ifs(ast){var w=ast_walker(),walk=w.walk;function redo_if(statements){statements=MAP(statements,walk);for(var i=0;i<statements.length;++i){var fi=statements[i];if(fi[0]!="if")continue;if(fi[3])continue;var t=fi[2];if(!aborts(t))continue;var conditional=walk(fi[1]);var e_body=redo_if(statements.slice(i+1));var e=e_body.length==1?e_body[0]:["block",e_body];return statements.slice(0,i).concat([[fi[0],conditional,t,e]])}return statements}function redo_if_lambda(name,args,body){body=redo_if(body);return[this[0],name,args,body]}function redo_if_block(statements){return[this[0],statements!=null?redo_if(statements):null]}return w.with_walkers({defun:redo_if_lambda,"function":redo_if_lambda,block:redo_if_block,splice:redo_if_block,toplevel:function(statements){return[this[0],redo_if(statements)]},"try":function(t,c,f){return[this[0],redo_if(t),c!=null?[c[0],redo_if(c[1])]:null,f!=null?redo_if(f):null]}},function(){return walk(ast)})}function for_side_effects(ast,handler){var w=ast_walker(),walk=w.walk;var $stop={},$restart={};function stop(){throw $stop}function restart(){throw $restart}function found(){return handler.call(this,this,w,stop,restart)}function unary(op){if(op=="++"||op=="--")return found.apply(this,arguments)}function binary(op){if(op=="&&"||op=="||")return found.apply(this,arguments)}return w.with_walkers({"try":found,"throw":found,"return":found,"new":found,"switch":found,"break":found,"continue":found,assign:found,call:found,"if":found,"for":found,"for-in":found,"while":found,"do":found,"return":found,"unary-prefix":unary,"unary-postfix":unary,conditional:found,binary:binary,defun:found},function(){while(true)try{walk(ast);break}catch(ex){if(ex===$stop)break;if(ex===$restart)continue;throw ex}})}function ast_lift_variables(ast){var w=ast_walker(),walk=w.walk,scope;function do_body(body,env){var _scope=scope;scope=env;body=MAP(body,walk);var hash={},names=MAP(env.names,function(type,name){if(type!="var")return MAP.skip;if(!env.references(name))return MAP.skip;hash[name]=true;return[name]});if(names.length>0){for_side_effects(["block",body],function(ast,walker,stop,restart){if(ast[0]=="assign"&&ast[1]===true&&ast[2][0]=="name"&&HOP(hash,ast[2][1])){for(var i=names.length;--i>=0;){if(names[i][0]==ast[2][1]){if(names[i][1])stop();names[i][1]=ast[3];names.push(names.splice(i,1)[0]);break}}var p=walker.parent();if(p[0]=="seq"){var a=p[2];a.unshift(0,p.length);p.splice.apply(p,a)}else if(p[0]=="stat"){p.splice(0,p.length,"block")}else{stop()}restart()}stop()});body.unshift(["var",names])}scope=_scope;return body}function _vardefs(defs){var ret=null;for(var i=defs.length;--i>=0;){var d=defs[i];if(!d[1])continue;d=["assign",true,["name",d[0]],d[1]];if(ret==null)ret=d;else ret=["seq",d,ret]}if(ret==null&&w.parent()[0]!="for"){if(w.parent()[0]=="for-in")return["name",defs[0][0]];return MAP.skip}return["stat",ret]}function _toplevel(body){return[this[0],do_body(body,this.scope)]}return w.with_walkers({"function":function(name,args,body){for(var i=args.length;--i>=0&&!body.scope.references(args[i]);)args.pop();if(!body.scope.references(name))name=null;return[this[0],name,args,do_body(body,body.scope)]},defun:function(name,args,body){if(!scope.references(name))return MAP.skip;for(var i=args.length;--i>=0&&!body.scope.references(args[i]);)args.pop();return[this[0],name,args,do_body(body,body.scope)]},"var":_vardefs,toplevel:_toplevel},function(){return walk(ast_add_scope(ast))})}function ast_squeeze(ast,options){ast=squeeze_1(ast,options);ast=squeeze_2(ast,options);return ast}function squeeze_1(ast,options){options=defaults(options,{make_seqs:true,dead_code:true,no_warnings:false,keep_comps:true,unsafe:false});var w=ast_walker(),walk=w.walk,scope;function negate(c){var not_c=["unary-prefix","!",c];switch(c[0]){case"unary-prefix":return c[1]=="!"&&boolean_expr(c[2])?c[2]:not_c;case"seq":c=slice(c);c[c.length-1]=negate(c[c.length-1]);return c;case"conditional":return best_of(not_c,["conditional",c[1],negate(c[2]),negate(c[3])]);case"binary":var op=c[1],left=c[2],right=c[3];if(!options.keep_comps)switch(op){case"<=":return["binary",">",left,right];case"<":return["binary",">=",left,right];case">=":return["binary","<",left,right];case">":return["binary","<=",left,right]}switch(op){case"==":return["binary","!=",left,right];case"!=":return["binary","==",left,right];case"===":return["binary","!==",left,right];case"!==":return["binary","===",left,right];case"&&":return best_of(not_c,["binary","||",negate(left),negate(right)]);case"||":return best_of(not_c,["binary","&&",negate(left),negate(right)])}break}return not_c}function make_conditional(c,t,e){var make_real_conditional=function(){if(c[0]=="unary-prefix"&&c[1]=="!"){return e?["conditional",c[2],e,t]:["binary","||",c[2],t]}else{return e?best_of(["conditional",c,t,e],["conditional",negate(c),e,t]):["binary","&&",c,t]}};return when_constant(c,function(ast,val){warn_unreachable(val?e:t);return val?t:e},make_real_conditional)}function rmblock(block){if(block!=null&&block[0]=="block"&&block[1]){if(block[1].length==1)block=block[1][0];else if(block[1].length==0)block=["block"]}return block}function _lambda(name,args,body){return[this[0],name,args,tighten(body,"lambda")]}function tighten(statements,block_type){statements=MAP(statements,walk);statements=statements.reduce(function(a,stat){if(stat[0]=="block"){if(stat[1]){a.push.apply(a,stat[1])}}else{a.push(stat)}return a},[]);statements=function(a,prev){statements.forEach(function(cur){if(prev&&(cur[0]=="var"&&prev[0]=="var"||cur[0]=="const"&&prev[0]=="const")){prev[1]=prev[1].concat(cur[1])}else{a.push(cur);prev=cur}});return a}([]);if(options.dead_code)statements=function(a,has_quit){statements.forEach(function(st){if(has_quit){if(st[0]=="function"||st[0]=="defun"){a.push(st)}else if(st[0]=="var"||st[0]=="const"){if(!options.no_warnings)warn("Variables declared in unreachable code");st[1]=MAP(st[1],function(def){if(def[1]&&!options.no_warnings)warn_unreachable(["assign",true,["name",def[0]],def[1]]);
return[def[0]]});a.push(st)}else if(!options.no_warnings)warn_unreachable(st)}else{a.push(st);if(member(st[0],["return","throw","break","continue"]))has_quit=true}});return a}([]);if(options.make_seqs)statements=function(a,prev){statements.forEach(function(cur){if(prev&&prev[0]=="stat"&&cur[0]=="stat"){prev[1]=["seq",prev[1],cur[1]]}else{a.push(cur);prev=cur}});if(a.length>=2&&a[a.length-2][0]=="stat"&&(a[a.length-1][0]=="return"||a[a.length-1][0]=="throw")&&a[a.length-1][1]){a.splice(a.length-2,2,[a[a.length-1][0],["seq",a[a.length-2][1],a[a.length-1][1]]])}return a}([]);return statements}function make_if(c,t,e){return when_constant(c,function(ast,val){if(val){t=walk(t);warn_unreachable(e);return t||["block"]}else{e=walk(e);warn_unreachable(t);return e||["block"]}},function(){return make_real_if(c,t,e)})}function abort_else(c,t,e){var ret=[["if",negate(c),e]];if(t[0]=="block"){if(t[1])ret=ret.concat(t[1])}else{ret.push(t)}return walk(["block",ret])}function make_real_if(c,t,e){c=walk(c);t=walk(t);e=walk(e);if(empty(e)&&empty(t))return["stat",c];if(empty(t)){c=negate(c);t=e;e=null}else if(empty(e)){e=null}else{(function(){var a=gen_code(c);var n=negate(c);var b=gen_code(n);if(b.length<a.length){var tmp=t;t=e;e=tmp;c=n}})()}var ret=["if",c,t,e];if(t[0]=="if"&&empty(t[3])&&empty(e)){ret=best_of(ret,walk(["if",["binary","&&",c,t[1]],t[2]]))}else if(t[0]=="stat"){if(e){if(e[0]=="stat")ret=best_of(ret,["stat",make_conditional(c,t[1],e[1])]);else if(aborts(e))ret=abort_else(c,t,e)}else{ret=best_of(ret,["stat",make_conditional(c,t[1])])}}else if(e&&t[0]==e[0]&&(t[0]=="return"||t[0]=="throw")&&t[1]&&e[1]){ret=best_of(ret,[t[0],make_conditional(c,t[1],e[1])])}else if(e&&aborts(t)){ret=[["if",c,t]];if(e[0]=="block"){if(e[1])ret=ret.concat(e[1])}else{ret.push(e)}ret=walk(["block",ret])}else if(t&&aborts(e)){ret=abort_else(c,t,e)}return ret}function _do_while(cond,body){return when_constant(cond,function(cond,val){if(!val){warn_unreachable(body);return["block"]}else{return["for",null,null,null,walk(body)]}})}return w.with_walkers({sub:function(expr,subscript){if(subscript[0]=="string"){var name=subscript[1];if(is_identifier(name))return["dot",walk(expr),name];else if(/^[1-9][0-9]*$/.test(name)||name==="0")return["sub",walk(expr),["num",parseInt(name,10)]]}},"if":make_if,toplevel:function(body){return["toplevel",tighten(body)]},"switch":function(expr,body){var last=body.length-1;return["switch",walk(expr),MAP(body,function(branch,i){var block=tighten(branch[1]);if(i==last&&block.length>0){var node=block[block.length-1];if(node[0]=="break"&&!node[1])block.pop()}return[branch[0]?walk(branch[0]):null,block]})]},"function":_lambda,defun:_lambda,block:function(body){if(body)return rmblock(["block",tighten(body)])},binary:function(op,left,right){return when_constant(["binary",op,walk(left),walk(right)],function yes(c){return best_of(walk(c),this)},function no(){return function(){if(op!="=="&&op!="!=")return;var l=walk(left),r=walk(right);if(l&&l[0]=="unary-prefix"&&l[1]=="!"&&l[2][0]=="num")left=["num",+!l[2][1]];else if(r&&r[0]=="unary-prefix"&&r[1]=="!"&&r[2][0]=="num")right=["num",+!r[2][1]];return["binary",op,left,right]}()||this})},conditional:function(c,t,e){return make_conditional(walk(c),walk(t),walk(e))},"try":function(t,c,f){return["try",tighten(t),c!=null?[c[0],tighten(c[1])]:null,f!=null?tighten(f):null]},"unary-prefix":function(op,expr){expr=walk(expr);var ret=["unary-prefix",op,expr];if(op=="!")ret=best_of(ret,negate(expr));return when_constant(ret,function(ast,val){return walk(ast)},function(){return ret})},name:function(name){switch(name){case"true":return["unary-prefix","!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"while":_do_while,assign:function(op,lvalue,rvalue){lvalue=walk(lvalue);rvalue=walk(rvalue);var okOps=["+","-","/","*","%",">>","<<",">>>","|","^","&"];if(op===true&&lvalue[0]==="name"&&rvalue[0]==="binary"&&~okOps.indexOf(rvalue[1])&&rvalue[2][0]==="name"&&rvalue[2][1]===lvalue[1]){return[this[0],rvalue[1],lvalue,rvalue[3]]}return[this[0],op,lvalue,rvalue]},call:function(expr,args){expr=walk(expr);if(options.unsafe&&expr[0]=="dot"&&expr[1][0]=="string"&&expr[2]=="toString"){return expr[1]}return[this[0],expr,MAP(args,walk)]},num:function(num){if(!isFinite(num))return["binary","/",num===1/0?["num",1]:num===-1/0?["unary-prefix","-",["num",1]]:["num",0],["num",0]];return[this[0],num]}},function(){return walk(prepare_ifs(walk(prepare_ifs(ast))))})}function squeeze_2(ast,options){var w=ast_walker(),walk=w.walk,scope;function with_scope(s,cont){var save=scope,ret;scope=s;ret=cont();scope=save;return ret}function lambda(name,args,body){return[this[0],name,args,with_scope(body.scope,curry(MAP,body,walk))]}return w.with_walkers({directive:function(dir){if(scope.active_directive(dir))return["block"];scope.directives.push(dir)},toplevel:function(body){return[this[0],with_scope(this.scope,curry(MAP,body,walk))]},"function":lambda,defun:lambda},function(){return walk(ast_add_scope(ast))})}var DOT_CALL_NO_PARENS=jsp.array_to_hash(["name","array","object","string","dot","sub","call","regexp","defun"]);function make_string(str,ascii_only){var dq=0,sq=0;str=str.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(s){switch(s){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':++dq;return'"';case"'":++sq;return"'";case"\0":return"\\0"}return s});if(ascii_only)str=to_ascii(str);if(dq>sq)return"'"+str.replace(/\x27/g,"\\'")+"'";else return'"'+str.replace(/\x22/g,'\\"')+'"'}function to_ascii(str){return str.replace(/[\u0080-\uffff]/g,function(ch){var code=ch.charCodeAt(0).toString(16);while(code.length<4)code="0"+code;return"\\u"+code})}var SPLICE_NEEDS_BRACKETS=jsp.array_to_hash(["if","while","do","for","for-in","with"]);function gen_code(ast,options){options=defaults(options,{indent_start:0,indent_level:4,quote_keys:false,space_colon:false,beautify:false,ascii_only:false,inline_script:false});var beautify=!!options.beautify;var indentation=0,newline=beautify?"\n":"",space=beautify?" ":"";function encode_string(str){var ret=make_string(str,options.ascii_only);if(options.inline_script)ret=ret.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1");return ret}function make_name(name){name=name.toString();if(options.ascii_only)name=to_ascii(name);return name}function indent(line){if(line==null)line="";if(beautify)line=repeat_string(" ",options.indent_start+indentation*options.indent_level)+line;return line}function with_indent(cont,incr){if(incr==null)incr=1;indentation+=incr;try{return cont.apply(null,slice(arguments,1))}finally{indentation-=incr}}function last_char(str){str=str.toString();return str.charAt(str.length-1)}function first_char(str){return str.toString().charAt(0)}function add_spaces(a){if(beautify)return a.join(" ");var b=[];for(var i=0;i<a.length;++i){var next=a[i+1];b.push(a[i]);if(next&&(is_identifier_char(last_char(a[i]))&&(is_identifier_char(first_char(next))||first_char(next)=="\\")||/[\+\-]$/.test(a[i].toString())&&/^[\+\-]/.test(next.toString()))){b.push(" ")}}return b.join("")}function add_commas(a){return a.join(","+space)}function parenthesize(expr){var gen=make(expr);for(var i=1;i<arguments.length;++i){var el=arguments[i];if(el instanceof Function&&el(expr)||expr[0]==el)return"("+gen+")"}return gen}function best_of(a){if(a.length==1){return a[0]}if(a.length==2){var b=a[1];a=a[0];return a.length<=b.length?a:b}return best_of([a[0],best_of(a.slice(1))])}function needs_parens(expr){if(expr[0]=="function"||expr[0]=="object"){var a=slice(w.stack()),self=a.pop(),p=a.pop();while(p){if(p[0]=="stat")return true;if((p[0]=="seq"||p[0]=="call"||p[0]=="dot"||p[0]=="sub"||p[0]=="conditional")&&p[1]===self||(p[0]=="binary"||p[0]=="assign"||p[0]=="unary-postfix")&&p[2]===self){self=p;p=a.pop()}else{return false}}}return!HOP(DOT_CALL_NO_PARENS,expr[0])}function make_num(num){var str=num.toString(10),a=[str.replace(/^0\./,".").replace("e+","e")],m;if(Math.floor(num)===num){if(num>=0){a.push("0x"+num.toString(16).toLowerCase(),"0"+num.toString(8))}else{a.push("-0x"+(-num).toString(16).toLowerCase(),"-0"+(-num).toString(8))}if(m=/^(.*?)(0+)$/.exec(num)){a.push(m[1]+"e"+m[2].length)}}else if(m=/^0?\.(0+)(.*)$/.exec(num)){a.push(m[2]+"e-"+(m[1].length+m[2].length),str.substr(str.indexOf(".")))}return best_of(a)}var w=ast_walker();var make=w.walk;return w.with_walkers({string:encode_string,num:make_num,name:make_name,"debugger":function(){return"debugger;"},toplevel:function(statements){return make_block_statements(statements).join(newline+newline)},splice:function(statements){var parent=w.parent();if(HOP(SPLICE_NEEDS_BRACKETS,parent)){return make_block.apply(this,arguments)}else{return MAP(make_block_statements(statements,true),function(line,i){return i>0?indent(line):line}).join(newline)}},block:make_block,"var":function(defs){return"var "+add_commas(MAP(defs,make_1vardef))+";"},"const":function(defs){return"const "+add_commas(MAP(defs,make_1vardef))+";"},"try":function(tr,ca,fi){var out=["try",make_block(tr)];if(ca)out.push("catch","("+ca[0]+")",make_block(ca[1]));if(fi)out.push("finally",make_block(fi));return add_spaces(out)},"throw":function(expr){return add_spaces(["throw",make(expr)])+";"},"new":function(ctor,args){args=args.length>0?"("+add_commas(MAP(args,function(expr){return parenthesize(expr,"seq")}))+")":"";return add_spaces(["new",parenthesize(ctor,"seq","binary","conditional","assign",function(expr){var w=ast_walker(),has_call={};try{w.with_walkers({call:function(){throw has_call},"function":function(){return this}},function(){w.walk(expr)})}catch(ex){if(ex===has_call)return true;throw ex}})+args])},"switch":function(expr,body){return add_spaces(["switch","("+make(expr)+")",make_switch_block(body)])},"break":function(label){var out="break";if(label!=null)out+=" "+make_name(label);return out+";"},"continue":function(label){var out="continue";if(label!=null)out+=" "+make_name(label);return out+";"},conditional:function(co,th,el){return add_spaces([parenthesize(co,"assign","seq","conditional"),"?",parenthesize(th,"seq"),":",parenthesize(el,"seq")])},assign:function(op,lvalue,rvalue){if(op&&op!==true)op+="=";else op="=";return add_spaces([make(lvalue),op,parenthesize(rvalue,"seq")])},dot:function(expr){var out=make(expr),i=1;if(expr[0]=="num"){if(!/[a-f.]/i.test(out))out+="."}else if(expr[0]!="function"&&needs_parens(expr))out="("+out+")";while(i<arguments.length)out+="."+make_name(arguments[i++]);return out},call:function(func,args){var f=make(func);if(f.charAt(0)!="("&&needs_parens(func))f="("+f+")";return f+"("+add_commas(MAP(args,function(expr){return parenthesize(expr,"seq")}))+")"},"function":make_function,defun:make_function,"if":function(co,th,el){var out=["if","("+make(co)+")",el?make_then(th):make(th)];if(el){out.push("else",make(el))}return add_spaces(out)},"for":function(init,cond,step,block){var out=["for"];init=(init!=null?make(init):"").replace(/;*\s*$/,";"+space);cond=(cond!=null?make(cond):"").replace(/;*\s*$/,";"+space);step=(step!=null?make(step):"").replace(/;*\s*$/,"");var args=init+cond+step;if(args=="; ; ")args=";;";out.push("("+args+")",make(block));return add_spaces(out)},"for-in":function(vvar,key,hash,block){return add_spaces(["for","("+(vvar?make(vvar).replace(/;+$/,""):make(key)),"in",make(hash)+")",make(block)])},"while":function(condition,block){return add_spaces(["while","("+make(condition)+")",make(block)])},"do":function(condition,block){return add_spaces(["do",make(block),"while","("+make(condition)+")"])+";"},"return":function(expr){var out=["return"];if(expr!=null)out.push(make(expr));return add_spaces(out)+";"},binary:function(operator,lvalue,rvalue){var left=make(lvalue),right=make(rvalue);if(member(lvalue[0],["assign","conditional","seq"])||lvalue[0]=="binary"&&PRECEDENCE[operator]>PRECEDENCE[lvalue[1]]||lvalue[0]=="function"&&needs_parens(this)){left="("+left+")"}if(member(rvalue[0],["assign","conditional","seq"])||rvalue[0]=="binary"&&PRECEDENCE[operator]>=PRECEDENCE[rvalue[1]]&&!(rvalue[1]==operator&&member(operator,["&&","||","*"]))){right="("+right+")"}else if(!beautify&&options.inline_script&&(operator=="<"||operator=="<<")&&rvalue[0]=="regexp"&&/^script/i.test(rvalue[1])){right=" "+right}return add_spaces([left,operator,right])},"unary-prefix":function(operator,expr){var val=make(expr);if(!(expr[0]=="num"||expr[0]=="unary-prefix"&&!HOP(OPERATORS,operator+expr[1])||!needs_parens(expr)))val="("+val+")";return operator+(jsp.is_alphanumeric_char(operator.charAt(0))?" ":"")+val},"unary-postfix":function(operator,expr){var val=make(expr);if(!(expr[0]=="num"||expr[0]=="unary-postfix"&&!HOP(OPERATORS,operator+expr[1])||!needs_parens(expr)))val="("+val+")";return val+operator},sub:function(expr,subscript){var hash=make(expr);if(needs_parens(expr))hash="("+hash+")";return hash+"["+make(subscript)+"]"},object:function(props){var obj_needs_parens=needs_parens(this);if(props.length==0)return obj_needs_parens?"({})":"{}";var out="{"+newline+with_indent(function(){return MAP(props,function(p){if(p.length==3){return indent(make_function(p[0],p[1][2],p[1][3],p[2],true))}var key=p[0],val=parenthesize(p[1],"seq");if(options.quote_keys){key=encode_string(key)}else if((typeof key=="number"||!beautify&&+key+""==key)&&parseFloat(key)>=0){key=make_num(+key)}else if(!is_identifier(key)){key=encode_string(key)}return indent(add_spaces(beautify&&options.space_colon?[key,":",val]:[key+":",val]))}).join(","+newline)})+newline+indent("}");return obj_needs_parens?"("+out+")":out},regexp:function(rx,mods){if(options.ascii_only)rx=to_ascii(rx);return"/"+rx+"/"+mods},array:function(elements){if(elements.length==0)return"[]";return add_spaces(["[",add_commas(MAP(elements,function(el,i){if(!beautify&&el[0]=="atom"&&el[1]=="undefined")return i===elements.length-1?",":"";return parenthesize(el,"seq")})),"]"])},stat:function(stmt){return stmt!=null?make(stmt).replace(/;*\s*$/,";"):";"},seq:function(){return add_commas(MAP(slice(arguments),make))},label:function(name,block){return add_spaces([make_name(name),":",make(block)])},"with":function(expr,block){return add_spaces(["with","("+make(expr)+")",make(block)])},atom:function(name){return make_name(name)},directive:function(dir){return make_string(dir)+";"}},function(){return make(ast)});function make_then(th){if(th==null)return";";if(th[0]=="do"){return make_block([th])}var b=th;while(true){var type=b[0];if(type=="if"){if(!b[3])return make(["block",[th]]);b=b[3]}else if(type=="while"||type=="do")b=b[2];else if(type=="for"||type=="for-in")b=b[4];else break}return make(th)}function make_function(name,args,body,keyword,no_parens){var out=keyword||"function";if(name){out+=" "+make_name(name)}out+="("+add_commas(MAP(args,make_name))+")";out=add_spaces([out,make_block(body)]);return!no_parens&&needs_parens(this)?"("+out+")":out}function must_has_semicolon(node){switch(node[0]){case"with":case"while":return empty(node[2])||must_has_semicolon(node[2]);case"for":case"for-in":return empty(node[4])||must_has_semicolon(node[4]);case"if":if(empty(node[2])&&!node[3])return true;if(node[3]){if(empty(node[3]))return true;return must_has_semicolon(node[3])}return must_has_semicolon(node[2]);case"directive":return true}}function make_block_statements(statements,noindent){for(var a=[],last=statements.length-1,i=0;i<=last;++i){var stat=statements[i];var code=make(stat);if(code!=";"){if(!beautify&&i==last&&!must_has_semicolon(stat)){code=code.replace(/;+\s*$/,"")}a.push(code)}}return noindent?a:MAP(a,indent)}function make_switch_block(body){var n=body.length;if(n==0)return"{}";return"{"+newline+MAP(body,function(branch,i){var has_body=branch[1].length>0,code=with_indent(function(){return indent(branch[0]?add_spaces(["case",make(branch[0])+":"]):"default:")},.5)+(has_body?newline+with_indent(function(){return make_block_statements(branch[1]).join(newline)}):"");if(!beautify&&has_body&&i<n-1)code+=";";return code}).join(newline)+newline+indent("}")}function make_block(statements){if(!statements)return";";if(statements.length==0)return"{}";return"{"+newline+with_indent(function(){return make_block_statements(statements).join(newline)})+newline+indent("}")}function make_1vardef(def){var name=def[0],val=def[1];if(val!=null)name=add_spaces([make_name(name),"=",parenthesize(val,"seq")]);return name}}function split_lines(code,max_line_length){var splits=[0];jsp.parse(function(){var next_token=jsp.tokenizer(code);var last_split=0;var prev_token;function current_length(tok){return tok.pos-last_split}function split_here(tok){last_split=tok.pos;splits.push(last_split)}function custom(){var tok=next_token.apply(this,arguments);out:{if(prev_token){if(prev_token.type=="keyword")break out}if(current_length(tok)>max_line_length){switch(tok.type){case"keyword":case"atom":case"name":case"punc":split_here(tok);break out}}}prev_token=tok;return tok}custom.context=function(){return next_token.context.apply(this,arguments)};return custom}());return splits.map(function(pos,i){return code.substring(pos,splits[i+1]||code.length)}).join("\n")}function repeat_string(str,i){if(i<=0)return"";if(i==1)return str;var d=repeat_string(str,i>>1);d+=d;if(i&1)d+=str;return d}function defaults(args,defs){var ret={};if(args===true)args={};for(var i in defs)if(HOP(defs,i)){ret[i]=args&&HOP(args,i)?args[i]:defs[i]}return ret}function is_identifier(name){return/^[a-z_$][a-z0-9_$]*$/i.test(name)&&name!="this"&&!HOP(jsp.KEYWORDS_ATOM,name)&&!HOP(jsp.RESERVED_WORDS,name)&&!HOP(jsp.KEYWORDS,name)}function HOP(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var MAP;(function(){MAP=function(a,f,o){var ret=[],top=[],i;function doit(){var val=f.call(o,a[i],i);if(val instanceof AtTop){val=val.v;if(val instanceof Splice){top.push.apply(top,val.v)}else{top.push(val)}}else if(val!=skip){if(val instanceof Splice){ret.push.apply(ret,val.v)}else{ret.push(val)}}}if(a instanceof Array)for(i=0;i<a.length;++i)doit();else for(i in a)if(HOP(a,i))doit();return top.concat(ret)};MAP.at_top=function(val){return new AtTop(val)};MAP.splice=function(val){return new Splice(val)};var skip=MAP.skip={};function AtTop(val){this.v=val}function Splice(val){this.v=val}})();exports.ast_walker=ast_walker;exports.ast_mangle=ast_mangle;exports.ast_squeeze=ast_squeeze;exports.ast_lift_variables=ast_lift_variables;exports.gen_code=gen_code;exports.ast_add_scope=ast_add_scope;exports.set_logger=function(logger){warn=logger};exports.make_string=make_string;exports.split_lines=split_lines;exports.MAP=MAP;exports.ast_squeeze_more=require("./squeeze-more").ast_squeeze_more});define("uglifyjs/index",["require","exports","module","./parse-js","./process","./consolidator"],function(require,exports,module){function uglify(orig_code,options){options||(options={});var jsp=uglify.parser;var pro=uglify.uglify;var ast=jsp.parse(orig_code,options.strict_semicolons);ast=pro.ast_mangle(ast,options.mangle_options);ast=pro.ast_squeeze(ast,options.squeeze_options);var final_code=pro.gen_code(ast,options.gen_options);return final_code}uglify.parser=require("./parse-js");uglify.uglify=require("./process");uglify.consolidator=require("./consolidator");module.exports=uglify});define("parse",["./esprima"],function(esprima){"use strict";var ostring=Object.prototype.toString,argPropName="arguments";function traverse(object,visitor){var key,child;if(!object){return}if(visitor.call(null,object)===false){return false}for(key in object){if(object.hasOwnProperty(key)){child=object[key];if(typeof child==="object"&&child!==null){if(traverse(child,visitor)===false){return false}}}}}function getValidDeps(node){if(!node||node.type!=="ArrayExpression"||!node.elements){return}var deps=[];node.elements.some(function(elem){if(elem.type==="Literal"){deps.push(elem.value)}});return deps.length?deps:undefined}function parse(moduleName,fileName,fileContents,options){options=options||{};var i,moduleCall,depString,moduleDeps=[],result="",moduleList=[],needsDefine=true,astRoot=esprima.parse(fileContents);parse.recurse(astRoot,function(callName,config,name,deps){if(!deps){deps=[]}if(callName==="define"&&(!name||name===moduleName)){needsDefine=false}if(!name){moduleDeps=moduleDeps.concat(deps)}else{moduleList.push({name:name,deps:deps})}return!!options.findNestedDependencies},options);if(options.insertNeedsDefine&&needsDefine){result+='require.needsDefine("'+moduleName+'");'}if(moduleDeps.length||moduleList.length){for(i=0;i<moduleList.length;i++){moduleCall=moduleList[i];if(result){result+="\n"}if(moduleCall.name===moduleName){moduleCall.deps=moduleCall.deps.concat(moduleDeps);moduleDeps=[]}depString=moduleCall.deps.length?'["'+moduleCall.deps.join('","')+'"]':"[]";result+='define("'+moduleCall.name+'",'+depString+");"}if(moduleDeps.length){if(result){result+="\n"}depString=moduleDeps.length?'["'+moduleDeps.join('","')+'"]':"[]";result+='define("'+moduleName+'",'+depString+");"}}return result||null}parse.recurse=function(object,onMatch,options){var key,child,hasHas=options&&options.has;if(!object){return}if(hasHas&&object.type==="IfStatement"&&object.test.type&&object.test.type==="Literal"){if(object.test.value){this.recurse(object.consequent,onMatch,options)}else{this.recurse(object.alternate,onMatch,options)}}else{if(this.parseNode(object,onMatch)===false){return}for(key in object){if(object.hasOwnProperty(key)){child=object[key];if(typeof child==="object"&&child!==null){this.recurse(child,onMatch,options)}}}}};parse.definesRequire=function(fileName,fileContents){var found=false;traverse(esprima.parse(fileContents),function(node){if(parse.hasDefineAmd(node)){found=true;return false}});return found};parse.getAnonDeps=function(fileName,fileContents){var astRoot=esprima.parse(fileContents),defFunc=this.findAnonDefineFactory(astRoot);return parse.getAnonDepsFromNode(defFunc)};parse.getAnonDepsFromNode=function(node){var deps=[],funcArgLength;if(node){this.findRequireDepNames(node,deps);funcArgLength=node.params&&node.params.length;if(funcArgLength){deps=(funcArgLength>1?["require","exports","module"]:["require"]).concat(deps)}}return deps};parse.findAnonDefineFactory=function(node){var match;traverse(node,function(node){var arg0,arg1;if(node&&node.type==="CallExpression"&&node.callee&&node.callee.type==="Identifier"&&node.callee.name==="define"&&node[argPropName]){arg0=node[argPropName][0];if(arg0&&arg0.type==="FunctionExpression"){match=arg0;return false}arg1=node[argPropName][1];if(arg0.type==="Literal"&&arg1&&arg1.type==="FunctionExpression"){match=arg1;return false}}});return match};parse.findConfig=function(fileName,fileContents){var jsConfig,foundConfig=null,astRoot=esprima.parse(fileContents,{range:true});traverse(astRoot,function(node){var arg,c=node&&node.callee,requireType=parse.hasRequire(node);if(requireType&&(requireType==="require"||requireType==="requirejs"||requireType==="requireConfig"||requireType==="requirejsConfig")){arg=node[argPropName]&&node[argPropName][0];if(arg&&arg.type==="ObjectExpression"){jsConfig=parse.nodeToString(fileContents,arg);foundConfig=eval("("+jsConfig+")");return false}}});return foundConfig};parse.findDependencies=function(fileName,fileContents,options){var dependencies=[],astRoot=esprima.parse(fileContents);parse.recurse(astRoot,function(callName,config,name,deps){if(deps){dependencies=dependencies.concat(deps)}},options);return dependencies};parse.findCjsDependencies=function(fileName,fileContents,options){var dependencies=[];traverse(esprima.parse(fileContents),function(node){var arg;if(node&&node.type==="CallExpression"&&node.callee&&node.callee.type==="Identifier"&&node.callee.name==="require"&&node[argPropName]&&node[argPropName].length===1){arg=node[argPropName][0];if(arg.type==="Literal"){dependencies.push(arg.value)}}});return dependencies};parse.hasDefDefine=function(node){return node.type==="FunctionDeclaration"&&node.id&&node.id.type==="Identifier"&&node.id.name==="define"};parse.hasDefineAmd=function(node){return node&&node.type==="AssignmentExpression"&&node.left&&node.left.type==="MemberExpression"&&node.left.object&&node.left.object.name==="define"&&node.left.property&&node.left.property.name==="amd"};parse.hasRequire=function(node){var callName,c=node&&node.callee;if(node&&node.type==="CallExpression"&&c){if(c.type==="Identifier"&&(c.name==="require"||c.name==="requirejs")){callName=c.name}else if(c.type==="MemberExpression"&&c.object&&c.object.type==="Identifier"&&(c.object.name==="require"||c.object.name==="requirejs")&&c.property&&c.property.name==="config"){callName=c.object.name+"Config"}}return callName};parse.hasDefine=function(node){return node&&node.type==="CallExpression"&&node.callee&&node.callee.type==="Identifier"&&node.callee.name==="define"};parse.usesAmdOrRequireJs=function(fileName,fileContents,options){var uses;traverse(esprima.parse(fileContents),function(node){var type,callName,arg;if(parse.hasDefDefine(node)){type="declaresDefine"}else if(parse.hasDefineAmd(node)){type="defineAmd"}else{callName=parse.hasRequire(node);if(callName){arg=node[argPropName]&&node[argPropName][0];if(arg&&(arg.type==="ObjectExpression"||arg.type==="ArrayExpression")){type=callName}}else if(parse.hasDefine(node)){type="define"}}if(type){if(!uses){uses={}}uses[type]=true}});return uses};parse.usesCommonJs=function(fileName,fileContents,options){var uses=null,assignsExports=false;traverse(esprima.parse(fileContents),function(node){var type,exp=node.expression;if(node.type==="Identifier"&&(node.name==="__dirname"||node.name==="__filename")){type=node.name.substring(2)}else if(node.type==="VariableDeclarator"&&node.id&&node.id.type==="Identifier"&&node.id.name==="exports"){type="varExports"}else if(exp&&exp.type==="AssignmentExpression"&&exp.left&&exp.left.type==="MemberExpression"&&exp.left.object){if(exp.left.object.name==="module"&&exp.left.property&&exp.left.property.name==="exports"){type="moduleExports"}else if(exp.left.object.name==="exports"&&exp.left.property){type="exports"}}else if(node&&node.type==="CallExpression"&&node.callee&&node.callee.type==="Identifier"&&node.callee.name==="require"&&node[argPropName]&&node[argPropName].length===1&&node[argPropName][0].type==="Literal"){type="require"}if(type){if(type==="varExports"){assignsExports=true}else if(type!=="exports"||!assignsExports){if(!uses){uses={}}uses[type]=true}}});return uses};parse.findRequireDepNames=function(node,deps){var moduleName,i,n,call,args;traverse(node,function(node){var arg;if(node&&node.type==="CallExpression"&&node.callee&&node.callee.type==="Identifier"&&node.callee.name==="require"&&node[argPropName]&&node[argPropName].length===1){arg=node[argPropName][0];if(arg.type==="Literal"){deps.push(arg.value)}}})};parse.parseNode=function(node,onMatch){var name,deps,cjsDeps,arg,factory,args=node&&node[argPropName],callName=parse.hasRequire(node);if(callName==="require"||callName==="requirejs"){arg=node[argPropName]&&node[argPropName][0];if(arg.type!=="ArrayExpression"){if(arg.type==="ObjectExpression"){arg=node[argPropName][1]}}deps=getValidDeps(arg);if(!deps){return}return onMatch("require",null,null,deps)}else if(parse.hasDefine(node)&&args&&args.length){name=args[0];deps=args[1];factory=args[2];if(name.type==="ArrayExpression"){factory=deps;deps=name;name=null}else if(name.type==="FunctionExpression"){factory=name;name=deps=null}else if(name.type!=="Literal"){name=deps=factory=null}if(name&&name.type==="Literal"&&deps){if(deps.type==="FunctionExpression"){factory=deps;deps=null}else if(deps.type==="ObjectExpression"){deps=factory=null}}if(deps&&deps.type==="ArrayExpression"){deps=getValidDeps(deps)}else if(factory&&factory.type==="FunctionExpression"){cjsDeps=parse.getAnonDepsFromNode(factory);if(cjsDeps.length){deps=cjsDeps}}else if(deps||factory){return}if(name&&name.type==="Literal"){name=name.value}return onMatch("define",null,name,deps)}};parse.nodeToString=function(contents,node){var range=node.range;return contents.substring(range[0],range[1])};parse.getLicenseComments=function(fileName,contents){var commentNode,refNode,subNode,value,i,j,ast=esprima.parse(contents,{comment:true}),result="",existsMap={},lineEnd=contents.indexOf("\r")===-1?"\n":"\r\n";if(ast.comments){for(i=0;i<ast.comments.length;i++){commentNode=ast.comments[i];if(commentNode.type==="Line"){value="//"+commentNode.value+lineEnd;refNode=commentNode;if(i+1>=ast.comments.length){value+=lineEnd}else{for(j=i+1;j<ast.comments.length;j++){subNode=ast.comments[j];if(subNode.type==="Line"&&subNode.range[0]===refNode.range[1]){value+="//"+subNode.value+lineEnd;refNode=subNode}else{break}}value+=lineEnd;i=j-1}}else{value="/*"+commentNode.value+"*/"+lineEnd+lineEnd}if(!existsMap[value]&&(value.indexOf("license")!==-1||commentNode.type==="Block"&&value.indexOf("/*!")===0||value.indexOf("opyright")!==-1||value.indexOf("(c)")!==-1)){result+=value;existsMap[value]=true}}}return result};return parse});define("transform",["./esprima","./parse","logger","lang"],function(esprima,parse,logger,lang){"use strict";var transform;return transform={toTransport:function(namespace,moduleName,path,contents,onFound,options){options=options||{};var tokens,foundAnon,deps,lastRange,parenCount,inDefine,scanCount=0,scanReset=false,defineRanges=[],contentInsertion="",depString="";try{tokens=esprima.parse(contents,{tokens:true,range:true}).tokens}catch(e){logger.trace("toTransport skipping "+path+": "+e.toString());return contents}tokens.forEach(function(token,i){var prev,prev2,next,next2,next3,next4,next5,needsId,depAction,nameCommaRange,foundId,sourceUrlData,range,namespaceExists=false;if(inDefine&&token.type==="Punctuator"){if(token.value==="("){parenCount+=1}else if(token.value===")"){parenCount-=1}if(parenCount===0){inDefine=false;lastRange=defineRanges.length&&defineRanges[defineRanges.length-1];if(lastRange){lastRange.defineEndRange=token.range}}}if(token.type==="Identifier"&&token.value==="define"){prev=tokens[i-1];next=tokens[i+1];if(prev&&prev.type==="Punctuator"&&prev.value==="."){prev2=tokens[i-2];if(!prev2){return}if(!namespace||prev2.type!=="Identifier"||prev2.value!==namespace){return}else if(namespace){namespaceExists=true}}if(!next||next.type!=="Punctuator"||next.value!=="("){return}next2=tokens[i+2];if(!next2){return}if(next2.type==="Punctuator"&&next2.value==="["){needsId=true;depAction="skip"}else if(next2.type==="Punctuator"&&next2.value==="{"){needsId=true;depAction="skip"}else if(next2.type==="Keyword"&&next2.value==="function"){needsId=true;depAction="scan"}else if(next2.type==="String"){needsId=false;foundId=next2.value.substring(1,next2.value.length-1);next3=tokens[i+3];next4=tokens[i+4];if(!next3||!next4){return}if(next3.type==="Punctuator"&&next3.value===","&&next4.type==="Keyword"&&next4.value==="function"){depAction="scan";nameCommaRange=next3.range}else{depAction="skip"}}else if(next2.type==="Identifier"){next3=tokens[i+3];if(!next3){return}if(next3.type==="Punctuator"&&next3.value===")"){needsId=true;depAction="empty"}else{return}}else if(next2.type==="Numeric"){next3=tokens[i+3];if(!next3){return}if(next3.type==="Punctuator"&&next3.value===")"){needsId=true;depAction="skip"}else{return}}else if(next2.type==="Punctuator"&&next2.value==="-"){next3=tokens[i+3];if(!next3){return}if(next3.type==="Numeric"){next4=tokens[i+4];if(!next4){return}if(next4.type==="Punctuator"&&next4.value===")"){needsId=true;depAction="skip"}else{return}}else{return}}else if(next2.type==="Keyword"&&next2.value==="this"){next3=tokens[i+3];next4=tokens[i+4];next5=tokens[i+5];if(!next3||!next4||!next5){return}if(next3.type==="Punctuator"&&next3.value==="."&&next4.type==="Identifier"&&next5.type==="Punctuator"&&next5.value===")"){needsId=true;depAction="empty"}else{return}}else{return}inDefine=true;parenCount=0;range={foundId:foundId,needsId:needsId,depAction:depAction,namespaceExists:namespaceExists,defineRange:token.range,parenRange:next.range,nameCommaRange:nameCommaRange,sourceUrlData:sourceUrlData};if(range.needsId){if(foundAnon){throw new Error(path+" has two many anonymous modules in it.")
}else{foundAnon=range;defineRanges.push(range)}}else if(depAction==="scan"){scanCount+=1;if(scanCount>1){if(!scanReset){defineRanges=foundAnon?[foundAnon]:[];scanReset=true}}else{defineRanges.push(range)}}}});if(!defineRanges.length){return contents}defineRanges.reverse();defineRanges.forEach(function(info){if(info.needsId&&moduleName){contentInsertion+="'"+moduleName+"',"}if(info.depAction==="scan"){deps=parse.getAnonDeps(path,contents.substring(info.defineRange[0],info.defineEndRange[1]));if(deps.length){depString="["+deps.map(function(dep){return"'"+dep+"'"})+"]"}else{depString="[]"}depString+=",";if(info.nameCommaRange){contents=contents.substring(0,info.nameCommaRange[1])+depString+contents.substring(info.nameCommaRange[1],contents.length)}else{contentInsertion+=depString}}else if(info.depAction==="empty"){contentInsertion+="[],"}if(contentInsertion){contents=contents.substring(0,info.parenRange[1])+contentInsertion+contents.substring(info.parenRange[1],contents.length)}if(namespace&&!info.namespaceExists){contents=contents.substring(0,info.defineRange[0])+namespace+"."+contents.substring(info.defineRange[0],contents.length)}if(onFound){onFound(info)}});if(options.useSourceUrl){contents='eval("'+lang.jsEscape(contents)+"\\n//@ sourceURL="+(path.indexOf("/")===0?"":"/")+path+'");\n'}return contents}}});define("pragma",["parse","logger"],function(parse,logger){"use strict";function Temp(){}function create(obj,mixin){Temp.prototype=obj;var temp=new Temp,prop;Temp.prototype=null;if(mixin){for(prop in mixin){if(mixin.hasOwnProperty(prop)&&!temp.hasOwnProperty(prop)){temp[prop]=mixin[prop]}}}return temp}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,nsRegExp:/(^|[^\.])(requirejs|require|define)(\.config)?\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs, require, define;/,defineCheckRegExp:/typeof\s+define\s*===\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*===\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*'function'\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(contents,config){return config.useStrict?contents:contents.replace(pragma.useStrictRegExp,"")},namespace:function(fileContents,ns,onLifecycleName){if(ns){fileContents=fileContents.replace(pragma.nsRegExp,"$1"+ns+".$2$3(");fileContents=fileContents.replace(pragma.defineTernaryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd ? "+ns+".define");fileContents=fileContents.replace(pragma.defineJQueryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd && "+ns+".define.amd.jQuery");fileContents=fileContents.replace(pragma.defineHasRegExp,"typeof "+ns+".define === 'function' && typeof "+ns+".define.amd === 'object' && "+ns+".define.amd");fileContents=fileContents.replace(pragma.defineCheckRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd");fileContents=fileContents.replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+ns+".define && "+ns+".define.amd");if(pragma.apiDefRegExp.test(fileContents)&&fileContents.indexOf("if (typeof "+ns+" === 'undefined')")===-1){fileContents="var "+ns+";(function () { if (typeof "+ns+" === 'undefined') {\n"+ns+" = {};\n"+fileContents+"\n"+ns+".requirejs = requirejs;"+ns+".require = require;"+ns+".define = define;\n"+"}\n}());"}if(pragma.nsWrapRegExp.test(fileContents)){fileContents=fileContents.replace(pragma.nsWrapRegExp,"");fileContents="(function () {\n"+"var require = "+ns+".require,"+"requirejs = "+ns+".requirejs,"+"define = "+ns+".define;\n"+fileContents+"\n}());"}}return fileContents},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName){lifecyclePragmas=config["pragmas"+onLifecycleName];lifecycleHas=config["has"+onLifecycleName];if(lifecyclePragmas){pragmas=create(pragmas||{},lifecyclePragmas)}if(lifecycleHas){hasConfig=create(hasConfig||{},lifecycleHas)}}if(hasConfig){fileContents=fileContents.replace(pragma.hasRegExp,function(match,test){if(hasConfig.hasOwnProperty(test)){return!!hasConfig[test]}return match})}if(!config.skipPragmas){while((foundIndex=fileContents.indexOf("//>>",startIndex))!==-1){lineEndIndex=fileContents.indexOf("\n",foundIndex);if(lineEndIndex===-1){lineEndIndex=fileContents.length-1}startIndex=lineEndIndex+1;conditionLine=fileContents.substring(foundIndex,lineEndIndex+1);matches=conditionLine.match(pragma.conditionalRegExp);if(matches){type=matches[1];marker=matches[2];condition=matches[3];isTrue=false;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g");endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length));if(endMatches){endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length;lineEndIndex=fileContents.indexOf("\n",endMarkerIndex);if(lineEndIndex===-1){lineEndIndex=fileContents.length-1}shouldInclude=type==="exclude"&&!isTrue||type==="include"&&isTrue;startLength=startIndex-foundIndex;fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length);startIndex=foundIndex}else{throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine}}}}if(config.optimizeAllPluginResources&&pluginCollector){try{deps=parse.findDependencies(fileName,fileContents);if(deps.length){for(i=0;i<deps.length;i++){dep=deps[i];if(dep.indexOf("!")!==-1){moduleName=dep.split("!")[0];collectorMod=pluginCollector[moduleName];if(!collectorMod){collectorMod=pluginCollector[moduleName]=[]}collectorMod.push(dep)}}}}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}}fileContents=fileContents.replace(pragma.amdefineRegExp,"");if(onLifecycleName==="OnSave"&&config.namespace){fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)}return pragma.removeStrict(fileContents,config)}};return pragma});if(env==="node"){define("node/optimize",{})}if(env==="rhino"){define("rhino/optimize",["logger"],function(logger){if(!Array.prototype.reduce){Array.prototype.reduce=function(fn){var i=0,length=this.length,accumulator;if(arguments.length>=2){accumulator=arguments[1]}else{do{if(i in this){accumulator=this[i++];break}}while(true)}for(;i<length;i++){if(i in this){accumulator=fn.call(undefined,accumulator,this[i],i,this)}}return accumulator}}var JSSourceFilefromCode,optimize;try{JSSourceFilefromCode=java.lang.Class.forName("com.google.javascript.jscomp.JSSourceFile").getMethod("fromCode",[java.lang.String,java.lang.String])}catch(e){}function closurefromCode(filename,content){return JSSourceFilefromCode.invoke(null,[filename,content])}optimize={closure:function(fileName,fileContents,keepLines,config){config=config||{};var jscomp=Packages.com.google.javascript.jscomp,flags=Packages.com.google.common.flags,externSourceFile=closurefromCode("fakeextern.js"," "),jsSourceFile=closurefromCode(String(fileName),String(fileContents)),options,option,FLAG_compilation_level,compiler,Compiler=Packages.com.google.javascript.jscomp.Compiler,result;logger.trace("Minifying file: "+fileName);options=new jscomp.CompilerOptions;for(option in config.CompilerOptions){if(config.CompilerOptions[option]){options[option]=config.CompilerOptions[option]}}options.prettyPrint=keepLines||options.prettyPrint;FLAG_compilation_level=jscomp.CompilationLevel[config.CompilationLevel||"SIMPLE_OPTIMIZATIONS"];FLAG_compilation_level.setOptionsForCompilationLevel(options);Compiler.setLoggingLevel(Packages.java.util.logging.Level[config.loggingLevel||"WARNING"]);compiler=new Compiler;result=compiler.compile(externSourceFile,jsSourceFile,options);if(!result.success){logger.error("Cannot closure compile file: "+fileName+". Skipping it.")}else{fileContents=compiler.toSource()}return fileContents}};return optimize})}define("optimize",["lang","logger","env!env/optimize","env!env/file","parse","pragma","uglifyjs/index"],function(lang,logger,envOptimize,file,parse,pragma,uglify){"use strict";var optimize,cssImportRegExp=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/g,cssCommentImportRegExp=/\/\*[^\*]*@import[^\*]*\*\//g,cssUrlRegExp=/\url\(\s*([^\)]+)\s*\)?/g;function cleanCssUrlQuotes(url){url=url.replace(/\s+$/,"");if(url.charAt(0)==="'"||url.charAt(0)==='"'){url=url.substring(1,url.length-1)}return url}function flattenCss(fileName,fileContents,cssImportIgnore,included){fileName=fileName.replace(lang.backSlashRegExp,"/");var endIndex=fileName.lastIndexOf("/"),filePath=endIndex!==-1?fileName.substring(0,endIndex+1):"",importList=[],skippedList=[];fileContents=fileContents.replace(cssCommentImportRegExp,"");if(cssImportIgnore&&cssImportIgnore.charAt(cssImportIgnore.length-1)!==","){cssImportIgnore+=","}fileContents=fileContents.replace(cssImportRegExp,function(fullMatch,urlStart,importFileName,urlEnd,mediaTypes){if(mediaTypes&&mediaTypes.replace(/^\s\s*/,"").replace(/\s\s*$/,"")!=="all"){skippedList.push(fileName);return fullMatch}importFileName=cleanCssUrlQuotes(importFileName);if(cssImportIgnore&&cssImportIgnore.indexOf(importFileName+",")!==-1){return fullMatch}importFileName=importFileName.replace(lang.backSlashRegExp,"/");try{var fullImportFileName=importFileName.charAt(0)==="/"?importFileName:filePath+importFileName,importContents=file.readFile(fullImportFileName),i,importEndIndex,importPath,fixedUrlMatch,colonIndex,parts,flat;if(included[fullImportFileName]){return""}included[fullImportFileName]=true;flat=flattenCss(fullImportFileName,importContents,cssImportIgnore,included);importContents=flat.fileContents;if(flat.importList.length){importList.push.apply(importList,flat.importList)}if(flat.skippedList.length){skippedList.push.apply(skippedList,flat.skippedList)}importEndIndex=importFileName.lastIndexOf("/");importPath=importEndIndex!==-1?importFileName.substring(0,importEndIndex+1):"";importPath=importPath.replace(/^\.\//,"");importContents=importContents.replace(cssUrlRegExp,function(fullMatch,urlMatch){fixedUrlMatch=cleanCssUrlQuotes(urlMatch);fixedUrlMatch=fixedUrlMatch.replace(lang.backSlashRegExp,"/");colonIndex=fixedUrlMatch.indexOf(":");if(fixedUrlMatch.charAt(0)!=="/"&&(colonIndex===-1||colonIndex>fixedUrlMatch.indexOf("/"))){urlMatch=importPath+fixedUrlMatch}else{logger.trace(importFileName+"\n  URL not a relative URL, skipping: "+urlMatch)}parts=urlMatch.split("/");for(i=parts.length-1;i>0;i--){if(parts[i]==="."){parts.splice(i,1)}else if(parts[i]===".."){if(i!==0&&parts[i-1]!==".."){parts.splice(i-1,2);i-=1}}}return"url("+parts.join("/")+")"});importList.push(fullImportFileName);return importContents}catch(e){logger.warn(fileName+"\n  Cannot inline css import, skipping: "+importFileName);return fullMatch}});return{importList:importList,skippedList:skippedList,fileContents:fileContents}}optimize={jsFile:function(fileName,fileContents,outFileName,config,pluginCollector){if(!fileContents){fileContents=file.readFile(fileName)}fileContents=optimize.js(fileName,fileContents,config,pluginCollector);file.saveUtf8File(outFileName,fileContents)},js:function(fileName,fileContents,config,pluginCollector){var parts=String(config.optimize).split("."),optimizerName=parts[0],keepLines=parts[1]==="keepLines",licenseContents="",optFunc;config=config||{};fileContents=pragma.process(fileName,fileContents,config,"OnSave",pluginCollector);if(optimizerName&&optimizerName!=="none"){optFunc=envOptimize[optimizerName]||optimize.optimizers[optimizerName];if(!optFunc){throw new Error('optimizer with name of "'+optimizerName+'" not found for this environment')}if(config.preserveLicenseComments){try{licenseContents=parse.getLicenseComments(fileName,fileContents)}catch(e){logger.error("Cannot parse file: "+fileName+" for comments. Skipping it. Error is:\n"+e.toString())}}fileContents=licenseContents+optFunc(fileName,fileContents,keepLines,config[optimizerName])}return fileContents},cssFile:function(fileName,outFileName,config){var originalFileContents=file.readFile(fileName),flat=flattenCss(fileName,originalFileContents,config.cssImportIgnore,{}),fileContents=flat.skippedList.length?originalFileContents:flat.fileContents,startIndex,endIndex,buildText,comment;if(flat.skippedList.length){logger.warn("Cannot inline @imports for "+fileName+",\nthe following files had media queries in them:\n"+flat.skippedList.join("\n"))}try{if(config.optimizeCss.indexOf(".keepComments")===-1){startIndex=0;while((startIndex=fileContents.indexOf("/*",startIndex))!==-1){endIndex=fileContents.indexOf("*/",startIndex+2);if(endIndex===-1){throw"Improper comment in CSS file: "+fileName}comment=fileContents.substring(startIndex,endIndex);if(config.preserveLicenseComments&&(comment.indexOf("license")!==-1||comment.indexOf("opyright")!==-1||comment.indexOf("(c)")!==-1)){startIndex=endIndex}else{fileContents=fileContents.substring(0,startIndex)+fileContents.substring(endIndex+2,fileContents.length);startIndex=0}}}if(config.optimizeCss.indexOf(".keepLines")===-1){fileContents=fileContents.replace(/[\r\n]/g,"");fileContents=fileContents.replace(/\s+/g," ");fileContents=fileContents.replace(/\{\s/g,"{");fileContents=fileContents.replace(/\s\}/g,"}")}else{fileContents=fileContents.replace(/(\r\n)+/g,"\r\n");fileContents=fileContents.replace(/(\n)+/g,"\n")}}catch(e){fileContents=originalFileContents;logger.error("Could not optimized CSS file: "+fileName+", error: "+e)}file.saveUtf8File(outFileName,fileContents);buildText="\n"+outFileName.replace(config.dir,"")+"\n----------------\n";flat.importList.push(fileName);buildText+=flat.importList.map(function(path){return path.replace(config.dir,"")}).join("\n");return buildText+"\n"},css:function(startDir,config){var buildText="",i,fileName,fileList;if(config.optimizeCss.indexOf("standard")!==-1){fileList=file.getFilteredFileList(startDir,/\.css$/,true);if(fileList){for(i=0;i<fileList.length;i++){fileName=fileList[i];logger.trace("Optimizing ("+config.optimizeCss+") CSS file: "+fileName);buildText+=optimize.cssFile(fileName,fileName,config)}}}return buildText},optimizers:{uglify:function(fileName,fileContents,keepLines,config){var parser=uglify.parser,processor=uglify.uglify,ast,errMessage,errMatch;config=config||{};logger.trace("Uglifying file: "+fileName);try{ast=parser.parse(fileContents,config.strict_semicolons);if(config.no_mangle!==true){ast=processor.ast_mangle(ast,config)}ast=processor.ast_squeeze(ast,config);fileContents=processor.gen_code(ast,config);if(config.max_line_length){fileContents=processor.split_lines(fileContents,config.max_line_length)}}catch(e){errMessage=e.toString();errMatch=/\nError(\r)?\n/.exec(errMessage);if(errMatch){errMessage=errMessage.substring(0,errMatch.index)}logger.error("Cannot uglify file: "+fileName+". Skipping it. Error is:\n"+errMessage)}return fileContents}}};return optimize});define("requirePatch",["env!env/file","pragma","parse","lang","logger","commonJs"],function(file,pragma,parse,lang,logger,commonJs){var allowRun=true;return function(){if(!allowRun){return}allowRun=false;var layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedFileContents={};require._cachedDefinesRequireUrls={}};require._cacheReset();require._isSupportedBuildUrl=function(url){if(url.indexOf("://")===-1&&url.indexOf("?")===-1&&url.indexOf("empty:")!==0&&url.indexOf("//")!==0){return true}else{if(!layer.ignoredUrls[url]){if(url.indexOf("empty:")===-1){logger.info("Cannot optimize network URL, skipping: "+url)}layer.ignoredUrls[url]=true}return false}};function normalizeUrlWithBase(context,moduleName,url){if(require.jsExtRegExp.test(moduleName)){url=(context.config.dir||context.config.dirBaseUrl)+url}return url}require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;if(name==="_"){context.nextTick=function(fn){fn()};context.needFullExec={};context.fullExec={};context.plugins={};context.buildShimExports={};context.makeShimExports=function(value){function fn(){return"(function (global) {\n"+"    return function () {\n"+"        var ret, fn;\n"+(value.init?"       fn = "+value.init.toString()+";\n"+"        ret = fn.apply(global, arguments);\n":"")+"        return ret || global."+value.exports+";\n"+"    };\n"+"}(this))"}return fn};context.enable=function(depMap,parent){var id=depMap.id,parentId=parent&&parent.map.id,needFullExec=context.needFullExec,fullExec=context.fullExec,mod=context.registry[id];if(mod&&!mod.defined){if(parentId&&needFullExec[parentId]){needFullExec[id]=true}}else if(needFullExec[id]&&!fullExec[id]||parentId&&needFullExec[parentId]&&!fullExec[id]){context.require.undef(id)}return oldEnable.apply(context,arguments)};context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;if(url.indexOf("empty:")===0){delete context.urlFetched[url]}if(require._isSupportedBuildUrl(url)){url=normalizeUrlWithBase(context,moduleName,url);layer.buildPathMap[moduleName]=url;layer.buildFileToModule[url]=moduleName;if(context.plugins.hasOwnProperty(moduleName)){context.needFullExec[moduleName]=true}try{if(require._cachedFileContents.hasOwnProperty(url)&&(!context.needFullExec[moduleName]||context.fullExec[moduleName])){contents=require._cachedFileContents[url];if(!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]){layer.existingRequireUrl=url}}else{contents=file.readFile(url);if(context.config.cjsTranslate){contents=commonJs.convert(url,contents)}if(context.config.onBuildRead){contents=context.config.onBuildRead(moduleName,url,contents)}contents=pragma.process(url,contents,context.config,"OnExecute");try{if(!layer.existingRequireUrl&&parse.definesRequire(url,contents)){layer.existingRequireUrl=url;require._cachedDefinesRequireUrls[url]=true}}catch(e1){throw new Error("Parse error using esprima "+"for file: "+url+"\n"+e1)}if(context.plugins.hasOwnProperty(moduleName)){pluginBuilderMatch=pluginBuilderRegExp.exec(contents);if(pluginBuilderMatch){builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,true).id;contents=file.readFile(context.nameToUrl(builderName))}}try{if(!context.needFullExec[moduleName]){contents=parse(moduleName,url,contents,{insertNeedsDefine:true,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies})}}catch(e2){throw new Error("Parse error using esprima "+"for file: "+url+"\n"+e2)}require._cachedFileContents[url]=contents}if(contents){eval(contents)}try{if(context.needFullExec[moduleName]){shim=context.config.shim[moduleName];if(shim&&shim.exports){shimExports=eval(shim.exports);if(typeof shimExports!=="undefined"){context.buildShimExports[moduleName]=shimExports}}}context.completeLoad(moduleName)}catch(e){if(!e.moduleTree){e.moduleTree=[]}e.moduleTree.push(moduleName);throw e}}catch(eOuter){if(!eOuter.fileName){eOuter.fileName=url}throw eOuter}}else{context.completeLoad(moduleName)}};context.execCb=function(name,cb,args,exports){var buildShimExports=layer.context.buildShimExports[name];if(!layer.needsDefine[name]&&!buildShimExports){layer.modulesWithNames[name]=true}if(buildShimExports){return buildShimExports}else if(cb.__requireJsBuild||layer.context.needFullExec[name]){return cb.apply(exports,args)}return undefined};moduleProto.init=function(depMaps){if(context.needFullExec[this.map.id]){lang.each(depMaps,lang.bind(this,function(depMap){if(typeof depMap==="string"){depMap=context.makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap)}if(!context.fullExec[depMap.id]){context.require.undef(depMap.id)}}))}return oldInit.apply(this,arguments)};moduleProto.callPlugin=function(){var map=this.map,pluginMap=context.makeModuleMap(map.prefix),pluginId=pluginMap.id,pluginMod=context.registry[pluginId];context.plugins[pluginId]=true;context.needFullExec[pluginId]=true;if(!context.fullExec[pluginId]&&(!pluginMod||pluginMod.defined)){context.require.undef(pluginMap.id)}return oldCallPlugin.apply(this,arguments)}}return context};delete require.s.contexts._;require._buildReset=function(){var oldContext=require.s.contexts._;delete require.s.contexts._;require({});layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._};return oldContext};require._buildReset();oldDef=define;define=function(name){if(typeof name==="string"&&!layer.needsDefine[name]){layer.modulesWithNames[name]=true}return oldDef.apply(require,arguments)};define.amd=oldDef.amd;require._readFile=file.readFile;require._fileExists=function(path){return file.exists(path)};require.onResourceLoad=function(context,map){var id=map.id,url;if(context.needFullExec&&context.needFullExec[id]){context.fullExec[id]=true}if(map.prefix){if(!layer.pathAdded[id]){layer.buildFilePaths.push(id);layer.buildPathMap[id]=id;layer.buildFileToModule[id]=id;layer.modulesWithNames[id]=true;layer.pathAdded[id]=true}}else if(map.url&&require._isSupportedBuildUrl(map.url)){url=normalizeUrlWithBase(context,id,map.url);if(!layer.pathAdded[url]&&layer.buildPathMap[id]){layer.buildFilePaths.push(url);layer.pathAdded[url]=true}}};require.needsDefine=function(moduleName){layer.needsDefine[moduleName]=true}}});define("commonJs",["env!env/file","parse"],function(file,parse){"use strict";var commonJs={useLog:true,convertDir:function(commonJsPath,savePath){var fileList,i,jsFileRegExp=/\.js$/,fileName,convertedFileName,fileContents;fileList=file.getFilteredFileList(commonJsPath,/\w/,true);commonJsPath=commonJsPath.replace(/\\/g,"/");savePath=savePath.replace(/\\/g,"/");if(commonJsPath.charAt(commonJsPath.length-1)==="/"){commonJsPath=commonJsPath.substring(0,commonJsPath.length-1)}if(savePath.charAt(savePath.length-1)==="/"){savePath=savePath.substring(0,savePath.length-1)}if(!fileList||!fileList.length){if(commonJs.useLog){if(commonJsPath==="convert"){console.log("\n\n"+commonJs.convert(savePath,file.readFile(savePath)))}else{console.log("No files to convert in directory: "+commonJsPath)}}}else{for(i=0;i<fileList.length;i++){fileName=fileList[i];convertedFileName=fileName.replace(commonJsPath,savePath);if(jsFileRegExp.test(fileName)){fileContents=file.readFile(fileName);fileContents=commonJs.convert(fileName,fileContents);file.saveUtf8File(convertedFileName,fileContents)}else{file.copyFile(fileName,convertedFileName,true)}}}},convert:function(fileName,fileContents){try{var preamble="",commonJsProps=parse.usesCommonJs(fileName,fileContents);if(parse.usesAmdOrRequireJs(fileName,fileContents)||!commonJsProps){return fileContents}if(commonJsProps.dirname||commonJsProps.filename){preamble='var __filename = module.uri || "", '+'__dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1);\n'}fileContents="define(function (require, exports, module) {\n"+preamble+fileContents+"\n});\n"}catch(e){console.log("commonJs.convert: COULD NOT CONVERT: "+fileName+", so skipping it. Error was: "+e);return fileContents}return fileContents}};return commonJs});define("build",["lang","logger","env!env/file","parse","optimize","pragma","transform","env!env/load","requirePatch","env!env/quit","commonJs"],function(lang,logger,file,parse,optimize,pragma,transform,load,requirePatch,quit,commonJs){"use strict";var build,buildBaseConfig,endsWithSemiColonRegExp=/;\s*$/;buildBaseConfig={appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines",inlineText:true,isBuild:true,optimizeAllPluginResources:false,findNestedDependencies:false,preserveLicenseComments:true,dirExclusionRegExp:file.dirExclusionRegExp,_buildPathToModuleIndex:{}};function addSemiColon(text){if(endsWithSemiColonRegExp.test(text)){return text}else{return text+";"}}function endsWithSlash(dirName){if(dirName.charAt(dirName.length-1)!=="/"){dirName+="/"}return dirName}function makeWriteFile(namespace,layer){function writeFile(name,contents){logger.trace("Saving plugin-optimized file: "+name);file.saveUtf8File(name,contents)}writeFile.asModule=function(moduleName,fileName,contents){writeFile(fileName,build.toTransport(namespace,moduleName,fileName,contents,layer))};return writeFile}build=function(args){var buildFile,cmdConfig,errorMsg,errorStack,stackMatch,errorTree,i,j,errorMod,stackRegExp=/( {4}at[^\n]+)\n/,standardIndent="  ";try{if(!args||lang.isArray(args)){if(!args||args.length<1){logger.error("build.js buildProfile.js\n"+"where buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");return undefined}if(args[0].indexOf("=")===-1){buildFile=args[0];args.splice(0,1)}cmdConfig=build.convertArrayToObject(args);cmdConfig.buildFile=buildFile}else{cmdConfig=args}return build._run(cmdConfig)}catch(e){errorMsg=e.toString();errorTree=e.moduleTree;stackMatch=stackRegExp.exec(errorMsg);if(stackMatch){errorMsg+=errorMsg.substring(0,stackMatch.index+stackMatch[0].length+1)}if(errorTree&&errorTree.length>0){errorMsg+="\nIn module tree:\n";for(i=errorTree.length-1;i>-1;i--){errorMod=errorTree[i];if(errorMod){for(j=errorTree.length-i;j>-1;j--){errorMsg+=standardIndent}errorMsg+=errorMod+"\n"}}logger.error(errorMsg)}errorStack=e.stack;if(typeof args==="string"&&args.indexOf("stacktrace=true")!==-1){errorMsg+="\n"+errorStack}else{if(!stackMatch&&errorStack){stackMatch=stackRegExp.exec(errorStack);if(stackMatch){errorMsg+="\n"+stackMatch[0]||""}}}if(logger.level>logger.ERROR){throw new Error(errorMsg)}else{logger.error(errorMsg);quit(1)}}};build._run=function(cmdConfig){var buildPaths,fileName,fileNames,prop,paths,i,baseConfig,config,modules,builtModule,srcPath,buildContext,destPath,moduleName,moduleMap,parentModuleMap,context,resources,resource,plugin,fileContents,pluginProcessed={},buildFileContents="",pluginCollector={};requirePatch();config=build.createConfig(cmdConfig);paths=config.paths;if(config.logLevel){logger.logLevel(config.logLevel)}if(config.dir&&!config.keepBuildDir&&file.exists(config.dir)){file.deleteFile(config.dir)}if(!config.out&&!config.cssIn){file.copyDir(config.appDir||config.baseUrl,config.dir,/\w/,true);buildPaths={};if(config.appDir){for(prop in paths){if(paths.hasOwnProperty(prop)){buildPaths[prop]=paths[prop].replace(config.appDir,config.dir)}}}else{for(prop in paths){if(paths.hasOwnProperty(prop)){if(paths[prop].indexOf(config.baseUrl)===0){buildPaths[prop]=paths[prop].replace(config.baseUrl,config.dirBaseUrl)}else{buildPaths[prop]=paths[prop]==="empty:"?"empty:":prop.replace(/\./g,"/");srcPath=paths[prop];if(srcPath.indexOf("/")!==0&&srcPath.indexOf(":")===-1){srcPath=config.baseUrl+srcPath}destPath=config.dirBaseUrl+buildPaths[prop];if(srcPath!=="empty:"){if(file.exists(srcPath)&&file.isDirectory(srcPath)){file.copyDir(srcPath,destPath,/\w/,true)}else{srcPath+=".js";destPath+=".js";file.copyFile(srcPath,destPath)}}}}}}}require({baseUrl:config.baseUrl,paths:paths,packagePaths:config.packagePaths,packages:config.packages});buildContext=require.s.contexts._;modules=config.modules;if(modules){modules.forEach(function(module){if(module.name){module._sourcePath=buildContext.nameToUrl(module.name);if(!file.exists(module._sourcePath)&&!module.create&&module.name.indexOf("!")===-1){throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+file.absPath("."))}}})}if(config.out){require(config);if(!config.cssIn){config.modules[0]._buildPath=typeof config.out==="function"?"FUNCTION":config.out}}else if(!config.cssIn){baseConfig={baseUrl:config.dirBaseUrl,paths:buildPaths};lang.mixin(baseConfig,config);require(baseConfig);if(modules){modules.forEach(function(module){if(module.name){module._buildPath=buildContext.nameToUrl(module.name,null);if(!module.create){file.copyFile(module._sourcePath,module._buildPath)}}})}}if(config.optimizeCss&&config.optimizeCss!=="none"&&config.dir){buildFileContents+=optimize.css(config.dir,config)}if(modules){modules.forEach(function(module,i){config._buildPathToModuleIndex[module._buildPath]=i;module.layer=build.traceDependencies(module,config)});modules.forEach(function(module){if(module.exclude){module.excludeLayers=[];module.exclude.forEach(function(exclude,i){module.excludeLayers[i]=build.findBuildModule(exclude,modules)||{layer:build.traceDependencies({name:exclude},config)}})}});modules.forEach(function(module){if(module.exclude){module.exclude.forEach(function(excludeModule,i){var excludeLayer=module.excludeLayers[i].layer,map=excludeLayer.buildPathMap,prop;for(prop in map){if(map.hasOwnProperty(prop)){build.removeModulePath(prop,map[prop],module.layer)}}})}if(module.excludeShallow){module.excludeShallow.forEach(function(excludeShallowModule){var path=module.layer.buildPathMap[excludeShallowModule];if(path){build.removeModulePath(excludeShallowModule,path,module.layer)}})}builtModule=build.flattenModule(module,module.layer,config);if(module._buildPath==="FUNCTION"){module._buildText=builtModule.text}else{file.saveUtf8File(module._buildPath+"-temp",builtModule.text)}buildFileContents+=builtModule.buildText});modules.forEach(function(module){var finalPath=module._buildPath;if(finalPath!=="FUNCTION"){if(file.exists(finalPath)){file.deleteFile(finalPath)}file.renameFile(finalPath+"-temp",finalPath);if(config.removeCombined){module.layer.buildFilePaths.forEach(function(path){if(file.exists(path)&&!modules.some(function(mod){return mod._buildPath===path})){file.deleteFile(path)}})}}})}if(config.removeCombined&&!config.out&&config.dir){file.deleteEmptyDirs(config.dir)}if(config.out&&!config.cssIn){fileName=config.modules[0]._buildPath;if(fileName==="FUNCTION"){config.modules[0]._buildText=optimize.js(fileName,config.modules[0]._buildText,config)}else{optimize.jsFile(fileName,null,fileName,config)}}else if(!config.cssIn){fileNames=file.getFilteredFileList(config.dir,/\.js$/,true);fileNames.forEach(function(fileName,i){var cfg,moduleIndex,override;moduleName=fileName.replace(config.dir,"");moduleName=moduleName.substring(0,moduleName.length-3);fileContents=file.readFile(fileName);if(config.cjsTranslate){fileContents=commonJs.convert(fileName,fileContents)}fileContents=build.toTransport(config.namespace,null,fileName,fileContents);moduleIndex=config._buildPathToModuleIndex[fileName];override=moduleIndex===0||moduleIndex>0?config.modules[moduleIndex].override:null;if(override){cfg=build.createOverrideConfig(config,override)}else{cfg=config}optimize.jsFile(fileName,fileContents,fileName,cfg,pluginCollector)});context=require.s.contexts._;for(moduleName in pluginCollector){if(pluginCollector.hasOwnProperty(moduleName)){parentModuleMap=context.makeModuleMap(moduleName);resources=pluginCollector[moduleName];for(i=0;i<resources.length;i++){resource=resources[i];moduleMap=context.makeModuleMap(resource,parentModuleMap);if(!context.plugins[moduleMap.prefix]){context.plugins[moduleMap.prefix]=true;if(!file.exists(require.toUrl(moduleMap.prefix+".js"))){continue
}context.require([moduleMap.prefix]);moduleMap=context.makeModuleMap(resource,parentModuleMap)}if(!pluginProcessed[moduleMap.id]){plugin=context.defined[moduleMap.prefix];if(plugin&&plugin.writeFile){plugin.writeFile(moduleMap.prefix,moduleMap.name,require,makeWriteFile(config.namespace),context.config)}pluginProcessed[moduleMap.id]=true}}}}file.saveUtf8File(config.dir+"build.txt",buildFileContents)}if(config.cssIn){buildFileContents+=optimize.cssFile(config.cssIn,config.out,config)}if(typeof config.out==="function"){config.out(config.modules[0]._buildText)}if(buildFileContents){logger.info(buildFileContents);return buildFileContents}return""};function stringDotToObj(result,name,value){var parts=name.split("."),prop=parts[0];parts.forEach(function(prop,i){if(i===parts.length-1){result[prop]=value}else{if(!result[prop]){result[prop]={}}result=result[prop]}})}build.objProps={paths:true,wrap:true,pragmas:true,pragmasOnSave:true,has:true,hasOnSave:true,uglify:true,closure:true,map:true};build.hasDotPropMatch=function(prop){var dotProp,index=prop.indexOf(".");if(index!==-1){dotProp=prop.substring(0,index);return build.objProps.hasOwnProperty(dotProp)}return false};build.convertArrayToObject=function(ary){var result={},i,separatorIndex,prop,value,needArray={include:true,exclude:true,excludeShallow:true,insertRequire:true};for(i=0;i<ary.length;i++){separatorIndex=ary[i].indexOf("=");if(separatorIndex===-1){throw"Malformed name/value pair: ["+ary[i]+"]. Format should be name=value"}value=ary[i].substring(separatorIndex+1,ary[i].length);if(value==="true"){value=true}else if(value==="false"){value=false}prop=ary[i].substring(0,separatorIndex);if(needArray[prop]){value=value.split(",")}if(build.hasDotPropMatch(prop)){stringDotToObj(result,prop,value)}else{result[prop]=value}}return result};build.makeAbsPath=function(path,absFilePath){if(path.indexOf("/")!==0&&path.indexOf(":")===-1){path=absFilePath+(absFilePath.charAt(absFilePath.length-1)==="/"?"":"/")+path;path=file.normalize(path)}return path.replace(lang.backSlashRegExp,"/")};build.makeAbsObject=function(props,obj,absFilePath){var i,prop;if(obj){for(i=0;i<props.length;i++){prop=props[i];if(obj.hasOwnProperty(prop)&&typeof obj[prop]==="string"){obj[prop]=build.makeAbsPath(obj[prop],absFilePath)}}}};build.makeAbsConfig=function(config,absFilePath){var props,prop,i;props=["appDir","dir","baseUrl"];for(i=0;i<props.length;i++){prop=props[i];if(config[prop]){if(prop==="baseUrl"){config.originalBaseUrl=config.baseUrl;if(config.appDir){config.baseUrl=build.makeAbsPath(config.originalBaseUrl,config.appDir)}else{config.baseUrl=build.makeAbsPath(config[prop],absFilePath)}}else{config[prop]=build.makeAbsPath(config[prop],absFilePath)}config[prop]=endsWithSlash(config[prop])}}build.makeAbsObject(["out","cssIn"],config,absFilePath);build.makeAbsObject(["startFile","endFile"],config.wrap,absFilePath)};build.nestedMix={paths:true,has:true,hasOnSave:true,pragmas:true,pragmasOnSave:true};function mixConfig(target,source){var prop,value;for(prop in source){if(source.hasOwnProperty(prop)){value=source[prop];if(typeof value==="object"&&value&&!lang.isArray(value)&&!lang.isFunction(value)&&!lang.isRegExp(value)){target[prop]=lang.mixin({},target[prop],value,true)}else{target[prop]=value}}}}function flattenWrapFile(wrap,keyName,absFilePath){var keyFileName=keyName+"File";if(typeof wrap[keyName]!=="string"&&wrap[keyFileName]){wrap[keyName]="";if(typeof wrap[keyFileName]==="string"){wrap[keyFileName]=[wrap[keyFileName]]}wrap[keyFileName].forEach(function(fileName){wrap[keyName]+=(wrap[keyName]?"\n":"")+file.readFile(build.makeAbsPath(fileName,absFilePath))})}else if(typeof wrap[keyName]!=="string"){throw new Error("wrap."+keyName+" or wrap."+keyFileName+" malformed")}}build.createConfig=function(cfg){var config={},buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,prop,buildFile,absFilePath;absFilePath=file.absPath(".");build.makeAbsConfig(cfg,absFilePath);build.makeAbsConfig(buildBaseConfig,absFilePath);lang.mixin(config,buildBaseConfig);lang.mixin(config,cfg,true);if(config.buildFile){buildFile=file.absPath(config.buildFile);if(!file.exists(buildFile)){throw new Error("ERROR: build file does not exist: "+buildFile)}absFilePath=config.baseUrl=file.absPath(file.parent(buildFile));buildFileContents=file.readFile(buildFile);try{buildFileConfig=eval("("+buildFileContents+")");build.makeAbsConfig(buildFileConfig,absFilePath);mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile;if(mainConfigFile){mainConfigFile=build.makeAbsPath(mainConfigFile,absFilePath);if(!file.exists(mainConfigFile)){throw new Error(mainConfigFile+" does not exist.")}try{mainConfig=parse.findConfig(mainConfigFile,file.readFile(mainConfigFile))}catch(configError){throw new Error("The config in mainConfigFile "+mainConfigFile+" cannot be used because it cannot be evaluated"+" correctly while running in the optimizer. Try only"+" using a config that is also valid JSON, or do not use"+" mainConfigFile and instead copy the config values needed"+" into a build file or command line arguments given to the optimizer.")}if(mainConfig){mainConfigPath=mainConfigFile.substring(0,mainConfigFile.lastIndexOf("/"));if(config.appDir&&!mainConfig.appDir){mainConfig.appDir=config.appDir}if(!mainConfig.baseUrl){mainConfig.baseUrl=mainConfigPath}build.makeAbsConfig(mainConfig,mainConfigPath);mixConfig(config,mainConfig)}}if(buildFileConfig){mixConfig(config,buildFileConfig)}mixConfig(config,cfg);lang.eachProp(config.paths,function(value,prop){if(lang.isArray(value)){throw new Error("paths fallback not supported in optimizer. "+"Please provide a build config path override "+"for "+prop)}config.paths[prop]=build.makeAbsPath(value,config.baseUrl)});if(config.hasOwnProperty("baseUrl")){if(config.appDir){config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir)}else{config.dirBaseUrl=config.dir||config.baseUrl}config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.main){throw new Error('"main" passed as an option, but the '+'supported option is called "name".')}if(!config.name&&!config.modules&&!config.include&&!config.cssIn){throw new Error('Missing either a "name", "include" or "modules" '+"option")}if(config.cssIn&&!config.out){throw new Error("ERROR: 'out' option missing.")}if(!config.cssIn&&!config.baseUrl){config.baseUrl="./"}if(!config.out&&!config.dir){throw new Error('Missing either an "out" or "dir" config value. '+'If using "appDir" for a full project optimization, '+'use "dir". If you want to optimize to one file, '+'use "out".')}if(config.appDir&&config.out){throw new Error('"appDir" is not compatible with "out". Use "dir" '+"instead. appDir is used to copy whole projects, "+'where "out" is used to just optimize to one file.')}if(config.out&&config.dir){throw new Error('The "out" and "dir" options are incompatible.'+' Use "out" if you are targeting a single file for'+' for optimization, and "dir" if you want the appDir'+" or baseUrl directories optimized.")}if(config.insertRequire&&!lang.isArray(config.insertRequire)){throw new Error("insertRequire should be a list of module IDs"+" to insert in to a require([]) call.")}if((config.name||config.include)&&!config.modules){config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire}]}else if(config.modules&&config.out){throw new Error('If the "modules" option is used, then there '+'should be a "dir" option set and "out" should '+'not be used since "out" is only for single file '+"optimization output.")}else if(config.modules&&config.name){throw new Error('"name" and "modules" options are incompatible. '+'Either use "name" if doing a single file '+'optimization, or "modules" if you want to target '+"more than one file for optimization.")}if(config.out&&!config.cssIn){if(!cfg.optimizeCss){config.optimizeCss="none"}}if(config.stubModules){config.stubModules._byName={};config.stubModules.forEach(function(id){config.stubModules._byName[id]=true})}try{if(config.wrap){if(config.wrap===true){config.wrap={start:"(function () {",end:"}());"}}else{flattenWrapFile(config.wrap,"start",absFilePath);flattenWrapFile(config.wrap,"end",absFilePath)}}}catch(wrapError){throw new Error("Malformed wrap config: need both start/end or "+"startFile/endFile: "+wrapError.toString())}if(config.context){throw new Error('The build argument "context" is not supported'+" in a build. It should only be used in web"+" pages.")}if(config.hasOwnProperty("fileExclusionRegExp")){if(typeof config.fileExclusionRegExp==="string"){file.exclusionRegExp=new RegExp(config.fileExclusionRegExp)}else{file.exclusionRegExp=config.fileExclusionRegExp}}else if(config.hasOwnProperty("dirExclusionRegExp")){file.exclusionRegExp=config.dirExclusionRegExp}delete config.jQuery;delete config.enforceDefine;delete config.urlArgs;return config};build.findBuildModule=function(moduleName,modules){var i,module;for(i=0;i<modules.length;i++){module=modules[i];if(module.name===moduleName){return module}}return null};build.removeModulePath=function(module,path,layer){var index=layer.buildFilePaths.indexOf(path);if(index!==-1){layer.buildFilePaths.splice(index,1)}};build.traceDependencies=function(module,config){var include,override,layer,context,baseConfig,oldContext,registry,id,idParts,pluginId,errMessage="",failedPluginMap={},failedPluginIds=[],errIds=[],errUrlMap={},errUrlConflicts={},hasErrUrl=false,errUrl,prop;oldContext=require._buildReset();baseConfig=oldContext.config;layer=require._layer;context=layer.context;require(lang.mixin({},baseConfig,true));logger.trace("\nTracing dependencies for: "+(module.name||module.out));include=module.name&&!module.create?[module.name]:[];if(module.include){include=include.concat(module.include)}if(module.override){override=lang.mixin({},baseConfig,true);lang.mixin(override,module.override,true);require(override)}require(include);if(module.override){require(baseConfig)}registry=context.registry;for(id in registry){if(registry.hasOwnProperty(id)&&id.indexOf("_@r")!==0){if(id.indexOf("_unnormalized")===-1&&registry[id].enabled){errIds.push(id);errUrl=registry[id].map.url;if(errUrlMap[errUrl]){hasErrUrl=true;if(!errUrlConflicts[errUrl]){errUrlConflicts[errUrl]=[];errUrlConflicts[errUrl].push(errUrlMap[errUrl])}errUrlConflicts[errUrl].push(id)}else{errUrlMap[errUrl]=id}}idParts=id.split("!");pluginId=idParts[0];if(idParts.length>1&&!failedPluginMap.hasOwnProperty(pluginId)){failedPluginIds.push(pluginId);failedPluginMap[pluginId]=true}}}if(errIds.length||failedPluginIds.length){if(failedPluginIds.length){errMessage+="Loader plugin"+(failedPluginIds.length===1?"":"s")+" did not call "+"the load callback in the build: "+failedPluginIds.join(", ")+"\n"}errMessage+="Module loading did not complete for: "+errIds.join(", ");if(hasErrUrl){errMessage+="\nThe following modules share the same URL. This "+"could be a misconfiguration if that URL only has "+"one anonymous module in it:";for(prop in errUrlConflicts){if(errUrlConflicts.hasOwnProperty(prop)){errMessage+="\n"+prop+": "+errUrlConflicts[prop].join(", ")}}}throw new Error(errMessage)}return layer};build.createOverrideConfig=function(config,override){var cfg={};lang.mixin(cfg,config,true);lang.eachProp(override,function(value,prop){if(build.objProps.hasOwnProperty(prop)){cfg[prop]={};lang.mixin(cfg[prop],config[prop],true);lang.mixin(cfg[prop],override[prop],true)}else{cfg[prop]=override[prop]}});return cfg};build.flattenModule=function(module,layer,config){var path,reqIndex,fileContents,currContents,i,moduleName,shim,packageConfig,parts,builder,writeApi,tempPragmas,namespace,namespaceWithDot,stubModulesByName,newConfig={},context=layer.context,buildFileContents="",onLayerEnds=[],onLayerEndAdded={};if(module.override){config=build.createOverrideConfig(config,module.override)}namespace=config.namespace||"";namespaceWithDot=namespace?namespace+".":"";stubModulesByName=config.stubModules&&config.stubModules._byName||{};buildFileContents+="\n"+(config.dir?module._buildPath.replace(config.dir,""):module._buildPath)+"\n----------------\n";if(layer.existingRequireUrl){reqIndex=layer.buildFilePaths.indexOf(layer.existingRequireUrl);if(reqIndex!==-1){layer.buildFilePaths.splice(reqIndex,1);layer.buildFilePaths.unshift(layer.existingRequireUrl)}}fileContents="";for(i=0;i<layer.buildFilePaths.length;i++){path=layer.buildFilePaths[i];moduleName=layer.buildFileToModule[path];packageConfig=layer.context.config.pkgs&&layer.context.config.pkgs[moduleName];if(packageConfig){moduleName+="/"+packageConfig.main}parts=context.makeModuleMap(moduleName);builder=parts.prefix&&context.defined[parts.prefix];if(builder){if(builder.onLayerEnd&&!onLayerEndAdded[parts.prefix]){onLayerEnds.push(builder);onLayerEndAdded[parts.prefix]=true}if(builder.write){writeApi=function(input){fileContents+="\n"+addSemiColon(input);if(config.onBuildWrite){fileContents=config.onBuildWrite(moduleName,path,fileContents)}};writeApi.asModule=function(moduleName,input){fileContents+="\n"+addSemiColon(build.toTransport(namespace,moduleName,path,input,layer,{useSourceUrl:layer.context.config.useSourceUrl}));if(config.onBuildWrite){fileContents=config.onBuildWrite(moduleName,path,fileContents)}};builder.write(parts.prefix,parts.name,writeApi)}}else{if(stubModulesByName.hasOwnProperty(moduleName)){if(layer.context.plugins.hasOwnProperty(moduleName)){currContents='define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});'}else{currContents="define({});"}}else{currContents=file.readFile(path)}if(config.cjsTranslate){currContents=commonJs.convert(path,currContents)}if(config.onBuildRead){currContents=config.onBuildRead(moduleName,path,currContents)}if(namespace){currContents=pragma.namespace(currContents,namespace)}currContents=build.toTransport(namespace,moduleName,path,currContents,layer,{useSourceUrl:config.useSourceUrl});if(packageConfig){currContents=addSemiColon(currContents)+"\n";currContents+=namespaceWithDot+"define('"+packageConfig.name+"', ['"+moduleName+"'], function (main) { return main; });\n"}if(config.onBuildWrite){currContents=config.onBuildWrite(moduleName,path,currContents)}fileContents+="\n"+addSemiColon(currContents)}buildFileContents+=path.replace(config.dir,"")+"\n";if(moduleName&&!layer.modulesWithNames[moduleName]&&!config.skipModuleInsertion){shim=config.shim&&config.shim[moduleName];if(shim){fileContents+="\n"+namespaceWithDot+'define("'+moduleName+'", '+(shim.deps&&shim.deps.length?build.makeJsArrayString(shim.deps)+", ":"")+(shim.exportsFn?shim.exportsFn():"function(){}")+");\n"}else{fileContents+="\n"+namespaceWithDot+'define("'+moduleName+'", function(){});\n'}}}if(onLayerEnds.length){onLayerEnds.forEach(function(builder){var path;if(typeof module.out==="string"){path=module.out}else if(typeof module._buildPath==="string"){path=module._buildPath}builder.onLayerEnd(function(input){fileContents+="\n"+addSemiColon(input)},{name:module.name,path:path})})}if(module.insertRequire){fileContents+="\n"+namespaceWithDot+'require(["'+module.insertRequire.join('", "')+'"]);\n'}return{text:config.wrap?config.wrap.start+fileContents+config.wrap.end:fileContents,buildText:buildFileContents}};build.makeJsArrayString=function(ary){return'["'+ary.map(function(item){return lang.jsEscape(item)}).join('","')+'"]'};build.toTransport=function(namespace,moduleName,path,contents,layer,options){var baseUrl=layer&&layer.context.config.baseUrl;function onFound(info){if(layer&&(info.needsId||info.foundId===moduleName)){layer.modulesWithNames[moduleName]=true}}if(baseUrl){path=path.replace(baseUrl,"")}return transform.toTransport(namespace,moduleName,path,contents,onFound,options)};return build})}function setBaseUrl(fileName){dir=fileName.replace(/\\/g,"/");if(dir.indexOf("/")!==-1){dir=dir.split("/");dir.pop();dir=dir.join("/");exec("require({baseUrl: '"+dir+"'});")}}if(env==="node"&&reqMain!==module){setBaseUrl(path.resolve(reqMain?reqMain.filename:"."));requirejs.optimize=function(config,callback){if(!loadedOptimizedLib){loadLib();loadedOptimizedLib=true}var runBuild=function(build,logger){config.logLevel=config.hasOwnProperty("logLevel")?config.logLevel:logger.SILENT;if(requirejs._buildReset){requirejs._buildReset();requirejs._cacheReset()}var result=build(config);requirejs._buildReset();requirejs._cacheReset();if(callback){callback(result)}};requirejs({context:"build"},["build","logger"],runBuild)};requirejs.tools={useLib:function(contextName,callback){if(!callback){callback=contextName;contextName="uselib"}if(!useLibLoaded[contextName]){loadLib();useLibLoaded[contextName]=true}var req=requirejs({context:contextName});req(["build"],function(){callback(req)})}};requirejs.define=define;module.exports=requirejs;return}if(commandOption==="o"){loadLib();require({baseUrl:require.s.contexts._.config.baseUrl,context:"build",catchError:{define:true}},["env!env/args","build"],function(args,build){build(args)})}else if(commandOption==="v"){console.log("r.js: "+version+", RequireJS: "+this.requirejsVars.require.version)}else if(commandOption==="convert"){loadLib();this.requirejsVars.require(["env!env/args","commonJs","env!env/print"],function(args,commonJs,print){var srcDir,outDir;srcDir=args[0];outDir=args[1];if(!srcDir||!outDir){print("Usage: path/to/commonjs/modules output/dir");return}commonJs.convertDir(args[0],args[1])})}else{if(commandOption==="lib"){loadLib()}setBaseUrl(fileName);if(exists(fileName)){exec(readFile(fileName),fileName)}else{showHelp()}}})(typeof console!=="undefined"?console:undefined,typeof Packages!=="undefined"?Array.prototype.slice.call(arguments,0):[],typeof readFile!=="undefined"?readFile:undefined);