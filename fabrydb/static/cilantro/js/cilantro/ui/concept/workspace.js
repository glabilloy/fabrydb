define(["underscore","marionette","loglevel","../core","../base","../welcome","../config","./form"],function(t,e,i,n,s,o,r,a){var l=s.ErrorView.extend({template:"concept/error"}),c=e.Layout.extend({className:"concept-workspace",template:"concept/workspace",itemView:a.ConceptForm,errorView:l,regions:{main:".main-region"},regionViews:{main:o.Welcome},initialize:function(){if(this.data={},!(this.data.concepts=this.options.concepts))throw new Error("concept collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");this.listenTo(n,n.CONCEPT_FOCUS,this.showItem)},_ensureModel:function(t){return t instanceof n.models.Concept||(t=this.data.concepts.get(t)),t},showItem:function(e){if(e=this._ensureModel(e),!this.currentView||this.currentView.model.id!==e.id){var n={model:e,context:this.data.context},s=r.resolveFormOptions(e,"concepts");if(n=t.extend(n,s.options),s.module){var o=this;require([s.module],function(t){o.createView(t,n)},function(t){o.showErrorView(e),i.debug(t)})}else this.createView(s.view||this.itemView,n)}},createView:function(t,e){try{var i=new t(e);this.setView(i)}catch(s){if(this.showErrorView(e.model),n.config.get("debug"))throw s}},showErrorView:function(t){var e=new this.errorView({model:t});this.currentView=e,this.main.show(e)},setView:function(t){this.currentView=t,this.main.show(t)},onRender:function(){var t=new this.regionViews.main;this.main.show(t)}});return{ConceptWorkspace:c}});
//@ sourceMappingURL=workspace.js.map