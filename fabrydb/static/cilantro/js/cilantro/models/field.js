var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};define(["underscore","backbone","../core","./base","./stats"],function(t,e,i,n,s){var o,r,a,h;return a=function(t){var e;return(e=i.config.get("fields.instances."+t.id+".type"))?e:null!=t.logical_type?t.logical_type:(e=t.simple_type,t.enumerable||"boolean"===e?"choice":e)},r=function(t){function i(){var t=this;i.__super__.constructor.apply(this,arguments),this.links.stats&&(this.stats=new s.StatCollection,this.stats.url=function(){return t.links.stats})}return __extends(i,t),i.prototype.parse=function(){var t;return this._cache={},t=i.__super__.parse.apply(this,arguments),t.type=a(t),t},i.prototype.distribution=function(t,i){var n=this;null==i&&(i=!0),null==this.links.distribution&&t(),i&&null!=this._cache.distribution?t(this._cache.distribution):e.ajax({url:this.links.distribution,dataType:"json",success:function(e){return n._cache.distribution=i?e:null,t(e)}})},i.prototype.values=function(t,i,n){var s,o=this;return null==n&&(n=!0),"function"==typeof t?(i=t,n=i,t={}):t&&(n=!1,"string"==typeof t&&(t={query:t})),null==this.links.values&&i(),s=e.$.Deferred(),i&&s.done(i),n&&null!=this._cache.values?s.resolve(this._cache.values):e.ajax({url:this.links.values,data:t,dataType:"json",success:function(t){return n&&(o._cache.values=t),s.resolve(t)},error:function(){return s.reject()}}),s.promise()},i}(n.Model),o=function(i){function n(){return h=n.__super__.constructor.apply(this,arguments)}return __extends(n,i),n.prototype.model=r,n.prototype.search=function(i,n){return e.ajax({url:t.result(this,"url"),data:{query:i},dataType:"json",success:function(t){return n(t)}})},n}(n.Collection),{FieldModel:r,FieldCollection:o}});
//@ sourceMappingURL=field.js.map